(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Ia(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?i=>!!n[i.toLowerCase()]:i=>!!n[i]}function Ta(t){if(Q(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Rt(r)?fy(r):Ta(r);if(i)for(const o in i)e[o]=i[o]}return e}else{if(Rt(t))return t;if(bt(t))return t}}const ay=/;(?![^(]*\))/g,cy=/:([^]+)/,ly=/\/\*.*?\*\//gs;function fy(t){const e={};return t.replace(ly,"").split(ay).forEach(n=>{if(n){const r=n.split(cy);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function _s(t){let e="";if(Rt(t))e=t;else if(Q(t))for(let n=0;n<t.length;n++){const r=_s(t[n]);r&&(e+=r+" ")}else if(bt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const hy="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",dy=Ia(hy);function hh(t){return!!t||t===""}const ul=t=>Rt(t)?t:t==null?"":Q(t)||bt(t)&&(t.toString===yh||!X(t.toString))?JSON.stringify(t,dh,2):String(t),dh=(t,e)=>e&&e.__v_isRef?dh(t,e.value):Sr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:ph(e)?{[`Set(${e.size})`]:[...e.values()]}:bt(e)&&!Q(e)&&!vh(e)?String(e):e,yt={},Tr=[],De=()=>{},py=()=>!1,gy=/^on[^a-z]/,Es=t=>gy.test(t),Sa=t=>t.startsWith("onUpdate:"),Qt=Object.assign,Aa=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},yy=Object.prototype.hasOwnProperty,rt=(t,e)=>yy.call(t,e),Q=Array.isArray,Sr=t=>Is(t)==="[object Map]",ph=t=>Is(t)==="[object Set]",X=t=>typeof t=="function",Rt=t=>typeof t=="string",Ca=t=>typeof t=="symbol",bt=t=>t!==null&&typeof t=="object",gh=t=>bt(t)&&X(t.then)&&X(t.catch),yh=Object.prototype.toString,Is=t=>yh.call(t),vy=t=>Is(t).slice(8,-1),vh=t=>Is(t)==="[object Object]",Na=t=>Rt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Oo=Ia(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ts=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},my=/-(\w)/g,xr=Ts(t=>t.replace(my,(e,n)=>n?n.toUpperCase():"")),wy=/\B([A-Z])/g,Yr=Ts(t=>t.replace(wy,"-$1").toLowerCase()),mh=Ts(t=>t.charAt(0).toUpperCase()+t.slice(1)),hu=Ts(t=>t?`on${mh(t)}`:""),Ei=(t,e)=>!Object.is(t,e),Ro=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Ko=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},$o=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let al;const by=()=>al||(al=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let je;class _y{constructor(e=!1){this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=je,!e&&je&&(this.index=(je.scopes||(je.scopes=[])).push(this)-1)}run(e){if(this.active){const n=je;try{return je=this,e()}finally{je=n}}}on(){je=this}off(){je=this.parent}stop(e){if(this.active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this.active=!1}}}function Ey(t,e=je){e&&e.active&&e.effects.push(t)}const xa=t=>{const e=new Set(t);return e.w=0,e.n=0,e},wh=t=>(t.w&En)>0,bh=t=>(t.n&En)>0,Iy=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=En},Ty=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];wh(i)&&!bh(i)?i.delete(t):e[n++]=i,i.w&=~En,i.n&=~En}e.length=n}},Lu=new WeakMap;let hi=0,En=1;const Mu=30;let Ne;const Wn=Symbol(""),Fu=Symbol("");class Da{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Ey(this,r)}run(){if(!this.active)return this.fn();let e=Ne,n=mn;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Ne,Ne=this,mn=!0,En=1<<++hi,hi<=Mu?Iy(this):cl(this),this.fn()}finally{hi<=Mu&&Ty(this),En=1<<--hi,Ne=this.parent,mn=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Ne===this?this.deferStop=!0:this.active&&(cl(this),this.onStop&&this.onStop(),this.active=!1)}}function cl(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let mn=!0;const _h=[];function Xr(){_h.push(mn),mn=!1}function Jr(){const t=_h.pop();mn=t===void 0?!0:t}function we(t,e,n){if(mn&&Ne){let r=Lu.get(t);r||Lu.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=xa()),Eh(i)}}function Eh(t,e){let n=!1;hi<=Mu?bh(t)||(t.n|=En,n=!wh(t)):n=!t.has(Ne),n&&(t.add(Ne),Ne.deps.push(t))}function rn(t,e,n,r,i,o){const s=Lu.get(t);if(!s)return;let u=[];if(e==="clear")u=[...s.values()];else if(n==="length"&&Q(t)){const a=$o(r);s.forEach((c,l)=>{(l==="length"||l>=a)&&u.push(c)})}else switch(n!==void 0&&u.push(s.get(n)),e){case"add":Q(t)?Na(n)&&u.push(s.get("length")):(u.push(s.get(Wn)),Sr(t)&&u.push(s.get(Fu)));break;case"delete":Q(t)||(u.push(s.get(Wn)),Sr(t)&&u.push(s.get(Fu)));break;case"set":Sr(t)&&u.push(s.get(Wn));break}if(u.length===1)u[0]&&Uu(u[0]);else{const a=[];for(const c of u)c&&a.push(...c);Uu(xa(a))}}function Uu(t,e){const n=Q(t)?t:[...t];for(const r of n)r.computed&&ll(r);for(const r of n)r.computed||ll(r)}function ll(t,e){(t!==Ne||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const Sy=Ia("__proto__,__v_isRef,__isVue"),Ih=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ca)),Ay=Oa(),Cy=Oa(!1,!0),Ny=Oa(!0),fl=xy();function xy(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=st(this);for(let o=0,s=this.length;o<s;o++)we(r,"get",o+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(st)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Xr();const r=st(this)[e].apply(this,n);return Jr(),r}}),t}function Oa(t=!1,e=!1){return function(r,i,o){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&o===(t?e?zy:Nh:e?Ch:Ah).get(r))return r;const s=Q(r);if(!t&&s&&rt(fl,i))return Reflect.get(fl,i,o);const u=Reflect.get(r,i,o);return(Ca(i)?Ih.has(i):Sy(i))||(t||we(r,"get",i),e)?u:Ht(u)?s&&Na(i)?u:u.value:bt(u)?t?xh(u):As(u):u}}const Dy=Th(),Oy=Th(!0);function Th(t=!1){return function(n,r,i,o){let s=n[r];if(Dr(s)&&Ht(s)&&!Ht(i))return!1;if(!t&&(!zo(i)&&!Dr(i)&&(s=st(s),i=st(i)),!Q(n)&&Ht(s)&&!Ht(i)))return s.value=i,!0;const u=Q(n)&&Na(r)?Number(r)<n.length:rt(n,r),a=Reflect.set(n,r,i,o);return n===st(o)&&(u?Ei(i,s)&&rn(n,"set",r,i):rn(n,"add",r,i)),a}}function Ry(t,e){const n=rt(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&rn(t,"delete",e,void 0),r}function ky(t,e){const n=Reflect.has(t,e);return(!Ca(e)||!Ih.has(e))&&we(t,"has",e),n}function Py(t){return we(t,"iterate",Q(t)?"length":Wn),Reflect.ownKeys(t)}const Sh={get:Ay,set:Dy,deleteProperty:Ry,has:ky,ownKeys:Py},Ly={get:Ny,set(t,e){return!0},deleteProperty(t,e){return!0}},My=Qt({},Sh,{get:Cy,set:Oy}),Ra=t=>t,Ss=t=>Reflect.getPrototypeOf(t);function po(t,e,n=!1,r=!1){t=t.__v_raw;const i=st(t),o=st(e);n||(e!==o&&we(i,"get",e),we(i,"get",o));const{has:s}=Ss(i),u=r?Ra:n?La:Ii;if(s.call(i,e))return u(t.get(e));if(s.call(i,o))return u(t.get(o));t!==i&&t.get(e)}function go(t,e=!1){const n=this.__v_raw,r=st(n),i=st(t);return e||(t!==i&&we(r,"has",t),we(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function yo(t,e=!1){return t=t.__v_raw,!e&&we(st(t),"iterate",Wn),Reflect.get(t,"size",t)}function hl(t){t=st(t);const e=st(this);return Ss(e).has.call(e,t)||(e.add(t),rn(e,"add",t,t)),this}function dl(t,e){e=st(e);const n=st(this),{has:r,get:i}=Ss(n);let o=r.call(n,t);o||(t=st(t),o=r.call(n,t));const s=i.call(n,t);return n.set(t,e),o?Ei(e,s)&&rn(n,"set",t,e):rn(n,"add",t,e),this}function pl(t){const e=st(this),{has:n,get:r}=Ss(e);let i=n.call(e,t);i||(t=st(t),i=n.call(e,t)),r&&r.call(e,t);const o=e.delete(t);return i&&rn(e,"delete",t,void 0),o}function gl(){const t=st(this),e=t.size!==0,n=t.clear();return e&&rn(t,"clear",void 0,void 0),n}function vo(t,e){return function(r,i){const o=this,s=o.__v_raw,u=st(s),a=e?Ra:t?La:Ii;return!t&&we(u,"iterate",Wn),s.forEach((c,l)=>r.call(i,a(c),a(l),o))}}function mo(t,e,n){return function(...r){const i=this.__v_raw,o=st(i),s=Sr(o),u=t==="entries"||t===Symbol.iterator&&s,a=t==="keys"&&s,c=i[t](...r),l=n?Ra:e?La:Ii;return!e&&we(o,"iterate",a?Fu:Wn),{next(){const{value:f,done:h}=c.next();return h?{value:f,done:h}:{value:u?[l(f[0]),l(f[1])]:l(f),done:h}},[Symbol.iterator](){return this}}}}function an(t){return function(...e){return t==="delete"?!1:this}}function Fy(){const t={get(o){return po(this,o)},get size(){return yo(this)},has:go,add:hl,set:dl,delete:pl,clear:gl,forEach:vo(!1,!1)},e={get(o){return po(this,o,!1,!0)},get size(){return yo(this)},has:go,add:hl,set:dl,delete:pl,clear:gl,forEach:vo(!1,!0)},n={get(o){return po(this,o,!0)},get size(){return yo(this,!0)},has(o){return go.call(this,o,!0)},add:an("add"),set:an("set"),delete:an("delete"),clear:an("clear"),forEach:vo(!0,!1)},r={get(o){return po(this,o,!0,!0)},get size(){return yo(this,!0)},has(o){return go.call(this,o,!0)},add:an("add"),set:an("set"),delete:an("delete"),clear:an("clear"),forEach:vo(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{t[o]=mo(o,!1,!1),n[o]=mo(o,!0,!1),e[o]=mo(o,!1,!0),r[o]=mo(o,!0,!0)}),[t,n,e,r]}const[Uy,Vy,jy,By]=Fy();function ka(t,e){const n=e?t?By:jy:t?Vy:Uy;return(r,i,o)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(rt(n,i)&&i in r?n:r,i,o)}const qy={get:ka(!1,!1)},Ky={get:ka(!1,!0)},$y={get:ka(!0,!1)},Ah=new WeakMap,Ch=new WeakMap,Nh=new WeakMap,zy=new WeakMap;function Hy(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Gy(t){return t.__v_skip||!Object.isExtensible(t)?0:Hy(vy(t))}function As(t){return Dr(t)?t:Pa(t,!1,Sh,qy,Ah)}function Wy(t){return Pa(t,!1,My,Ky,Ch)}function xh(t){return Pa(t,!0,Ly,$y,Nh)}function Pa(t,e,n,r,i){if(!bt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=i.get(t);if(o)return o;const s=Gy(t);if(s===0)return t;const u=new Proxy(t,s===2?r:n);return i.set(t,u),u}function Ar(t){return Dr(t)?Ar(t.__v_raw):!!(t&&t.__v_isReactive)}function Dr(t){return!!(t&&t.__v_isReadonly)}function zo(t){return!!(t&&t.__v_isShallow)}function Dh(t){return Ar(t)||Dr(t)}function st(t){const e=t&&t.__v_raw;return e?st(e):t}function Oh(t){return Ko(t,"__v_skip",!0),t}const Ii=t=>bt(t)?As(t):t,La=t=>bt(t)?xh(t):t;function Rh(t){mn&&Ne&&(t=st(t),Eh(t.dep||(t.dep=xa())))}function kh(t,e){t=st(t),t.dep&&Uu(t.dep)}function Ht(t){return!!(t&&t.__v_isRef===!0)}function wo(t){return Qy(t,!1)}function Qy(t,e){return Ht(t)?t:new Yy(t,e)}class Yy{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:st(e),this._value=n?e:Ii(e)}get value(){return Rh(this),this._value}set value(e){const n=this.__v_isShallow||zo(e)||Dr(e);e=n?e:st(e),Ei(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Ii(e),kh(this))}}function Xy(t){return Ht(t)?t.value:t}const Jy={get:(t,e,n)=>Xy(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Ht(i)&&!Ht(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function Ph(t){return Ar(t)?t:new Proxy(t,Jy)}var Lh;class Zy{constructor(e,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[Lh]=!1,this._dirty=!0,this.effect=new Da(e,()=>{this._dirty||(this._dirty=!0,kh(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=st(this);return Rh(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}Lh="__v_isReadonly";function tv(t,e,n=!1){let r,i;const o=X(t);return o?(r=t,i=De):(r=t.get,i=t.set),new Zy(r,i,o||!i,n)}function wn(t,e,n,r){let i;try{i=r?t(...r):t()}catch(o){Cs(o,e,n)}return i}function Se(t,e,n,r){if(X(t)){const o=wn(t,e,n,r);return o&&gh(o)&&o.catch(s=>{Cs(s,e,n)}),o}const i=[];for(let o=0;o<t.length;o++)i.push(Se(t[o],e,n,r));return i}function Cs(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let o=e.parent;const s=e.proxy,u=n;for(;o;){const c=o.ec;if(c){for(let l=0;l<c.length;l++)if(c[l](t,s,u)===!1)return}o=o.parent}const a=e.appContext.config.errorHandler;if(a){wn(a,null,10,[t,s,u]);return}}ev(t,n,i,r)}function ev(t,e,n,r=!0){console.error(t)}let Ti=!1,Vu=!1;const zt=[];let Ke=0;const Cr=[];let Ye=null,Vn=0;const Mh=Promise.resolve();let Ma=null;function nv(t){const e=Ma||Mh;return t?e.then(this?t.bind(this):t):e}function rv(t){let e=Ke+1,n=zt.length;for(;e<n;){const r=e+n>>>1;Si(zt[r])<t?e=r+1:n=r}return e}function Fa(t){(!zt.length||!zt.includes(t,Ti&&t.allowRecurse?Ke+1:Ke))&&(t.id==null?zt.push(t):zt.splice(rv(t.id),0,t),Fh())}function Fh(){!Ti&&!Vu&&(Vu=!0,Ma=Mh.then(Vh))}function iv(t){const e=zt.indexOf(t);e>Ke&&zt.splice(e,1)}function ov(t){Q(t)?Cr.push(...t):(!Ye||!Ye.includes(t,t.allowRecurse?Vn+1:Vn))&&Cr.push(t),Fh()}function yl(t,e=Ti?Ke+1:0){for(;e<zt.length;e++){const n=zt[e];n&&n.pre&&(zt.splice(e,1),e--,n())}}function Uh(t){if(Cr.length){const e=[...new Set(Cr)];if(Cr.length=0,Ye){Ye.push(...e);return}for(Ye=e,Ye.sort((n,r)=>Si(n)-Si(r)),Vn=0;Vn<Ye.length;Vn++)Ye[Vn]();Ye=null,Vn=0}}const Si=t=>t.id==null?1/0:t.id,sv=(t,e)=>{const n=Si(t)-Si(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function Vh(t){Vu=!1,Ti=!0,zt.sort(sv);const e=De;try{for(Ke=0;Ke<zt.length;Ke++){const n=zt[Ke];n&&n.active!==!1&&wn(n,null,14)}}finally{Ke=0,zt.length=0,Uh(),Ti=!1,Ma=null,(zt.length||Cr.length)&&Vh()}}function uv(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||yt;let i=n;const o=e.startsWith("update:"),s=o&&e.slice(7);if(s&&s in r){const l=`${s==="modelValue"?"model":s}Modifiers`,{number:f,trim:h}=r[l]||yt;h&&(i=n.map(d=>Rt(d)?d.trim():d)),f&&(i=n.map($o))}let u,a=r[u=hu(e)]||r[u=hu(xr(e))];!a&&o&&(a=r[u=hu(Yr(e))]),a&&Se(a,t,6,i);const c=r[u+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[u])return;t.emitted[u]=!0,Se(c,t,6,i)}}function jh(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const o=t.emits;let s={},u=!1;if(!X(t)){const a=c=>{const l=jh(c,e,!0);l&&(u=!0,Qt(s,l))};!n&&e.mixins.length&&e.mixins.forEach(a),t.extends&&a(t.extends),t.mixins&&t.mixins.forEach(a)}return!o&&!u?(bt(t)&&r.set(t,null),null):(Q(o)?o.forEach(a=>s[a]=null):Qt(s,o),bt(t)&&r.set(t,s),s)}function Ns(t,e){return!t||!Es(e)?!1:(e=e.slice(2).replace(/Once$/,""),rt(t,e[0].toLowerCase()+e.slice(1))||rt(t,Yr(e))||rt(t,e))}let Te=null,Bh=null;function Ho(t){const e=Te;return Te=t,Bh=t&&t.type.__scopeId||null,e}function av(t,e=Te,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&Al(-1);const o=Ho(e);let s;try{s=t(...i)}finally{Ho(o),r._d&&Al(1)}return s};return r._n=!0,r._c=!0,r._d=!0,r}function du(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:o,propsOptions:[s],slots:u,attrs:a,emit:c,render:l,renderCache:f,data:h,setupState:d,ctx:g,inheritAttrs:y}=t;let w,_;const P=Ho(t);try{if(n.shapeFlag&4){const U=i||r;w=qe(l.call(U,U,f,o,d,h,g)),_=a}else{const U=e;w=qe(U.length>1?U(o,{attrs:a,slots:u,emit:c}):U(o,null)),_=e.props?a:cv(a)}}catch(U){yi.length=0,Cs(U,t,1),w=Ze(Oe)}let T=w;if(_&&y!==!1){const U=Object.keys(_),{shapeFlag:z}=T;U.length&&z&7&&(s&&U.some(Sa)&&(_=lv(_,s)),T=In(T,_))}return n.dirs&&(T=In(T),T.dirs=T.dirs?T.dirs.concat(n.dirs):n.dirs),n.transition&&(T.transition=n.transition),w=T,Ho(P),w}const cv=t=>{let e;for(const n in t)(n==="class"||n==="style"||Es(n))&&((e||(e={}))[n]=t[n]);return e},lv=(t,e)=>{const n={};for(const r in t)(!Sa(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function fv(t,e,n){const{props:r,children:i,component:o}=t,{props:s,children:u,patchFlag:a}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return r?vl(r,s,c):!!s;if(a&8){const l=e.dynamicProps;for(let f=0;f<l.length;f++){const h=l[f];if(s[h]!==r[h]&&!Ns(c,h))return!0}}}else return(i||u)&&(!u||!u.$stable)?!0:r===s?!1:r?s?vl(r,s,c):!0:!!s;return!1}function vl(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!Ns(n,o))return!0}return!1}function hv({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const dv=t=>t.__isSuspense;function pv(t,e){e&&e.pendingBranch?Q(t)?e.effects.push(...t):e.effects.push(t):ov(t)}function gv(t,e){if(Mt){let n=Mt.provides;const r=Mt.parent&&Mt.parent.provides;r===n&&(n=Mt.provides=Object.create(r)),n[t]=e}}function ko(t,e,n=!1){const r=Mt||Te;if(r){const i=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&X(e)?e.call(r.proxy):e}}const bo={};function pu(t,e,n){return qh(t,e,n)}function qh(t,e,{immediate:n,deep:r,flush:i,onTrack:o,onTrigger:s}=yt){const u=Mt;let a,c=!1,l=!1;if(Ht(t)?(a=()=>t.value,c=zo(t)):Ar(t)?(a=()=>t,r=!0):Q(t)?(l=!0,c=t.some(T=>Ar(T)||zo(T)),a=()=>t.map(T=>{if(Ht(T))return T.value;if(Ar(T))return Kn(T);if(X(T))return wn(T,u,2)})):X(t)?e?a=()=>wn(t,u,2):a=()=>{if(!(u&&u.isUnmounted))return f&&f(),Se(t,u,3,[h])}:a=De,e&&r){const T=a;a=()=>Kn(T())}let f,h=T=>{f=_.onStop=()=>{wn(T,u,4)}},d;if(Ci)if(h=De,e?n&&Se(e,u,3,[a(),l?[]:void 0,h]):a(),i==="sync"){const T=fm();d=T.__watcherHandles||(T.__watcherHandles=[])}else return De;let g=l?new Array(t.length).fill(bo):bo;const y=()=>{if(!!_.active)if(e){const T=_.run();(r||c||(l?T.some((U,z)=>Ei(U,g[z])):Ei(T,g)))&&(f&&f(),Se(e,u,3,[T,g===bo?void 0:l&&g[0]===bo?[]:g,h]),g=T)}else _.run()};y.allowRecurse=!!e;let w;i==="sync"?w=y:i==="post"?w=()=>oe(y,u&&u.suspense):(y.pre=!0,u&&(y.id=u.uid),w=()=>Fa(y));const _=new Da(a,w);e?n?y():g=_.run():i==="post"?oe(_.run.bind(_),u&&u.suspense):_.run();const P=()=>{_.stop(),u&&u.scope&&Aa(u.scope.effects,_)};return d&&d.push(P),P}function yv(t,e,n){const r=this.proxy,i=Rt(t)?t.includes(".")?Kh(r,t):()=>r[t]:t.bind(r,r);let o;X(e)?o=e:(o=e.handler,n=e);const s=Mt;Or(this);const u=qh(i,o.bind(r),n);return s?Or(s):Qn(),u}function Kh(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function Kn(t,e){if(!bt(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Ht(t))Kn(t.value,e);else if(Q(t))for(let n=0;n<t.length;n++)Kn(t[n],e);else if(ph(t)||Sr(t))t.forEach(n=>{Kn(n,e)});else if(vh(t))for(const n in t)Kn(t[n],e);return t}function vv(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ua(()=>{t.isMounted=!0}),Wh(()=>{t.isUnmounting=!0}),t}const _e=[Function,Array],mv={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:_e,onEnter:_e,onAfterEnter:_e,onEnterCancelled:_e,onBeforeLeave:_e,onLeave:_e,onAfterLeave:_e,onLeaveCancelled:_e,onBeforeAppear:_e,onAppear:_e,onAfterAppear:_e,onAppearCancelled:_e},setup(t,{slots:e}){const n=rm(),r=vv();let i;return()=>{const o=e.default&&zh(e.default(),!0);if(!o||!o.length)return;let s=o[0];if(o.length>1){for(const y of o)if(y.type!==Oe){s=y;break}}const u=st(t),{mode:a}=u;if(r.isLeaving)return gu(s);const c=ml(s);if(!c)return gu(s);const l=ju(c,u,r,n);Bu(c,l);const f=n.subTree,h=f&&ml(f);let d=!1;const{getTransitionKey:g}=c.type;if(g){const y=g();i===void 0?i=y:y!==i&&(i=y,d=!0)}if(h&&h.type!==Oe&&(!jn(c,h)||d)){const y=ju(h,u,r,n);if(Bu(h,y),a==="out-in")return r.isLeaving=!0,y.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&n.update()},gu(s);a==="in-out"&&c.type!==Oe&&(y.delayLeave=(w,_,P)=>{const T=$h(r,h);T[String(h.key)]=h,w._leaveCb=()=>{_(),w._leaveCb=void 0,delete l.delayedLeave},l.delayedLeave=P})}return s}}},wv=mv;function $h(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function ju(t,e,n,r){const{appear:i,mode:o,persisted:s=!1,onBeforeEnter:u,onEnter:a,onAfterEnter:c,onEnterCancelled:l,onBeforeLeave:f,onLeave:h,onAfterLeave:d,onLeaveCancelled:g,onBeforeAppear:y,onAppear:w,onAfterAppear:_,onAppearCancelled:P}=e,T=String(t.key),U=$h(n,t),z=(Y,vt)=>{Y&&Se(Y,r,9,vt)},Z=(Y,vt)=>{const pt=vt[1];z(Y,vt),Q(Y)?Y.every(Bt=>Bt.length<=1)&&pt():Y.length<=1&&pt()},lt={mode:o,persisted:s,beforeEnter(Y){let vt=u;if(!n.isMounted)if(i)vt=y||u;else return;Y._leaveCb&&Y._leaveCb(!0);const pt=U[T];pt&&jn(t,pt)&&pt.el._leaveCb&&pt.el._leaveCb(),z(vt,[Y])},enter(Y){let vt=a,pt=c,Bt=l;if(!n.isMounted)if(i)vt=w||a,pt=_||c,Bt=P||l;else return;let Me=!1;const We=Y._enterCb=ai=>{Me||(Me=!0,ai?z(Bt,[Y]):z(pt,[Y]),lt.delayedLeave&&lt.delayedLeave(),Y._enterCb=void 0)};vt?Z(vt,[Y,We]):We()},leave(Y,vt){const pt=String(t.key);if(Y._enterCb&&Y._enterCb(!0),n.isUnmounting)return vt();z(f,[Y]);let Bt=!1;const Me=Y._leaveCb=We=>{Bt||(Bt=!0,vt(),We?z(g,[Y]):z(d,[Y]),Y._leaveCb=void 0,U[pt]===t&&delete U[pt])};U[pt]=t,h?Z(h,[Y,Me]):Me()},clone(Y){return ju(Y,e,n,r)}};return lt}function gu(t){if(xs(t))return t=In(t),t.children=null,t}function ml(t){return xs(t)?t.children?t.children[0]:void 0:t}function Bu(t,e){t.shapeFlag&6&&t.component?Bu(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function zh(t,e=!1,n){let r=[],i=0;for(let o=0;o<t.length;o++){let s=t[o];const u=n==null?s.key:String(n)+String(s.key!=null?s.key:o);s.type===Ie?(s.patchFlag&128&&i++,r=r.concat(zh(s.children,e,u))):(e||s.type!==Oe)&&r.push(u!=null?In(s,{key:u}):s)}if(i>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}const Po=t=>!!t.type.__asyncLoader,xs=t=>t.type.__isKeepAlive;function bv(t,e){Hh(t,"a",e)}function _v(t,e){Hh(t,"da",e)}function Hh(t,e,n=Mt){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Ds(e,r,n),n){let i=n.parent;for(;i&&i.parent;)xs(i.parent.vnode)&&Ev(r,e,n,i),i=i.parent}}function Ev(t,e,n,r){const i=Ds(e,t,r,!0);Qh(()=>{Aa(r[e],i)},n)}function Ds(t,e,n=Mt,r=!1){if(n){const i=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...s)=>{if(n.isUnmounted)return;Xr(),Or(n);const u=Se(e,n,t,s);return Qn(),Jr(),u});return r?i.unshift(o):i.push(o),o}}const sn=t=>(e,n=Mt)=>(!Ci||t==="sp")&&Ds(t,(...r)=>e(...r),n),Iv=sn("bm"),Ua=sn("m"),Tv=sn("bu"),Gh=sn("u"),Wh=sn("bum"),Qh=sn("um"),Sv=sn("sp"),Av=sn("rtg"),Cv=sn("rtc");function Nv(t,e=Mt){Ds("ec",t,e)}function wl(t,e){const n=Te;if(n===null)return t;const r=ks(n)||n.proxy,i=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[s,u,a,c=yt]=e[o];s&&(X(s)&&(s={mounted:s,updated:s}),s.deep&&Kn(u),i.push({dir:s,instance:r,value:u,oldValue:void 0,arg:a,modifiers:c}))}return t}function kn(t,e,n,r){const i=t.dirs,o=e&&e.dirs;for(let s=0;s<i.length;s++){const u=i[s];o&&(u.oldValue=o[s].value);let a=u.dir[r];a&&(Xr(),Se(a,n,8,[t.el,u,t,e]),Jr())}}const xv=Symbol();function Dv(t,e,n,r){let i;const o=n&&n[r];if(Q(t)||Rt(t)){i=new Array(t.length);for(let s=0,u=t.length;s<u;s++)i[s]=e(t[s],s,void 0,o&&o[s])}else if(typeof t=="number"){i=new Array(t);for(let s=0;s<t;s++)i[s]=e(s+1,s,void 0,o&&o[s])}else if(bt(t))if(t[Symbol.iterator])i=Array.from(t,(s,u)=>e(s,u,void 0,o&&o[u]));else{const s=Object.keys(t);i=new Array(s.length);for(let u=0,a=s.length;u<a;u++){const c=s[u];i[u]=e(t[c],c,u,o&&o[u])}}else i=[];return n&&(n[r]=i),i}const qu=t=>t?ud(t)?ks(t)||t.proxy:qu(t.parent):null,gi=Qt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>qu(t.parent),$root:t=>qu(t.root),$emit:t=>t.emit,$options:t=>Va(t),$forceUpdate:t=>t.f||(t.f=()=>Fa(t.update)),$nextTick:t=>t.n||(t.n=nv.bind(t.proxy)),$watch:t=>yv.bind(t)}),yu=(t,e)=>t!==yt&&!t.__isScriptSetup&&rt(t,e),Ov={get({_:t},e){const{ctx:n,setupState:r,data:i,props:o,accessCache:s,type:u,appContext:a}=t;let c;if(e[0]!=="$"){const d=s[e];if(d!==void 0)switch(d){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return o[e]}else{if(yu(r,e))return s[e]=1,r[e];if(i!==yt&&rt(i,e))return s[e]=2,i[e];if((c=t.propsOptions[0])&&rt(c,e))return s[e]=3,o[e];if(n!==yt&&rt(n,e))return s[e]=4,n[e];Ku&&(s[e]=0)}}const l=gi[e];let f,h;if(l)return e==="$attrs"&&we(t,"get",e),l(t);if((f=u.__cssModules)&&(f=f[e]))return f;if(n!==yt&&rt(n,e))return s[e]=4,n[e];if(h=a.config.globalProperties,rt(h,e))return h[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:o}=t;return yu(i,e)?(i[e]=n,!0):r!==yt&&rt(r,e)?(r[e]=n,!0):rt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:o}},s){let u;return!!n[s]||t!==yt&&rt(t,s)||yu(e,s)||(u=o[0])&&rt(u,s)||rt(r,s)||rt(gi,s)||rt(i.config.globalProperties,s)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:rt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let Ku=!0;function Rv(t){const e=Va(t),n=t.proxy,r=t.ctx;Ku=!1,e.beforeCreate&&bl(e.beforeCreate,t,"bc");const{data:i,computed:o,methods:s,watch:u,provide:a,inject:c,created:l,beforeMount:f,mounted:h,beforeUpdate:d,updated:g,activated:y,deactivated:w,beforeDestroy:_,beforeUnmount:P,destroyed:T,unmounted:U,render:z,renderTracked:Z,renderTriggered:lt,errorCaptured:Y,serverPrefetch:vt,expose:pt,inheritAttrs:Bt,components:Me,directives:We,filters:ai}=e;if(c&&kv(c,r,null,t.appContext.config.unwrapInjectedRef),s)for(const _t in s){const ft=s[_t];X(ft)&&(r[_t]=ft.bind(n))}if(i){const _t=i.call(n,n);bt(_t)&&(t.data=As(_t))}if(Ku=!0,o)for(const _t in o){const ft=o[_t],On=X(ft)?ft.bind(n,n):X(ft.get)?ft.get.bind(n,n):De,fo=!X(ft)&&X(ft.set)?ft.set.bind(n):De,Rn=cm({get:On,set:fo});Object.defineProperty(r,_t,{enumerable:!0,configurable:!0,get:()=>Rn.value,set:Fe=>Rn.value=Fe})}if(u)for(const _t in u)Yh(u[_t],r,n,_t);if(a){const _t=X(a)?a.call(n):a;Reflect.ownKeys(_t).forEach(ft=>{gv(ft,_t[ft])})}l&&bl(l,t,"c");function Jt(_t,ft){Q(ft)?ft.forEach(On=>_t(On.bind(n))):ft&&_t(ft.bind(n))}if(Jt(Iv,f),Jt(Ua,h),Jt(Tv,d),Jt(Gh,g),Jt(bv,y),Jt(_v,w),Jt(Nv,Y),Jt(Cv,Z),Jt(Av,lt),Jt(Wh,P),Jt(Qh,U),Jt(Sv,vt),Q(pt))if(pt.length){const _t=t.exposed||(t.exposed={});pt.forEach(ft=>{Object.defineProperty(_t,ft,{get:()=>n[ft],set:On=>n[ft]=On})})}else t.exposed||(t.exposed={});z&&t.render===De&&(t.render=z),Bt!=null&&(t.inheritAttrs=Bt),Me&&(t.components=Me),We&&(t.directives=We)}function kv(t,e,n=De,r=!1){Q(t)&&(t=$u(t));for(const i in t){const o=t[i];let s;bt(o)?"default"in o?s=ko(o.from||i,o.default,!0):s=ko(o.from||i):s=ko(o),Ht(s)&&r?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:u=>s.value=u}):e[i]=s}}function bl(t,e,n){Se(Q(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Yh(t,e,n,r){const i=r.includes(".")?Kh(n,r):()=>n[r];if(Rt(t)){const o=e[t];X(o)&&pu(i,o)}else if(X(t))pu(i,t.bind(n));else if(bt(t))if(Q(t))t.forEach(o=>Yh(o,e,n,r));else{const o=X(t.handler)?t.handler.bind(n):e[t.handler];X(o)&&pu(i,o,t)}}function Va(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=t.appContext,u=o.get(e);let a;return u?a=u:!i.length&&!n&&!r?a=e:(a={},i.length&&i.forEach(c=>Go(a,c,s,!0)),Go(a,e,s)),bt(e)&&o.set(e,a),a}function Go(t,e,n,r=!1){const{mixins:i,extends:o}=e;o&&Go(t,o,n,!0),i&&i.forEach(s=>Go(t,s,n,!0));for(const s in e)if(!(r&&s==="expose")){const u=Pv[s]||n&&n[s];t[s]=u?u(t[s],e[s]):e[s]}return t}const Pv={data:_l,props:Fn,emits:Fn,methods:Fn,computed:Fn,beforeCreate:Zt,created:Zt,beforeMount:Zt,mounted:Zt,beforeUpdate:Zt,updated:Zt,beforeDestroy:Zt,beforeUnmount:Zt,destroyed:Zt,unmounted:Zt,activated:Zt,deactivated:Zt,errorCaptured:Zt,serverPrefetch:Zt,components:Fn,directives:Fn,watch:Mv,provide:_l,inject:Lv};function _l(t,e){return e?t?function(){return Qt(X(t)?t.call(this,this):t,X(e)?e.call(this,this):e)}:e:t}function Lv(t,e){return Fn($u(t),$u(e))}function $u(t){if(Q(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Zt(t,e){return t?[...new Set([].concat(t,e))]:e}function Fn(t,e){return t?Qt(Qt(Object.create(null),t),e):e}function Mv(t,e){if(!t)return e;if(!e)return t;const n=Qt(Object.create(null),t);for(const r in e)n[r]=Zt(t[r],e[r]);return n}function Fv(t,e,n,r=!1){const i={},o={};Ko(o,Rs,1),t.propsDefaults=Object.create(null),Xh(t,e,i,o);for(const s in t.propsOptions[0])s in i||(i[s]=void 0);n?t.props=r?i:Wy(i):t.type.props?t.props=i:t.props=o,t.attrs=o}function Uv(t,e,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=t,u=st(i),[a]=t.propsOptions;let c=!1;if((r||s>0)&&!(s&16)){if(s&8){const l=t.vnode.dynamicProps;for(let f=0;f<l.length;f++){let h=l[f];if(Ns(t.emitsOptions,h))continue;const d=e[h];if(a)if(rt(o,h))d!==o[h]&&(o[h]=d,c=!0);else{const g=xr(h);i[g]=zu(a,u,g,d,t,!1)}else d!==o[h]&&(o[h]=d,c=!0)}}}else{Xh(t,e,i,o)&&(c=!0);let l;for(const f in u)(!e||!rt(e,f)&&((l=Yr(f))===f||!rt(e,l)))&&(a?n&&(n[f]!==void 0||n[l]!==void 0)&&(i[f]=zu(a,u,f,void 0,t,!0)):delete i[f]);if(o!==u)for(const f in o)(!e||!rt(e,f)&&!0)&&(delete o[f],c=!0)}c&&rn(t,"set","$attrs")}function Xh(t,e,n,r){const[i,o]=t.propsOptions;let s=!1,u;if(e)for(let a in e){if(Oo(a))continue;const c=e[a];let l;i&&rt(i,l=xr(a))?!o||!o.includes(l)?n[l]=c:(u||(u={}))[l]=c:Ns(t.emitsOptions,a)||(!(a in r)||c!==r[a])&&(r[a]=c,s=!0)}if(o){const a=st(n),c=u||yt;for(let l=0;l<o.length;l++){const f=o[l];n[f]=zu(i,a,f,c[f],t,!rt(c,f))}}return s}function zu(t,e,n,r,i,o){const s=t[n];if(s!=null){const u=rt(s,"default");if(u&&r===void 0){const a=s.default;if(s.type!==Function&&X(a)){const{propsDefaults:c}=i;n in c?r=c[n]:(Or(i),r=c[n]=a.call(null,e),Qn())}else r=a}s[0]&&(o&&!u?r=!1:s[1]&&(r===""||r===Yr(n))&&(r=!0))}return r}function Jh(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const o=t.props,s={},u=[];let a=!1;if(!X(t)){const l=f=>{a=!0;const[h,d]=Jh(f,e,!0);Qt(s,h),d&&u.push(...d)};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}if(!o&&!a)return bt(t)&&r.set(t,Tr),Tr;if(Q(o))for(let l=0;l<o.length;l++){const f=xr(o[l]);El(f)&&(s[f]=yt)}else if(o)for(const l in o){const f=xr(l);if(El(f)){const h=o[l],d=s[f]=Q(h)||X(h)?{type:h}:Object.assign({},h);if(d){const g=Sl(Boolean,d.type),y=Sl(String,d.type);d[0]=g>-1,d[1]=y<0||g<y,(g>-1||rt(d,"default"))&&u.push(f)}}}const c=[s,u];return bt(t)&&r.set(t,c),c}function El(t){return t[0]!=="$"}function Il(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function Tl(t,e){return Il(t)===Il(e)}function Sl(t,e){return Q(e)?e.findIndex(n=>Tl(n,t)):X(e)&&Tl(e,t)?0:-1}const Zh=t=>t[0]==="_"||t==="$stable",ja=t=>Q(t)?t.map(qe):[qe(t)],Vv=(t,e,n)=>{if(e._n)return e;const r=av((...i)=>ja(e(...i)),n);return r._c=!1,r},td=(t,e,n)=>{const r=t._ctx;for(const i in t){if(Zh(i))continue;const o=t[i];if(X(o))e[i]=Vv(i,o,r);else if(o!=null){const s=ja(o);e[i]=()=>s}}},ed=(t,e)=>{const n=ja(e);t.slots.default=()=>n},jv=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=st(e),Ko(e,"_",n)):td(e,t.slots={})}else t.slots={},e&&ed(t,e);Ko(t.slots,Rs,1)},Bv=(t,e,n)=>{const{vnode:r,slots:i}=t;let o=!0,s=yt;if(r.shapeFlag&32){const u=e._;u?n&&u===1?o=!1:(Qt(i,e),!n&&u===1&&delete i._):(o=!e.$stable,td(e,i)),s=e}else e&&(ed(t,e),s={default:1});if(o)for(const u in i)!Zh(u)&&!(u in s)&&delete i[u]};function nd(){return{app:null,config:{isNativeTag:py,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let qv=0;function Kv(t,e){return function(r,i=null){X(r)||(r=Object.assign({},r)),i!=null&&!bt(i)&&(i=null);const o=nd(),s=new Set;let u=!1;const a=o.app={_uid:qv++,_component:r,_props:i,_container:null,_context:o,_instance:null,version:hm,get config(){return o.config},set config(c){},use(c,...l){return s.has(c)||(c&&X(c.install)?(s.add(c),c.install(a,...l)):X(c)&&(s.add(c),c(a,...l))),a},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),a},component(c,l){return l?(o.components[c]=l,a):o.components[c]},directive(c,l){return l?(o.directives[c]=l,a):o.directives[c]},mount(c,l,f){if(!u){const h=Ze(r,i);return h.appContext=o,l&&e?e(h,c):t(h,c,f),u=!0,a._container=c,c.__vue_app__=a,ks(h.component)||h.component.proxy}},unmount(){u&&(t(null,a._container),delete a._container.__vue_app__)},provide(c,l){return o.provides[c]=l,a}};return a}}function Hu(t,e,n,r,i=!1){if(Q(t)){t.forEach((h,d)=>Hu(h,e&&(Q(e)?e[d]:e),n,r,i));return}if(Po(r)&&!i)return;const o=r.shapeFlag&4?ks(r.component)||r.component.proxy:r.el,s=i?null:o,{i:u,r:a}=t,c=e&&e.r,l=u.refs===yt?u.refs={}:u.refs,f=u.setupState;if(c!=null&&c!==a&&(Rt(c)?(l[c]=null,rt(f,c)&&(f[c]=null)):Ht(c)&&(c.value=null)),X(a))wn(a,u,12,[s,l]);else{const h=Rt(a),d=Ht(a);if(h||d){const g=()=>{if(t.f){const y=h?rt(f,a)?f[a]:l[a]:a.value;i?Q(y)&&Aa(y,o):Q(y)?y.includes(o)||y.push(o):h?(l[a]=[o],rt(f,a)&&(f[a]=l[a])):(a.value=[o],t.k&&(l[t.k]=a.value))}else h?(l[a]=s,rt(f,a)&&(f[a]=s)):d&&(a.value=s,t.k&&(l[t.k]=s))};s?(g.id=-1,oe(g,n)):g()}}}const oe=pv;function $v(t){return zv(t)}function zv(t,e){const n=by();n.__VUE__=!0;const{insert:r,remove:i,patchProp:o,createElement:s,createText:u,createComment:a,setText:c,setElementText:l,parentNode:f,nextSibling:h,setScopeId:d=De,insertStaticContent:g}=t,y=(p,v,b,C=null,S=null,R=null,M=!1,O=null,k=!!v.dynamicChildren)=>{if(p===v)return;p&&!jn(p,v)&&(C=ho(p),Fe(p,S,R,!0),p=null),v.patchFlag===-2&&(k=!1,v.dynamicChildren=null);const{type:N,ref:q,shapeFlag:V}=v;switch(N){case Os:w(p,v,b,C);break;case Oe:_(p,v,b,C);break;case vu:p==null&&P(v,b,C,M);break;case Ie:Me(p,v,b,C,S,R,M,O,k);break;default:V&1?z(p,v,b,C,S,R,M,O,k):V&6?We(p,v,b,C,S,R,M,O,k):(V&64||V&128)&&N.process(p,v,b,C,S,R,M,O,k,pr)}q!=null&&S&&Hu(q,p&&p.ref,R,v||p,!v)},w=(p,v,b,C)=>{if(p==null)r(v.el=u(v.children),b,C);else{const S=v.el=p.el;v.children!==p.children&&c(S,v.children)}},_=(p,v,b,C)=>{p==null?r(v.el=a(v.children||""),b,C):v.el=p.el},P=(p,v,b,C)=>{[p.el,p.anchor]=g(p.children,v,b,C,p.el,p.anchor)},T=({el:p,anchor:v},b,C)=>{let S;for(;p&&p!==v;)S=h(p),r(p,b,C),p=S;r(v,b,C)},U=({el:p,anchor:v})=>{let b;for(;p&&p!==v;)b=h(p),i(p),p=b;i(v)},z=(p,v,b,C,S,R,M,O,k)=>{M=M||v.type==="svg",p==null?Z(v,b,C,S,R,M,O,k):vt(p,v,S,R,M,O,k)},Z=(p,v,b,C,S,R,M,O)=>{let k,N;const{type:q,props:V,shapeFlag:K,transition:W,dirs:tt}=p;if(k=p.el=s(p.type,R,V&&V.is,V),K&8?l(k,p.children):K&16&&Y(p.children,k,null,C,S,R&&q!=="foreignObject",M,O),tt&&kn(p,null,C,"created"),V){for(const ct in V)ct!=="value"&&!Oo(ct)&&o(k,ct,null,V[ct],R,p.children,C,S,Qe);"value"in V&&o(k,"value",null,V.value),(N=V.onVnodeBeforeMount)&&Ve(N,C,p)}lt(k,p,p.scopeId,M,C),tt&&kn(p,null,C,"beforeMount");const ht=(!S||S&&!S.pendingBranch)&&W&&!W.persisted;ht&&W.beforeEnter(k),r(k,v,b),((N=V&&V.onVnodeMounted)||ht||tt)&&oe(()=>{N&&Ve(N,C,p),ht&&W.enter(k),tt&&kn(p,null,C,"mounted")},S)},lt=(p,v,b,C,S)=>{if(b&&d(p,b),C)for(let R=0;R<C.length;R++)d(p,C[R]);if(S){let R=S.subTree;if(v===R){const M=S.vnode;lt(p,M,M.scopeId,M.slotScopeIds,S.parent)}}},Y=(p,v,b,C,S,R,M,O,k=0)=>{for(let N=k;N<p.length;N++){const q=p[N]=O?hn(p[N]):qe(p[N]);y(null,q,v,b,C,S,R,M,O)}},vt=(p,v,b,C,S,R,M)=>{const O=v.el=p.el;let{patchFlag:k,dynamicChildren:N,dirs:q}=v;k|=p.patchFlag&16;const V=p.props||yt,K=v.props||yt;let W;b&&Pn(b,!1),(W=K.onVnodeBeforeUpdate)&&Ve(W,b,v,p),q&&kn(v,p,b,"beforeUpdate"),b&&Pn(b,!0);const tt=S&&v.type!=="foreignObject";if(N?pt(p.dynamicChildren,N,O,b,C,tt,R):M||ft(p,v,O,null,b,C,tt,R,!1),k>0){if(k&16)Bt(O,v,V,K,b,C,S);else if(k&2&&V.class!==K.class&&o(O,"class",null,K.class,S),k&4&&o(O,"style",V.style,K.style,S),k&8){const ht=v.dynamicProps;for(let ct=0;ct<ht.length;ct++){const Tt=ht[ct],Ae=V[Tt],gr=K[Tt];(gr!==Ae||Tt==="value")&&o(O,Tt,Ae,gr,S,p.children,b,C,Qe)}}k&1&&p.children!==v.children&&l(O,v.children)}else!M&&N==null&&Bt(O,v,V,K,b,C,S);((W=K.onVnodeUpdated)||q)&&oe(()=>{W&&Ve(W,b,v,p),q&&kn(v,p,b,"updated")},C)},pt=(p,v,b,C,S,R,M)=>{for(let O=0;O<v.length;O++){const k=p[O],N=v[O],q=k.el&&(k.type===Ie||!jn(k,N)||k.shapeFlag&70)?f(k.el):b;y(k,N,q,null,C,S,R,M,!0)}},Bt=(p,v,b,C,S,R,M)=>{if(b!==C){if(b!==yt)for(const O in b)!Oo(O)&&!(O in C)&&o(p,O,b[O],null,M,v.children,S,R,Qe);for(const O in C){if(Oo(O))continue;const k=C[O],N=b[O];k!==N&&O!=="value"&&o(p,O,N,k,M,v.children,S,R,Qe)}"value"in C&&o(p,"value",b.value,C.value)}},Me=(p,v,b,C,S,R,M,O,k)=>{const N=v.el=p?p.el:u(""),q=v.anchor=p?p.anchor:u("");let{patchFlag:V,dynamicChildren:K,slotScopeIds:W}=v;W&&(O=O?O.concat(W):W),p==null?(r(N,b,C),r(q,b,C),Y(v.children,b,q,S,R,M,O,k)):V>0&&V&64&&K&&p.dynamicChildren?(pt(p.dynamicChildren,K,b,S,R,M,O),(v.key!=null||S&&v===S.subTree)&&rd(p,v,!0)):ft(p,v,b,q,S,R,M,O,k)},We=(p,v,b,C,S,R,M,O,k)=>{v.slotScopeIds=O,p==null?v.shapeFlag&512?S.ctx.activate(v,b,C,M,k):ai(v,b,C,S,R,M,k):el(p,v,k)},ai=(p,v,b,C,S,R,M)=>{const O=p.component=nm(p,C,S);if(xs(p)&&(O.ctx.renderer=pr),im(O),O.asyncDep){if(S&&S.registerDep(O,Jt),!p.el){const k=O.subTree=Ze(Oe);_(null,k,v,b)}return}Jt(O,p,v,b,S,R,M)},el=(p,v,b)=>{const C=v.component=p.component;if(fv(p,v,b))if(C.asyncDep&&!C.asyncResolved){_t(C,v,b);return}else C.next=v,iv(C.update),C.update();else v.el=p.el,C.vnode=v},Jt=(p,v,b,C,S,R,M)=>{const O=()=>{if(p.isMounted){let{next:q,bu:V,u:K,parent:W,vnode:tt}=p,ht=q,ct;Pn(p,!1),q?(q.el=tt.el,_t(p,q,M)):q=tt,V&&Ro(V),(ct=q.props&&q.props.onVnodeBeforeUpdate)&&Ve(ct,W,q,tt),Pn(p,!0);const Tt=du(p),Ae=p.subTree;p.subTree=Tt,y(Ae,Tt,f(Ae.el),ho(Ae),p,S,R),q.el=Tt.el,ht===null&&hv(p,Tt.el),K&&oe(K,S),(ct=q.props&&q.props.onVnodeUpdated)&&oe(()=>Ve(ct,W,q,tt),S)}else{let q;const{el:V,props:K}=v,{bm:W,m:tt,parent:ht}=p,ct=Po(v);if(Pn(p,!1),W&&Ro(W),!ct&&(q=K&&K.onVnodeBeforeMount)&&Ve(q,ht,v),Pn(p,!0),V&&fu){const Tt=()=>{p.subTree=du(p),fu(V,p.subTree,p,S,null)};ct?v.type.__asyncLoader().then(()=>!p.isUnmounted&&Tt()):Tt()}else{const Tt=p.subTree=du(p);y(null,Tt,b,C,p,S,R),v.el=Tt.el}if(tt&&oe(tt,S),!ct&&(q=K&&K.onVnodeMounted)){const Tt=v;oe(()=>Ve(q,ht,Tt),S)}(v.shapeFlag&256||ht&&Po(ht.vnode)&&ht.vnode.shapeFlag&256)&&p.a&&oe(p.a,S),p.isMounted=!0,v=b=C=null}},k=p.effect=new Da(O,()=>Fa(N),p.scope),N=p.update=()=>k.run();N.id=p.uid,Pn(p,!0),N()},_t=(p,v,b)=>{v.component=p;const C=p.vnode.props;p.vnode=v,p.next=null,Uv(p,v.props,C,b),Bv(p,v.children,b),Xr(),yl(),Jr()},ft=(p,v,b,C,S,R,M,O,k=!1)=>{const N=p&&p.children,q=p?p.shapeFlag:0,V=v.children,{patchFlag:K,shapeFlag:W}=v;if(K>0){if(K&128){fo(N,V,b,C,S,R,M,O,k);return}else if(K&256){On(N,V,b,C,S,R,M,O,k);return}}W&8?(q&16&&Qe(N,S,R),V!==N&&l(b,V)):q&16?W&16?fo(N,V,b,C,S,R,M,O,k):Qe(N,S,R,!0):(q&8&&l(b,""),W&16&&Y(V,b,C,S,R,M,O,k))},On=(p,v,b,C,S,R,M,O,k)=>{p=p||Tr,v=v||Tr;const N=p.length,q=v.length,V=Math.min(N,q);let K;for(K=0;K<V;K++){const W=v[K]=k?hn(v[K]):qe(v[K]);y(p[K],W,b,null,S,R,M,O,k)}N>q?Qe(p,S,R,!0,!1,V):Y(v,b,C,S,R,M,O,k,V)},fo=(p,v,b,C,S,R,M,O,k)=>{let N=0;const q=v.length;let V=p.length-1,K=q-1;for(;N<=V&&N<=K;){const W=p[N],tt=v[N]=k?hn(v[N]):qe(v[N]);if(jn(W,tt))y(W,tt,b,null,S,R,M,O,k);else break;N++}for(;N<=V&&N<=K;){const W=p[V],tt=v[K]=k?hn(v[K]):qe(v[K]);if(jn(W,tt))y(W,tt,b,null,S,R,M,O,k);else break;V--,K--}if(N>V){if(N<=K){const W=K+1,tt=W<q?v[W].el:C;for(;N<=K;)y(null,v[N]=k?hn(v[N]):qe(v[N]),b,tt,S,R,M,O,k),N++}}else if(N>K)for(;N<=V;)Fe(p[N],S,R,!0),N++;else{const W=N,tt=N,ht=new Map;for(N=tt;N<=K;N++){const fe=v[N]=k?hn(v[N]):qe(v[N]);fe.key!=null&&ht.set(fe.key,N)}let ct,Tt=0;const Ae=K-tt+1;let gr=!1,il=0;const ci=new Array(Ae);for(N=0;N<Ae;N++)ci[N]=0;for(N=W;N<=V;N++){const fe=p[N];if(Tt>=Ae){Fe(fe,S,R,!0);continue}let Ue;if(fe.key!=null)Ue=ht.get(fe.key);else for(ct=tt;ct<=K;ct++)if(ci[ct-tt]===0&&jn(fe,v[ct])){Ue=ct;break}Ue===void 0?Fe(fe,S,R,!0):(ci[Ue-tt]=N+1,Ue>=il?il=Ue:gr=!0,y(fe,v[Ue],b,null,S,R,M,O,k),Tt++)}const ol=gr?Hv(ci):Tr;for(ct=ol.length-1,N=Ae-1;N>=0;N--){const fe=tt+N,Ue=v[fe],sl=fe+1<q?v[fe+1].el:C;ci[N]===0?y(null,Ue,b,sl,S,R,M,O,k):gr&&(ct<0||N!==ol[ct]?Rn(Ue,b,sl,2):ct--)}}},Rn=(p,v,b,C,S=null)=>{const{el:R,type:M,transition:O,children:k,shapeFlag:N}=p;if(N&6){Rn(p.component.subTree,v,b,C);return}if(N&128){p.suspense.move(v,b,C);return}if(N&64){M.move(p,v,b,pr);return}if(M===Ie){r(R,v,b);for(let V=0;V<k.length;V++)Rn(k[V],v,b,C);r(p.anchor,v,b);return}if(M===vu){T(p,v,b);return}if(C!==2&&N&1&&O)if(C===0)O.beforeEnter(R),r(R,v,b),oe(()=>O.enter(R),S);else{const{leave:V,delayLeave:K,afterLeave:W}=O,tt=()=>r(R,v,b),ht=()=>{V(R,()=>{tt(),W&&W()})};K?K(R,tt,ht):ht()}else r(R,v,b)},Fe=(p,v,b,C=!1,S=!1)=>{const{type:R,props:M,ref:O,children:k,dynamicChildren:N,shapeFlag:q,patchFlag:V,dirs:K}=p;if(O!=null&&Hu(O,null,b,p,!0),q&256){v.ctx.deactivate(p);return}const W=q&1&&K,tt=!Po(p);let ht;if(tt&&(ht=M&&M.onVnodeBeforeUnmount)&&Ve(ht,v,p),q&6)uy(p.component,b,C);else{if(q&128){p.suspense.unmount(b,C);return}W&&kn(p,null,v,"beforeUnmount"),q&64?p.type.remove(p,v,b,S,pr,C):N&&(R!==Ie||V>0&&V&64)?Qe(N,v,b,!1,!0):(R===Ie&&V&384||!S&&q&16)&&Qe(k,v,b),C&&nl(p)}(tt&&(ht=M&&M.onVnodeUnmounted)||W)&&oe(()=>{ht&&Ve(ht,v,p),W&&kn(p,null,v,"unmounted")},b)},nl=p=>{const{type:v,el:b,anchor:C,transition:S}=p;if(v===Ie){sy(b,C);return}if(v===vu){U(p);return}const R=()=>{i(b),S&&!S.persisted&&S.afterLeave&&S.afterLeave()};if(p.shapeFlag&1&&S&&!S.persisted){const{leave:M,delayLeave:O}=S,k=()=>M(b,R);O?O(p.el,R,k):k()}else R()},sy=(p,v)=>{let b;for(;p!==v;)b=h(p),i(p),p=b;i(v)},uy=(p,v,b)=>{const{bum:C,scope:S,update:R,subTree:M,um:O}=p;C&&Ro(C),S.stop(),R&&(R.active=!1,Fe(M,p,v,b)),O&&oe(O,v),oe(()=>{p.isUnmounted=!0},v),v&&v.pendingBranch&&!v.isUnmounted&&p.asyncDep&&!p.asyncResolved&&p.suspenseId===v.pendingId&&(v.deps--,v.deps===0&&v.resolve())},Qe=(p,v,b,C=!1,S=!1,R=0)=>{for(let M=R;M<p.length;M++)Fe(p[M],v,b,C,S)},ho=p=>p.shapeFlag&6?ho(p.component.subTree):p.shapeFlag&128?p.suspense.next():h(p.anchor||p.el),rl=(p,v,b)=>{p==null?v._vnode&&Fe(v._vnode,null,null,!0):y(v._vnode||null,p,v,null,null,null,b),yl(),Uh(),v._vnode=p},pr={p:y,um:Fe,m:Rn,r:nl,mt:ai,mc:Y,pc:ft,pbc:pt,n:ho,o:t};let lu,fu;return e&&([lu,fu]=e(pr)),{render:rl,hydrate:lu,createApp:Kv(rl,lu)}}function Pn({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function rd(t,e,n=!1){const r=t.children,i=e.children;if(Q(r)&&Q(i))for(let o=0;o<r.length;o++){const s=r[o];let u=i[o];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=i[o]=hn(i[o]),u.el=s.el),n||rd(s,u)),u.type===Os&&(u.el=s.el)}}function Hv(t){const e=t.slice(),n=[0];let r,i,o,s,u;const a=t.length;for(r=0;r<a;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)u=o+s>>1,t[n[u]]<c?o=u+1:s=u;c<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}for(o=n.length,s=n[o-1];o-- >0;)n[o]=s,s=e[s];return n}const Gv=t=>t.__isTeleport,Ie=Symbol(void 0),Os=Symbol(void 0),Oe=Symbol(void 0),vu=Symbol(void 0),yi=[];let xe=null;function he(t=!1){yi.push(xe=t?null:[])}function Wv(){yi.pop(),xe=yi[yi.length-1]||null}let Ai=1;function Al(t){Ai+=t}function id(t){return t.dynamicChildren=Ai>0?xe||Tr:null,Wv(),Ai>0&&xe&&xe.push(t),t}function Ee(t,e,n,r,i,o){return id(at(t,e,n,r,i,o,!0))}function Qv(t,e,n,r,i){return id(Ze(t,e,n,r,i,!0))}function Yv(t){return t?t.__v_isVNode===!0:!1}function jn(t,e){return t.type===e.type&&t.key===e.key}const Rs="__vInternal",od=({key:t})=>t!=null?t:null,Lo=({ref:t,ref_key:e,ref_for:n})=>t!=null?Rt(t)||Ht(t)||X(t)?{i:Te,r:t,k:e,f:!!n}:t:null;function at(t,e=null,n=null,r=0,i=null,o=t===Ie?0:1,s=!1,u=!1){const a={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&od(e),ref:e&&Lo(e),scopeId:Bh,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Te};return u?(Ba(a,n),o&128&&t.normalize(a)):n&&(a.shapeFlag|=Rt(n)?8:16),Ai>0&&!s&&xe&&(a.patchFlag>0||o&6)&&a.patchFlag!==32&&xe.push(a),a}const Ze=Xv;function Xv(t,e=null,n=null,r=0,i=null,o=!1){if((!t||t===xv)&&(t=Oe),Yv(t)){const u=In(t,e,!0);return n&&Ba(u,n),Ai>0&&!o&&xe&&(u.shapeFlag&6?xe[xe.indexOf(t)]=u:xe.push(u)),u.patchFlag|=-2,u}if(am(t)&&(t=t.__vccOpts),e){e=Jv(e);let{class:u,style:a}=e;u&&!Rt(u)&&(e.class=_s(u)),bt(a)&&(Dh(a)&&!Q(a)&&(a=Qt({},a)),e.style=Ta(a))}const s=Rt(t)?1:dv(t)?128:Gv(t)?64:bt(t)?4:X(t)?2:0;return at(t,e,n,r,i,s,o,!0)}function Jv(t){return t?Dh(t)||Rs in t?Qt({},t):t:null}function In(t,e,n=!1){const{props:r,ref:i,patchFlag:o,children:s}=t,u=e?Zv(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&od(u),ref:e&&e.ref?n&&i?Q(i)?i.concat(Lo(e)):[i,Lo(e)]:Lo(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:s,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ie?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&In(t.ssContent),ssFallback:t.ssFallback&&In(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx}}function sd(t=" ",e=0){return Ze(Os,null,t,e)}function _o(t="",e=!1){return e?(he(),Qv(Oe,null,t)):Ze(Oe,null,t)}function qe(t){return t==null||typeof t=="boolean"?Ze(Oe):Q(t)?Ze(Ie,null,t.slice()):typeof t=="object"?hn(t):Ze(Os,null,String(t))}function hn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:In(t)}function Ba(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Q(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),Ba(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(Rs in e)?e._ctx=Te:i===3&&Te&&(Te.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else X(e)?(e={default:e,_ctx:Te},n=32):(e=String(e),r&64?(n=16,e=[sd(e)]):n=8);t.children=e,t.shapeFlag|=n}function Zv(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=_s([e.class,r.class]));else if(i==="style")e.style=Ta([e.style,r.style]);else if(Es(i)){const o=e[i],s=r[i];s&&o!==s&&!(Q(o)&&o.includes(s))&&(e[i]=o?[].concat(o,s):s)}else i!==""&&(e[i]=r[i])}return e}function Ve(t,e,n,r=null){Se(t,e,7,[n,r])}const tm=nd();let em=0;function nm(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||tm,o={uid:em++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new _y(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Jh(r,i),emitsOptions:jh(r,i),emit:null,emitted:null,propsDefaults:yt,inheritAttrs:r.inheritAttrs,ctx:yt,data:yt,props:yt,attrs:yt,slots:yt,refs:yt,setupState:yt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=uv.bind(null,o),t.ce&&t.ce(o),o}let Mt=null;const rm=()=>Mt||Te,Or=t=>{Mt=t,t.scope.on()},Qn=()=>{Mt&&Mt.scope.off(),Mt=null};function ud(t){return t.vnode.shapeFlag&4}let Ci=!1;function im(t,e=!1){Ci=e;const{props:n,children:r}=t.vnode,i=ud(t);Fv(t,n,i,e),jv(t,r);const o=i?om(t,e):void 0;return Ci=!1,o}function om(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Oh(new Proxy(t.ctx,Ov));const{setup:r}=n;if(r){const i=t.setupContext=r.length>1?um(t):null;Or(t),Xr();const o=wn(r,t,0,[t.props,i]);if(Jr(),Qn(),gh(o)){if(o.then(Qn,Qn),e)return o.then(s=>{Cl(t,s,e)}).catch(s=>{Cs(s,t,0)});t.asyncDep=o}else Cl(t,o,e)}else ad(t,e)}function Cl(t,e,n){X(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:bt(e)&&(t.setupState=Ph(e)),ad(t,n)}let Nl;function ad(t,e,n){const r=t.type;if(!t.render){if(!e&&Nl&&!r.render){const i=r.template||Va(t).template;if(i){const{isCustomElement:o,compilerOptions:s}=t.appContext.config,{delimiters:u,compilerOptions:a}=r,c=Qt(Qt({isCustomElement:o,delimiters:u},s),a);r.render=Nl(i,c)}}t.render=r.render||De}Or(t),Xr(),Rv(t),Jr(),Qn()}function sm(t){return new Proxy(t.attrs,{get(e,n){return we(t,"get","$attrs"),e[n]}})}function um(t){const e=r=>{t.exposed=r||{}};let n;return{get attrs(){return n||(n=sm(t))},slots:t.slots,emit:t.emit,expose:e}}function ks(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Ph(Oh(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in gi)return gi[n](t)},has(e,n){return n in e||n in gi}}))}function am(t){return X(t)&&"__vccOpts"in t}const cm=(t,e)=>tv(t,e,Ci),lm=Symbol(""),fm=()=>ko(lm),hm="3.2.45",dm="http://www.w3.org/2000/svg",Bn=typeof document<"u"?document:null,xl=Bn&&Bn.createElement("template"),pm={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?Bn.createElementNS(dm,t):Bn.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Bn.createTextNode(t),createComment:t=>Bn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Bn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,o){const s=n?n.previousSibling:e.lastChild;if(i&&(i===o||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===o||!(i=i.nextSibling)););else{xl.innerHTML=r?`<svg>${t}</svg>`:t;const u=xl.content;if(r){const a=u.firstChild;for(;a.firstChild;)u.appendChild(a.firstChild);u.removeChild(a)}e.insertBefore(u,n)}return[s?s.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function gm(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function ym(t,e,n){const r=t.style,i=Rt(n);if(n&&!i){for(const o in n)Gu(r,o,n[o]);if(e&&!Rt(e))for(const o in e)n[o]==null&&Gu(r,o,"")}else{const o=r.display;i?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=o)}}const Dl=/\s*!important$/;function Gu(t,e,n){if(Q(n))n.forEach(r=>Gu(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=vm(t,e);Dl.test(n)?t.setProperty(Yr(r),n.replace(Dl,""),"important"):t[r]=n}}const Ol=["Webkit","Moz","ms"],mu={};function vm(t,e){const n=mu[e];if(n)return n;let r=xr(e);if(r!=="filter"&&r in t)return mu[e]=r;r=mh(r);for(let i=0;i<Ol.length;i++){const o=Ol[i]+r;if(o in t)return mu[e]=o}return e}const Rl="http://www.w3.org/1999/xlink";function mm(t,e,n,r,i){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(Rl,e.slice(6,e.length)):t.setAttributeNS(Rl,e,n);else{const o=dy(e);n==null||o&&!hh(n)?t.removeAttribute(e):t.setAttribute(e,o?"":n)}}function wm(t,e,n,r,i,o,s){if(e==="innerHTML"||e==="textContent"){r&&s(r,i,o),t[e]=n==null?"":n;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const a=n==null?"":n;(t.value!==a||t.tagName==="OPTION")&&(t.value=a),n==null&&t.removeAttribute(e);return}let u=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=hh(n):n==null&&a==="string"?(n="",u=!0):a==="number"&&(n=0,u=!0)}try{t[e]=n}catch{}u&&t.removeAttribute(e)}function mr(t,e,n,r){t.addEventListener(e,n,r)}function bm(t,e,n,r){t.removeEventListener(e,n,r)}function _m(t,e,n,r,i=null){const o=t._vei||(t._vei={}),s=o[e];if(r&&s)s.value=r;else{const[u,a]=Em(e);if(r){const c=o[e]=Sm(r,i);mr(t,u,c,a)}else s&&(bm(t,u,s,a),o[e]=void 0)}}const kl=/(?:Once|Passive|Capture)$/;function Em(t){let e;if(kl.test(t)){e={};let r;for(;r=t.match(kl);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Yr(t.slice(2)),e]}let wu=0;const Im=Promise.resolve(),Tm=()=>wu||(Im.then(()=>wu=0),wu=Date.now());function Sm(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Se(Am(r,n.value),e,5,[r])};return n.value=t,n.attached=Tm(),n}function Am(t,e){if(Q(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const Pl=/^on[a-z]/,Cm=(t,e,n,r,i=!1,o,s,u,a)=>{e==="class"?gm(t,r,i):e==="style"?ym(t,n,r):Es(e)?Sa(e)||_m(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Nm(t,e,r,i))?wm(t,e,r,o,s,u,a):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),mm(t,e,r,i))};function Nm(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&Pl.test(e)&&X(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||Pl.test(e)&&Rt(n)?!1:e in t}const xm={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};wv.props;const Ll=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Q(e)?n=>Ro(e,n):e};function Dm(t){t.target.composing=!0}function Ml(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Fl={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t._assign=Ll(i);const o=r||i.props&&i.props.type==="number";mr(t,e?"change":"input",s=>{if(s.target.composing)return;let u=t.value;n&&(u=u.trim()),o&&(u=$o(u)),t._assign(u)}),n&&mr(t,"change",()=>{t.value=t.value.trim()}),e||(mr(t,"compositionstart",Dm),mr(t,"compositionend",Ml),mr(t,"change",Ml))},mounted(t,{value:e}){t.value=e==null?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},o){if(t._assign=Ll(o),t.composing||document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===e||(i||t.type==="number")&&$o(t.value)===e))return;const s=e==null?"":e;t.value!==s&&(t.value=s)}},Om=["ctrl","shift","alt","meta"],Rm={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Om.some(n=>t[`${n}Key`]&&!e.includes(n))},Ul=(t,e)=>(n,...r)=>{for(let i=0;i<e.length;i++){const o=Rm[e[i]];if(o&&o(n,e))return}return t(n,...r)},km=Qt({patchProp:Cm},pm);let Vl;function Pm(){return Vl||(Vl=$v(km))}const Lm=(...t)=>{const e=Pm().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=Mm(r);if(!i)return;const o=e._component;!X(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const s=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},e};function Mm(t){return Rt(t)?document.querySelector(t):t}var Wu=function(t,e){return Wu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Wu(t,e)};function $(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Wu(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ni=function(){return Ni=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Ni.apply(this,arguments)};function I(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function u(l){try{c(r.next(l))}catch(f){s(f)}}function a(l){try{c(r.throw(l))}catch(f){s(f)}}function c(l){l.done?o(l.value):i(l.value).then(u,a)}c((r=r.apply(t,e||[])).next())})}function E(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(c){return function(l){return a([c,l])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(l){c=[6,l],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function bu(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Eo(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function It(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cd=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Fm=function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){var o=t[n++],s=t[n++],u=t[n++],a=((i&7)<<18|(o&63)<<12|(s&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{var o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Um={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,u=s?t[i+1]:0,a=i+2<t.length,c=a?t[i+2]:0,l=o>>2,f=(o&3)<<4|u>>4,h=(u&15)<<2|c>>6,d=c&63;a||(d=64,s||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cd(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Fm(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length,u=s?n[t.charAt(i)]:0;++i;var a=i<t.length,c=a?n[t.charAt(i)]:64;++i;var l=i<t.length,f=l?n[t.charAt(i)]:64;if(++i,o==null||u==null||c==null||f==null)throw Error();var h=o<<2|u>>4;if(r.push(h),c!==64){var d=u<<4&240|c>>2;if(r.push(d),f!==64){var g=c<<6&192|f;r.push(g)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Vm=function(t){var e=cd(t);return Um.encodeByteArray(e,!0)},jl=function(t){return Vm(t).replace(/\./g,"")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(t){return xi(void 0,t)}function xi(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:var n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(var r in e)!e.hasOwnProperty(r)||!Bm(r)||(t[r]=xi(t[r],e[r]));return t}function Bm(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qm=function(){function t(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(n,r){e.resolve=n,e.reject=r})}return t.prototype.wrapCallback=function(e){var n=this;return function(r,i){r?n.reject(r):n.resolve(i),typeof e=="function"&&(n.promise.catch(function(){}),e.length===1?e(r):e(r,i))}},t}();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=Ni({iss:"https://securetoken.google.com/"+r,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t),u="";return[jl(JSON.stringify(n)),jl(JSON.stringify(s)),u].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $m(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zn())}function ld(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zm(){return typeof self=="object"&&self.self===self}function Hm(){var t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Gm(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Wm(){return Zn().indexOf("Electron/")>=0}function Qm(){var t=Zn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Ym(){return Zn().indexOf("MSAppHost/")>=0}function Xm(){return!ld()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jm="FirebaseError",Zm=function(t){$(e,t);function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name=Jm,Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,qa.prototype.create),o}return e}(Error),qa=function(){function t(e,n,r){this.service=e,this.serviceName=n,this.errors=r}return t.prototype.create=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=n[0]||{},o=this.service+"/"+e,s=this.errors[e],u=s?t0(s,i):"Error",a=this.serviceName+": "+u+" ("+o+").",c=new Zm(o,a,i);return c},t}();function t0(t,e){return t.replace(e0,function(n,r){var i=e[r];return i!=null?String(i):"<"+r+"?>"})}var e0=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function n0(t,e){var n=new r0(t,e);return n.subscribe.bind(n)}var r0=function(){function t(e,n){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){e(r)}).catch(function(i){r.error(i)})}return t.prototype.next=function(e){this.forEachObserver(function(n){n.next(e)})},t.prototype.error=function(e){this.forEachObserver(function(n){n.error(e)}),this.close(e)},t.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},t.prototype.subscribe=function(e,n,r){var i=this,o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");i0(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=_u),o.error===void 0&&(o.error=_u),o.complete===void 0&&(o.complete=_u);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?o.error(i.finalError):o.complete()}catch{}}),this.observers.push(o),s},t.prototype.unsubscribeOne=function(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))},t.prototype.forEachObserver=function(e){if(!this.finalized)for(var n=0;n<this.observers.length;n++)this.sendOne(n,e)},t.prototype.sendOne=function(e,n){var r=this;this.task.then(function(){if(r.observers!==void 0&&r.observers[e]!==void 0)try{n(r.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})},t.prototype.close=function(e){var n=this;this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(function(){n.observers=void 0,n.onNoObservers=void 0}))},t}();function i0(t,e){if(typeof t!="object"||t===null)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&typeof t[i]=="function")return!0}return!1}function _u(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(t){return t&&t._delegate?t._delegate:t}var Ps=function(){function t(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},t.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},t.prototype.setServiceProps=function(e){return this.serviceProps=e,this},t.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},t}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Un="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var o0=function(){function t(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(e){var n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){var r=new qm;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise},t.prototype.getImmediate=function(e){var n,r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error("Service "+this.name+" is not available")}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(e){var n,r;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,!!this.shouldAutoInitialize()){if(u0(e))try{this.getOrInitializeService({instanceIdentifier:Un})}catch{}try{for(var i=bu(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=Eo(o.value,2),u=s[0],a=s[1],c=this.normalizeInstanceIdentifier(u);try{var l=this.getOrInitializeService({instanceIdentifier:c});a.resolve(l)}catch{}}}catch(f){n={error:f}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}},t.prototype.clearInstance=function(e){e===void 0&&(e=Un),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},t.prototype.delete=function(){return I(this,void 0,void 0,function(){var e;return E(this,function(n){switch(n.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(It(It([],Eo(e.filter(function(r){return"INTERNAL"in r}).map(function(r){return r.INTERNAL.delete()}))),Eo(e.filter(function(r){return"_delete"in r}).map(function(r){return r._delete()}))))];case 1:return n.sent(),[2]}})})},t.prototype.isComponentSet=function(){return this.component!=null},t.prototype.isInitialized=function(e){return e===void 0&&(e=Un),this.instances.has(e)},t.prototype.getOptions=function(e){return e===void 0&&(e=Un),this.instancesOptions.get(e)||{}},t.prototype.initialize=function(e){var n,r;e===void 0&&(e={});var i=e.options,o=i===void 0?{}:i,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var u=this.getOrInitializeService({instanceIdentifier:s,options:o});try{for(var a=bu(this.instancesDeferred.entries()),c=a.next();!c.done;c=a.next()){var l=Eo(c.value,2),f=l[0],h=l[1],d=this.normalizeInstanceIdentifier(f);s===d&&h.resolve(u)}}catch(g){n={error:g}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return u},t.prototype.onInit=function(e,n){var r,i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);var s=this.instances.get(i);return s&&e(s,i),function(){o.delete(e)}},t.prototype.invokeOnInitCallbacks=function(e,n){var r,i,o=this.onInitCallbacks.get(n);if(!!o)try{for(var s=bu(o),u=s.next();!u.done;u=s.next()){var a=u.value;try{a(e,n)}catch{}}}catch(c){r={error:c}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},t.prototype.getOrInitializeService=function(e){var n=e.instanceIdentifier,r=e.options,i=r===void 0?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:s0(n),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch{}return o||null},t.prototype.normalizeInstanceIdentifier=function(e){return e===void 0&&(e=Un),this.component?this.component.multipleInstances?e:Un:e},t.prototype.shouldAutoInitialize=function(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"},t}();function s0(t){return t===Un?void 0:t}function u0(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var a0=function(){function t(e){this.name=e,this.providers=new Map}return t.prototype.addComponent=function(e){var n=this.getProvider(e.name);if(n.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);n.setComponent(e)},t.prototype.addOrOverwriteComponent=function(e){var n=this.getProvider(e.name);n.isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},t.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var n=new o0(e,this);return this.providers.set(e,n),n},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Ce(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ln,Ka=[],it;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(it||(it={}));var fd={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},c0=it.INFO,l0=(Ln={},Ln[it.DEBUG]="log",Ln[it.VERBOSE]="log",Ln[it.INFO]="info",Ln[it.WARN]="warn",Ln[it.ERROR]="error",Ln),f0=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=new Date().toISOString(),o=l0[e];if(o)console[o].apply(console,Ce(["["+i+"]  "+t.name+":"],n));else throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}},hd=function(){function t(e){this.name=e,this._logLevel=c0,this._logHandler=f0,this._userLogHandler=null,Ka.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in it))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(e){this._logLevel=typeof e=="string"?fd[e]:e},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Ce([this,it.DEBUG],e)),this._logHandler.apply(this,Ce([this,it.DEBUG],e))},t.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Ce([this,it.VERBOSE],e)),this._logHandler.apply(this,Ce([this,it.VERBOSE],e))},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Ce([this,it.INFO],e)),this._logHandler.apply(this,Ce([this,it.INFO],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Ce([this,it.WARN],e)),this._logHandler.apply(this,Ce([this,it.WARN],e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Ce([this,it.ERROR],e)),this._logHandler.apply(this,Ce([this,it.ERROR],e))},t}();function h0(t){Ka.forEach(function(e){e.setLogLevel(t)})}function d0(t,e){for(var n=function(s){var u=null;e&&e.level&&(u=fd[e.level]),t===null?s.userLogHandler=null:s.userLogHandler=function(a,c){for(var l=[],f=2;f<arguments.length;f++)l[f-2]=arguments[f];var h=l.map(function(d){if(d==null)return null;if(typeof d=="string")return d;if(typeof d=="number"||typeof d=="boolean")return d.toString();if(d instanceof Error)return d.message;try{return JSON.stringify(d)}catch{return null}}).filter(function(d){return d}).join(" ");c>=(u!=null?u:a.logLevel)&&t({level:it[c].toLowerCase(),message:h,args:l,type:a.name})}},r=0,i=Ka;r<i.length;r++){var o=i[r];n(o)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cn,p0=(cn={},cn["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",cn["bad-app-name"]="Illegal App name: '{$appName}",cn["duplicate-app"]="Firebase App named '{$appName}' already exists",cn["app-deleted"]="Firebase App named '{$appName}' already deleted",cn["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",cn["invalid-log-argument"]="First argument to `onLog` must be null or a function.",cn),wr=new qa("app","Firebase",p0),dd="@firebase/app",g0="0.6.30",y0="@firebase/analytics",v0="@firebase/app-check",m0="@firebase/auth",w0="@firebase/database",b0="@firebase/functions",_0="@firebase/installations",E0="@firebase/messaging",I0="@firebase/performance",T0="@firebase/remote-config",S0="@firebase/storage",A0="@firebase/firestore",C0="firebase-wrapper";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,Wo="[DEFAULT]",N0=(qt={},qt[dd]="fire-core",qt[y0]="fire-analytics",qt[v0]="fire-app-check",qt[m0]="fire-auth",qt[w0]="fire-rtdb",qt[b0]="fire-fn",qt[_0]="fire-iid",qt[E0]="fire-fcm",qt[I0]="fire-perf",qt[T0]="fire-rc",qt[S0]="fire-gcs",qt[A0]="fire-fst",qt["fire-js"]="fire-js",qt[C0]="fire-js-all",qt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rr=new hd("@firebase/app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mo=function(){function t(e,n,r){var i=this;this.firebase_=r,this.isDeleted_=!1,this.name_=n.name,this.automaticDataCollectionEnabled_=n.automaticDataCollectionEnabled||!1,this.options_=jm(e),this.container=new a0(n.name),this._addComponent(new Ps("app",function(){return i},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(o){return i._addComponent(o)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var e=this;return new Promise(function(n){e.checkDestroyed_(),n()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(n){return n.delete()}))}).then(function(){e.isDeleted_=!0})},t.prototype._getService=function(e,n){var r;n===void 0&&(n=Wo),this.checkDestroyed_();var i=this.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})},t.prototype._removeServiceInstance=function(e,n){n===void 0&&(n=Wo),this.container.getProvider(e).clearInstance(n)},t.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(n){Rr.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,n)}},t.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw wr.create("app-deleted",{appName:this.name_})},t}();Mo.prototype.name&&Mo.prototype.options||Mo.prototype.delete||console.log("dc");var x0="8.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(t){var e={},n=new Map,r={__esModule:!0,initializeApp:s,app:o,registerVersion:c,setLogLevel:h0,onLog:l,apps:null,SDK_VERSION:x0,INTERNAL:{registerComponent:a,removeApp:i,components:n,useAsService:f}};r.default=r,Object.defineProperty(r,"apps",{get:u});function i(h){delete e[h]}function o(h){if(h=h||Wo,!Bl(e,h))throw wr.create("no-app",{appName:h});return e[h]}o.App=t;function s(h,d){if(d===void 0&&(d={}),typeof d!="object"||d===null){var g=d;d={name:g}}var y=d;y.name===void 0&&(y.name=Wo);var w=y.name;if(typeof w!="string"||!w)throw wr.create("bad-app-name",{appName:String(w)});if(Bl(e,w))throw wr.create("duplicate-app",{appName:w});var _=new t(h,y,r);return e[w]=_,_}function u(){return Object.keys(e).map(function(h){return e[h]})}function a(h){var d=h.name;if(n.has(d))return Rr.debug("There were multiple attempts to register component "+d+"."),h.type==="PUBLIC"?r[d]:null;if(n.set(d,h),h.type==="PUBLIC"){var g=function(P){if(P===void 0&&(P=o()),typeof P[d]!="function")throw wr.create("invalid-app-argument",{appName:d});return P[d]()};h.serviceProps!==void 0&&xi(g,h.serviceProps),r[d]=g,t.prototype[d]=function(){for(var P=[],T=0;T<arguments.length;T++)P[T]=arguments[T];var U=this._getService.bind(this,d);return U.apply(this,h.multipleInstances?P:[])}}for(var y=0,w=Object.keys(e);y<w.length;y++){var _=w[y];e[_]._addComponent(h)}return h.type==="PUBLIC"?r[d]:null}function c(h,d,g){var y,w=(y=N0[h])!==null&&y!==void 0?y:h;g&&(w+="-"+g);var _=w.match(/\s|\//),P=d.match(/\s|\//);if(_||P){var T=['Unable to register library "'+w+'" with version "'+d+'":'];_&&T.push('library name "'+w+'" contains illegal characters (whitespace or "/")'),_&&P&&T.push("and"),P&&T.push('version name "'+d+'" contains illegal characters (whitespace or "/")'),Rr.warn(T.join(" "));return}a(new Ps(w+"-version",function(){return{library:w,version:d}},"VERSION"))}function l(h,d){if(h!==null&&typeof h!="function")throw wr.create("invalid-log-argument");d0(h,d)}function f(h,d){if(d==="serverAuth")return null;var g=d;return g}return r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(){var t=D0(Mo);t.INTERNAL=Ni(Ni({},t.INTERNAL),{createFirebaseNamespace:pd,extendNamespace:e,createSubscribe:n0,ErrorFactory:qa,deepExtend:xi});function e(n){xi(t,n)}return t}var $a=pd();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var O0=function(){function t(e){this.container=e}return t.prototype.getPlatformInfoString=function(){var e=this.container.getProviders();return e.map(function(n){if(R0(n)){var r=n.getImmediate();return r.library+"/"+r.version}else return null}).filter(function(n){return n}).join(" ")},t}();function R0(t){var e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(t,e){t.INTERNAL.registerComponent(new Ps("platform-logger",function(n){return new O0(n)},"PRIVATE")),t.registerVersion(dd,g0,e),t.registerVersion("fire-js","")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(zm()&&self.firebase!==void 0){Rr.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);var ql=self.firebase.SDK_VERSION;ql&&ql.indexOf("LITE")>=0&&Rr.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}var P0=$a.initializeApp;$a.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ld()&&Rr.warn(`
      Warning: This is a browser-targeted Firebase bundle but it appears it is being
      run in a Node environment.  If running in a Node environment, make sure you
      are using the bundle specified by the "main" field in package.json.
      
      If you are using Webpack, you can specify "main" as the first item in
      "resolve.mainFields":
      https://webpack.js.org/configuration/resolve/#resolvemainfields
      
      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"
      as the first item in "mainFields", e.g. ['main', 'module'].
      https://github.com/rollup/@rollup/plugin-node-resolve
      `),P0.apply(void 0,t)};var Zr=$a;k0(Zr);var L0="firebase",gd="8.10.1";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zr.registerVersion(L0,gd,"app");Zr.SDK_VERSION=gd;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Qu=function(t,e){return Qu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Qu(t,e)};function M0(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Qu(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function yd(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var F0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},F,za=za||{},G=F0||self;function Qo(){}function Yu(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Hi(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function U0(t){return Object.prototype.hasOwnProperty.call(t,Eu)&&t[Eu]||(t[Eu]=++V0)}var Eu="closure_uid_"+(1e9*Math.random()>>>0),V0=0;function j0(t,e,n){return t.call.apply(t.bind,arguments)}function B0(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Ut(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ut=j0:Ut=B0,Ut.apply(null,arguments)}function Io(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function jt(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(r,i,o){for(var s=Array(arguments.length-2),u=2;u<arguments.length;u++)s[u-2]=arguments[u];return e.prototype[i].apply(r,s)}}function An(){this.s=this.s,this.o=this.o}var q0=0;An.prototype.s=!1;An.prototype.na=function(){!this.s&&(this.s=!0,this.M(),q0!=0)&&U0(this)};An.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var vd=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},md=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=typeof t=="string"?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function K0(t){t:{for(var e=Pw,n=t.length,r=typeof t=="string"?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function Kl(t){return Array.prototype.concat.apply([],arguments)}function Ha(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Yo(t){return/^[\s\xa0]*$/.test(t)}var $l=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ee(t,e){return t.indexOf(e)!=-1}function Iu(t,e){return t<e?-1:t>e?1:0}var ne;t:{var zl=G.navigator;if(zl){var Hl=zl.userAgent;if(Hl){ne=Hl;break t}}ne=""}function Ga(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function wd(t){var e={};for(var n in t)e[n]=t[n];return e}var Gl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bd(t,e){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(var o=0;o<Gl.length;o++)n=Gl[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Wa(t){return Wa[" "](t),t}Wa[" "]=Qo;function $0(t){var e=G0;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var z0=ee(ne,"Opera"),kr=ee(ne,"Trident")||ee(ne,"MSIE"),_d=ee(ne,"Edge"),Xu=_d||kr,Ed=ee(ne,"Gecko")&&!(ee(ne.toLowerCase(),"webkit")&&!ee(ne,"Edge"))&&!(ee(ne,"Trident")||ee(ne,"MSIE"))&&!ee(ne,"Edge"),H0=ee(ne.toLowerCase(),"webkit")&&!ee(ne,"Edge");function Id(){var t=G.document;return t?t.documentMode:void 0}var Xo;t:{var Tu="",Su=function(){var t=ne;if(Ed)return/rv:([^\);]+)(\)|;)/.exec(t);if(_d)return/Edge\/([\d\.]+)/.exec(t);if(kr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(H0)return/WebKit\/(\S+)/.exec(t);if(z0)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Su&&(Tu=Su?Su[1]:""),kr){var Au=Id();if(Au!=null&&Au>parseFloat(Tu)){Xo=String(Au);break t}}Xo=Tu}var G0={};function W0(){return $0(function(){for(var t=0,e=$l(String(Xo)).split("."),n=$l("9").split("."),r=Math.max(e.length,n.length),i=0;t==0&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o[0].length==0&&s[0].length==0)break;t=Iu(o[1].length==0?0:parseInt(o[1],10),s[1].length==0?0:parseInt(s[1],10))||Iu(o[2].length==0,s[2].length==0)||Iu(o[2],s[2]),o=o[3],s=s[3]}while(t==0)}return 0<=t})}var Ju;if(G.document&&kr){var Wl=Id();Ju=Wl||parseInt(Xo,10)||void 0}else Ju=void 0;var Q0=Ju,Y0=function(){if(!G.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{G.addEventListener("test",Qo,e),G.removeEventListener("test",Qo,e)}catch{}return t}();function Wt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Wt.prototype.h=function(){this.defaultPrevented=!0};function Di(t,e){if(Wt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Ed){t:{try{Wa(e.nodeName);var i=!0;break t}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:X0[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Di.Z.h.call(this)}}jt(Di,Wt);var X0={2:"touch",3:"pen",4:"mouse"};Di.prototype.h=function(){Di.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Gi="closure_listenable_"+(1e6*Math.random()|0),J0=0;function Z0(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++J0,this.ca=this.fa=!1}function Ls(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Ms(t){this.src=t,this.g={},this.h=0}Ms.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=ta(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):(e=new Z0(e,this.src,o,!!r,i),e.fa=n,t.push(e)),e};function Zu(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=vd(r,e),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(Ls(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function ta(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}var Qa="closure_lm_"+(1e6*Math.random()|0),Cu={};function Td(t,e,n,r,i){if(r&&r.once)return Ad(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Td(t,e[o],n,r,i);return null}return n=Ja(n),t&&t[Gi]?t.N(e,n,Hi(r)?!!r.capture:!!r,i):Sd(t,e,n,!1,r,i)}function Sd(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Hi(i)?!!i.capture:!!i,u=Xa(t);if(u||(t[Qa]=u=new Ms(t)),n=u.add(e,n,r,s,o),n.proxy)return n;if(r=tw(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Y0||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Nd(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function tw(){function t(n){return e.call(t.src,t.listener,n)}var e=ew;return t}function Ad(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ad(t,e[o],n,r,i);return null}return n=Ja(n),t&&t[Gi]?t.O(e,n,Hi(r)?!!r.capture:!!r,i):Sd(t,e,n,!0,r,i)}function Cd(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Cd(t,e[o],n,r,i);else r=Hi(r)?!!r.capture:!!r,n=Ja(n),t&&t[Gi]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=ta(o,n,r,i),-1<n&&(Ls(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=Xa(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ta(e,n,r,i)),(n=-1<t?e[t]:null)&&Ya(n))}function Ya(t){if(typeof t!="number"&&t&&!t.ca){var e=t.src;if(e&&e[Gi])Zu(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Nd(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Xa(e))?(Zu(n,t),n.h==0&&(n.src=null,e[Qa]=null)):Ls(t)}}}function Nd(t){return t in Cu?Cu[t]:Cu[t]="on"+t}function ew(t,e){if(t.ca)t=!0;else{e=new Di(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Ya(t),t=n.call(r,e)}return t}function Xa(t){return t=t[Qa],t instanceof Ms?t:null}var Nu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ja(t){return typeof t=="function"?t:(t[Nu]||(t[Nu]=function(e){return t.handleEvent(e)}),t[Nu])}function Pt(){An.call(this),this.i=new Ms(this),this.P=this,this.I=null}jt(Pt,An);Pt.prototype[Gi]=!0;Pt.prototype.removeEventListener=function(t,e,n,r){Cd(this,t,e,n,r)};function Vt(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new Wt(e,t);else if(e instanceof Wt)e.target=e.target||t;else{var i=e;e=new Wt(r,t),bd(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=To(s,r,!0,e)&&i}if(s=e.g=t,i=To(s,r,!0,e)&&i,i=To(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.g=n[o],i=To(s,r,!1,e)&&i}Pt.prototype.M=function(){if(Pt.Z.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ls(n[r]);delete t.g[e],t.h--}}this.I=null};Pt.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Pt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function To(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var u=s.listener,a=s.ia||s.src;s.fa&&Zu(t.i,s),i=u.call(a,r)!==!1&&i}}return i&&!r.defaultPrevented}var Za=G.JSON.stringify;function nw(){var t=Dd,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var rw=function(){function t(){this.h=this.g=null}return t.prototype.add=function(e,n){var r=xd.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r},t}(),xd=new(function(){function t(e,n){this.i=e,this.j=n,this.h=0,this.g=null}return t.prototype.get=function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e},t}())(function(){return new iw},function(t){return t.reset()}),iw=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(e,n){this.h=e,this.g=n,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function ow(t){G.setTimeout(function(){throw t},0)}function tc(t,e){ea||sw(),na||(ea(),na=!0),Dd.add(t,e)}var ea;function sw(){var t=G.Promise.resolve(void 0);ea=function(){t.then(uw)}}var na=!1,Dd=new rw;function uw(){for(var t;t=nw();){try{t.h.call(t.g)}catch(n){ow(n)}var e=xd;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}na=!1}function Fs(t,e){Pt.call(this),this.h=t||1,this.g=e||G,this.j=Ut(this.kb,this),this.l=Date.now()}jt(Fs,Pt);F=Fs.prototype;F.da=!1;F.S=null;F.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Vt(this,"tick"),this.da&&(ec(this),this.start()))}};F.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function ec(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}F.M=function(){Fs.Z.M.call(this),ec(this),delete this.g};function nc(t,e,n){if(typeof t=="function")n&&(t=Ut(t,n));else if(t&&typeof t.handleEvent=="function")t=Ut(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:G.setTimeout(t,e||0)}function Od(t){t.g=nc(function(){t.g=null,t.i&&(t.i=!1,Od(t))},t.j);var e=t.h;t.h=null,t.m.apply(null,e)}var aw=function(t){M0(e,t);function e(n,r){var i=t.call(this)||this;return i.m=n,i.j=r,i.h=null,i.i=!1,i.g=null,i}return e.prototype.l=function(n){this.h=arguments,this.g?this.i=!0:Od(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(G.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(An);function Oi(t){An.call(this),this.h=t,this.g={}}jt(Oi,An);var Ql=[];function Rd(t,e,n,r){Array.isArray(n)||(n&&(Ql[0]=n.toString()),n=Ql);for(var i=0;i<n.length;i++){var o=Td(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function kd(t){Ga(t.g,function(e,n){this.g.hasOwnProperty(n)&&Ya(e)},t),t.g={}}Oi.prototype.M=function(){Oi.Z.M.call(this),kd(this)};Oi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Us(){this.g=!0}Us.prototype.Aa=function(){this.g=!1};function cw(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",u=o.split("&"),a=0;a<u.length;a++){var c=u[a].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");s=2<=f.length&&f[1]=="type"?s+(l+"="+c+"&"):s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+s})}function lw(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+o+" "+s})}function Er(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+hw(t,n)+(r?" "+r:"")})}function fw(t,e){t.info(function(){return"TIMEOUT: "+e})}Us.prototype.info=function(){};function hw(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return Za(n)}catch{return e}}var sr={},Yl=null;function Vs(){return Yl=Yl||new Pt}sr.Ma="serverreachability";function Pd(t){Wt.call(this,sr.Ma,t)}jt(Pd,Wt);function Ri(t){var e=Vs();Vt(e,new Pd(e))}sr.STAT_EVENT="statevent";function Ld(t,e){Wt.call(this,sr.STAT_EVENT,t),this.stat=e}jt(Ld,Wt);function re(t){var e=Vs();Vt(e,new Ld(e,t))}sr.Na="timingevent";function Md(t,e){Wt.call(this,sr.Na,t),this.size=e}jt(Md,Wt);function Wi(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return G.setTimeout(function(){t()},e)}var js={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Fd={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function rc(){}rc.prototype.h=null;function Xl(t){return t.h||(t.h=t.i())}function Ud(){}var Qi={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ic(){Wt.call(this,"d")}jt(ic,Wt);function oc(){Wt.call(this,"c")}jt(oc,Wt);var ra;function Bs(){}jt(Bs,rc);Bs.prototype.g=function(){return new XMLHttpRequest};Bs.prototype.i=function(){return{}};ra=new Bs;function Yi(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Oi(this),this.P=dw,t=Xu?125:void 0,this.W=new Fs(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Vd}function Vd(){this.i=null,this.g="",this.h=!1}var dw=45e3,ia={},Jo={};F=Yi.prototype;F.setTimeout=function(t){this.P=t};function oa(t,e,n){t.K=1,t.v=Ks(on(e)),t.s=n,t.U=!0,jd(t,null)}function jd(t,e){t.F=Date.now(),Xi(t),t.A=on(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Gd(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Vd,t.g=dp(t.l,n?e:null,!t.s),0<t.O&&(t.L=new aw(Ut(t.Ia,t,t.g),t.O)),Rd(t.V,t.g,"readystatechange",t.gb),e=t.H?wd(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Ri(),cw(t.j,t.u,t.A,t.m,t.X,t.s)}F.gb=function(t){t=t.target;var e=this.L;e&&Xe(t)==3?e.l():this.Ia(t)};F.Ia=function(t){try{if(t==this.g)t:{var e=Xe(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(e!=3||Xu||this.g&&(this.h.h||this.g.ga()||ef(this.g)))){this.I||e!=4||n==7||(n==8||0>=r?Ri(3):Ri(2)),qs(this);var i=this.g.ba();this.N=i;e:if(Bd(this)){var o=ef(this.g);t="";var s=o.length,u=Xe(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$n(this),vi(this);var a="";break e}this.h.i=new G.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:u&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.ga();if(this.i=i==200,lw(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yo(c)){var f=c;break e}}f=null}if(i=f)Er(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,sa(this,i);else{this.i=!1,this.o=3,re(12),$n(this),vi(this);break t}}this.U?(qd(this,e,a),Xu&&this.i&&e==3&&(Rd(this.V,this.W,"tick",this.fb),this.W.start())):(Er(this.j,this.m,a,null),sa(this,a)),e==4&&$n(this),this.i&&!this.I&&(e==4?cp(this.l,this):(this.i=!1,Xi(this)))}else i==400&&0<a.indexOf("Unknown SID")?(this.o=3,re(12)):(this.o=0,re(13)),$n(this),vi(this)}}}catch{}finally{}};function Bd(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Ba:!1}function qd(t,e,n){for(var r=!0,i;!t.I&&t.C<n.length;)if(i=pw(t,n),i==Jo){e==4&&(t.o=4,re(14),r=!1),Er(t.j,t.m,null,"[Incomplete Response]");break}else if(i==ia){t.o=4,re(15),Er(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Er(t.j,t.m,i,null),sa(t,i);Bd(t)&&i!=Jo&&i!=ia&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,re(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),pc(e),e.L=!0,re(11))):(Er(t.j,t.m,n,"[Invalid Chunked Response]"),$n(t),vi(t))}F.fb=function(){if(this.g){var t=Xe(this.g),e=this.g.ga();this.C<e.length&&(qs(this),qd(this,t,e),this.i&&t!=4&&Xi(this))}};function pw(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Jo:(n=Number(e.substring(n,r)),isNaN(n)?ia:(r+=1,r+n>e.length?Jo:(e=e.substr(r,n),t.C=r+n,e)))}F.cancel=function(){this.I=!0,$n(this)};function Xi(t){t.Y=Date.now()+t.P,Kd(t,t.P)}function Kd(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Wi(Ut(t.eb,t),e)}function qs(t){t.B&&(G.clearTimeout(t.B),t.B=null)}F.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(fw(this.j,this.A),this.K!=2&&(Ri(),re(17)),$n(this),this.o=2,vi(this)):Kd(this,this.Y-t)};function vi(t){t.l.G==0||t.I||cp(t.l,t)}function $n(t){qs(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,ec(t.W),kd(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function sa(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||ua(n.i,t))){if(n.I=t.N,!t.J&&ua(n.i,t)&&n.G==3){try{var r=n.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){t:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)ns(n),Hs(n);else break t;dc(n),re(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&n.A==0&&!n.v&&(n.v=Wi(Ut(n.ab,n),6e3));if(1>=Yd(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else zn(n,11)}else if((t.J||n.g==t)&&ns(n),!Yo(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],n.G==2)if(o[0]=="c"){n.J=o[1],n.la=o[2];var s=o[3];s!=null&&(n.ma=s,n.h.info("VER="+n.ma));var u=o[4];u!=null&&(n.za=u,n.h.info("SVER="+n.za));var a=o[5];a!=null&&typeof a=="number"&&0<a&&(r=1.5*a,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(ee(l,"spdy")||ee(l,"quic")||ee(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(ac(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,mt(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var d=t;if(r.oa=hp(r,r.H?r.la:null,r.W),d.J){Xd(r.i,d);var g=d,y=r.K;y&&g.setTimeout(y),g.B&&(qs(g),Xi(g)),r.g=d}else up(r);0<n.l.length&&Gs(n)}else o[0]!="stop"&&o[0]!="close"||zn(n,7);else n.G==3&&(o[0]=="stop"||o[0]=="close"?o[0]=="stop"?zn(n,7):hc(n):o[0]!="noop"&&n.j&&n.j.wa(o),n.A=0)}}Ri(4)}catch{}}function gw(t){if(t.R&&typeof t.R=="function")return t.R();if(typeof t=="string")return t.split("");if(Yu(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function sc(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Yu(t)||typeof t=="string")md(t,e,void 0);else{if(t.T&&typeof t.T=="function")var n=t.T();else if(t.R&&typeof t.R=="function")n=void 0;else if(Yu(t)||typeof t=="string"){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=gw(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function ti(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ti)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}F=ti.prototype;F.R=function(){uc(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t};F.T=function(){return uc(this),this.g.concat()};function uc(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];tr(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)r=t.g[e],tr(i,r)||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}F.get=function(t,e){return tr(this.h,t)?this.h[t]:e};F.set=function(t,e){tr(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e};F.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};function tr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var $d=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function yw(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function er(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof er){this.g=e!==void 0?e:t.g,Zo(this,t.j),this.s=t.s,ts(this,t.i),es(this,t.m),this.l=t.l,e=t.h;var n=new ki;n.i=e.i,e.g&&(n.g=new ti(e.g),n.h=e.h),Jl(this,n),this.o=t.o}else t&&(n=String(t).match($d))?(this.g=!!e,Zo(this,n[1]||"",!0),this.s=mi(n[2]||""),ts(this,n[3]||"",!0),es(this,n[4]),this.l=mi(n[5]||"",!0),Jl(this,n[6]||"",!0),this.o=mi(n[7]||"")):(this.g=!!e,this.h=new ki(null,this.g))}er.prototype.toString=function(){var t=[],e=this.j;e&&t.push(di(e,Zl,!0),":");var n=this.i;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(di(e,Zl,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&t.push("/"),t.push(di(n,n.charAt(0)=="/"?_w:bw,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",di(n,Iw)),t.join("")};function on(t){return new er(t)}function Zo(t,e,n){t.j=n?mi(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ts(t,e,n){t.i=n?mi(e,!0):e}function es(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Jl(t,e,n){e instanceof ki?(t.h=e,Tw(t.h,t.g)):(n||(e=di(e,Ew)),t.h=new ki(e,t.g))}function mt(t,e,n){t.h.set(e,n)}function Ks(t){return mt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function vw(t){return t instanceof er?on(t):new er(t,void 0)}function mw(t,e,n,r){var i=new er(null,void 0);return t&&Zo(i,t),e&&ts(i,e),n&&es(i,n),r&&(i.l=r),i}function mi(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function di(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,ww),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ww(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Zl=/[#\/\?@]/g,bw=/[#\?:]/g,_w=/[#\?]/g,Ew=/[#\?@]/g,Iw=/#/g;function ki(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Cn(t){t.g||(t.g=new ti,t.h=0,t.i&&yw(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}F=ki.prototype;F.add=function(t,e){Cn(this),this.i=null,t=ei(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function zd(t,e){Cn(t),e=ei(t,e),tr(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,tr(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&uc(t)))}function Hd(t,e){return Cn(t),e=ei(t,e),tr(t.g.h,e)}F.forEach=function(t,e){Cn(this),this.g.forEach(function(n,r){md(n,function(i){t.call(e,i,r,this)},this)},this)};F.T=function(){Cn(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n};F.R=function(t){Cn(this);var e=[];if(typeof t=="string")Hd(this,t)&&(e=Kl(e,this.g.get(ei(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Kl(e,t[n])}return e};F.set=function(t,e){return Cn(this),this.i=null,t=ei(this,t),Hd(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};F.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e};function Gd(t,e,n){zd(t,e),0<n.length&&(t.i=null,t.g.set(ei(t,e),Ha(n)),t.h+=n.length)}F.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;r[o]!==""&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};function ei(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Tw(t,e){e&&!t.j&&(Cn(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(zd(this,r),Gd(this,i,n))},t)),t.j=e}var Sw=function(){function t(e,n){this.h=e,this.g=n}return t}();function Wd(t){this.l=t||Aw,G.PerformanceNavigationTiming?(t=G.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(G.g&&G.g.Ea&&G.g.Ea()&&G.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Aw=10;function Qd(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Yd(t){return t.h?1:t.g?t.g.size:0}function ua(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function ac(t,e){t.g?t.g.add(e):t.h=e}function Xd(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Wd.prototype.cancel=function(){var t,e;if(this.i=Jd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){try{for(var n=yd(this.g.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(o){t={error:o}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}};function Jd(t){var e,n;if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){var r=t.i;try{for(var i=yd(t.g.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.D)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Ha(t.i)}function cc(){}cc.prototype.stringify=function(t){return G.JSON.stringify(t,void 0)};cc.prototype.parse=function(t){return G.JSON.parse(t,void 0)};function Cw(){this.g=new cc}function Nw(t,e,n){var r=n||"";try{sc(t,function(i,o){var s=i;Hi(i)&&(s=Za(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function xw(t,e){var n=new Us;if(G.Image){var r=new Image;r.onload=Io(So,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Io(So,n,r,"TestLoadImage: error",!1,e),r.onabort=Io(So,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Io(So,n,r,"TestLoadImage: timeout",!1,e),G.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function So(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ji(t){this.l=t.$b||null,this.j=t.ib||!1}jt(Ji,rc);Ji.prototype.g=function(){return new $s(this.l,this.j)};Ji.prototype.i=function(t){return function(){return t}}({});function $s(t,e){Pt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=lc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}jt($s,Pt);var lc=0;F=$s.prototype;F.open=function(t,e){if(this.readyState!=lc)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Pi(this)};F.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||G).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))};F.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zi(this)),this.readyState=lc};F.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Pi(this)),this.g&&(this.readyState=3,Pi(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof G.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Zd(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))};function Zd(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}F.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Zi(this):Pi(this),this.readyState==3&&Zd(this)}};F.Ua=function(t){this.g&&(this.response=this.responseText=t,Zi(this))};F.Ta=function(t){this.g&&(this.response=t,Zi(this))};F.ha=function(){this.g&&Zi(this)};function Zi(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Pi(t)}F.setRequestHeader=function(t,e){this.v.append(t,e)};F.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};F.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Pi(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty($s.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var Dw=G.JSON.parse;function xt(t){Pt.call(this),this.headers=new ti,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=tp,this.K=this.L=!1}jt(xt,Pt);var tp="",Ow=/^https?$/i,Rw=["POST","PUT"];F=xt.prototype;F.ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ra.g(),this.C=this.u?Xl(this.u):Xl(ra),this.g.onreadystatechange=Ut(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){tf(this,o);return}t=n||"";var i=new ti(this.headers);r&&sc(r,function(o,s){i.set(s,o)}),r=K0(i.T()),n=G.FormData&&t instanceof G.FormData,!(0<=vd(Rw,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(o,s){this.g.setRequestHeader(s,o)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{rp(this),0<this.B&&((this.K=kw(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ut(this.pa,this)):this.A=nc(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){tf(this,o)}};function kw(t){return kr&&W0()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function Pw(t){return t.toLowerCase()=="content-type"}F.pa=function(){typeof za<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Vt(this,"timeout"),this.abort(8))};function tf(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,ep(t),zs(t)}function ep(t){t.D||(t.D=!0,Vt(t,"complete"),Vt(t,"error"))}F.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Vt(this,"complete"),Vt(this,"abort"),zs(this))};F.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),zs(this,!0)),xt.Z.M.call(this)};F.Fa=function(){this.s||(this.F||this.v||this.l?np(this):this.cb())};F.cb=function(){np(this)};function np(t){if(t.h&&typeof za<"u"&&(!t.C[1]||Xe(t)!=4||t.ba()!=2)){if(t.v&&Xe(t)==4)nc(t.Fa,0,t);else if(Vt(t,"readystatechange"),Xe(t)==4){t.h=!1;try{var e=t.ba();t:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break t;default:n=!1}var r;if(!(r=n)){var i;if(i=e===0){var o=String(t.H).match($d)[1]||null;if(!o&&G.self&&G.self.location){var s=G.self.location.protocol;o=s.substr(0,s.length-1)}i=!Ow.test(o?o.toLowerCase():"")}r=i}if(r)Vt(t,"complete"),Vt(t,"success");else{t.m=6;try{var u=2<Xe(t)?t.g.statusText:""}catch{u=""}t.j=u+" ["+t.ba()+"]",ep(t)}}finally{zs(t)}}}}function zs(t,e){if(t.g){rp(t);var n=t.g,r=t.C[0]?Qo:null;t.g=null,t.C=null,e||Vt(t,"ready");try{n.onreadystatechange=r}catch{}}}function rp(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(G.clearTimeout(t.A),t.A=null)}function Xe(t){return t.g?t.g.readyState:0}F.ba=function(){try{return 2<Xe(this)?this.g.status:-1}catch{return-1}};F.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};F.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Dw(e)}};function ef(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case tp:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}F.Da=function(){return this.m};F.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function Lw(t){var e="";return Ga(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function fc(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=Lw(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):mt(t,e,n))}function li(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function ip(t){this.za=0,this.l=[],this.h=new Us,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=li("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=li("baseRetryDelayMs",5e3,t),this.$a=li("retryDelaySeedMs",1e4,t),this.Ya=li("forwardChannelMaxRetries",2,t),this.ra=li("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Wd(t&&t.concurrentRequestLimit),this.Ca=new Cw,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||t.Xb!==!1}F=ip.prototype;F.ma=8;F.G=1;function hc(t){if(op(t),t.G==3){var e=t.V++,n=on(t.F);mt(n,"SID",t.J),mt(n,"RID",e),mt(n,"TYPE","terminate"),to(t,n),e=new Yi(t,t.h,e,void 0),e.K=2,e.v=Ks(on(n)),n=!1,G.navigator&&G.navigator.sendBeacon&&(n=G.navigator.sendBeacon(e.v.toString(),"")),!n&&G.Image&&(new Image().src=e.v,n=!0),n||(e.g=dp(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Xi(e)}fp(t)}F.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}};function Hs(t){t.g&&(pc(t),t.g.cancel(),t.g=null)}function op(t){Hs(t),t.u&&(G.clearTimeout(t.u),t.u=null),ns(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&G.clearTimeout(t.m),t.m=null)}function xu(t,e){t.l.push(new Sw(t.Za++,e)),t.G==3&&Gs(t)}function Gs(t){Qd(t.i)||t.m||(t.m=!0,tc(t.Ha,t),t.C=0)}function Mw(t,e){return Yd(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.l=e.D.concat(t.l),!0):t.G==1||t.G==2||t.C>=(t.Xa?0:t.Ya)?!1:(t.m=Wi(Ut(t.Ha,t,e),lp(t,t.C)),t.C++,!0)}F.Ha=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new Yi(this,this.h,t,void 0),n=this.s;if(this.P&&(n?(n=wd(n),bd(n,this.P)):n=this.P),this.o===null&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){e:{var o=this.l[i];if("__data__"in o.g&&(o=o.g.__data__,typeof o=="string")){o=o.length;break e}o=void 0}if(o===void 0)break;if(r+=o,4096<r){r=i;break t}if(r===4096||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=sp(this,e,r),i=on(this.F),mt(i,"RID",t),mt(i,"CVER",22),this.D&&mt(i,"X-HTTP-Session-Id",this.D),to(this,i),this.o&&n&&fc(i,this.o,n),ac(this.i,e),this.Ra&&mt(i,"TYPE","init"),this.ja?(mt(i,"$req",r),mt(i,"SID","null"),e.$=!0,oa(e,i,null)):oa(e,i,r),this.G=2}}else this.G==3&&(t?nf(this,t):this.l.length==0||Qd(this.i)||nf(this))};function nf(t,e){var n;e?n=e.m:n=t.V++;var r=on(t.F);mt(r,"SID",t.J),mt(r,"RID",n),mt(r,"AID",t.U),to(t,r),t.o&&t.s&&fc(r,t.o,t.s),n=new Yi(t,t.h,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=sp(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),ac(t.i,n),oa(n,r,e)}function to(t,e){t.j&&sc({},function(n,r){mt(e,r,n)})}function sp(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Ut(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];o==-1?0<n?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var c=i[a].h,l=i[a].g;if(c-=o,0>c)o=Math.max(0,i[a].h-100),u=!1;else try{Nw(l,s,"req"+c+"_")}catch{r&&r(l)}}if(u){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function up(t){t.g||t.u||(t.Y=1,tc(t.Ga,t),t.A=0)}function dc(t){return t.g||t.u||3<=t.A?!1:(t.Y++,t.u=Wi(Ut(t.Ga,t),lp(t,t.A)),t.A++,!0)}F.Ga=function(){if(this.u=null,ap(this),this.$&&!(this.L||this.g==null||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Wi(Ut(this.bb,this),t)}};F.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,re(10),Hs(this),ap(this))};function pc(t){t.B!=null&&(G.clearTimeout(t.B),t.B=null)}function ap(t){t.g=new Yi(t,t.h,"rpc",t.Y),t.o===null&&(t.g.H=t.s),t.g.O=0;var e=on(t.oa);mt(e,"RID","rpc"),mt(e,"SID",t.J),mt(e,"CI",t.N?"0":"1"),mt(e,"AID",t.U),to(t,e),mt(e,"TYPE","xmlhttp"),t.o&&t.s&&fc(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Ks(on(e)),n.s=null,n.U=!0,jd(n,t)}F.ab=function(){this.v!=null&&(this.v=null,Hs(this),dc(this),re(19))};function ns(t){t.v!=null&&(G.clearTimeout(t.v),t.v=null)}function cp(t,e){var n=null;if(t.g==e){ns(t),pc(t),t.g=null;var r=2}else if(ua(t.i,e))n=e.D,Xd(t.i,e),r=1;else return;if(t.I=e.N,t.G!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;r=Vs(),Vt(r,new Md(r,n)),Gs(t)}else up(t);else if(i=e.o,i==3||i==0&&0<t.I||!(r==1&&Mw(t,e)||r==2&&dc(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:zn(t,5);break;case 4:zn(t,10);break;case 3:zn(t,6);break;default:zn(t,2)}}}function lp(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function zn(t,e){if(t.h.info("Error code "+e),e==2){var n=null;t.j&&(n=null);var r=Ut(t.jb,t);n||(n=new er("//www.google.com/images/cleardot.gif"),G.location&&G.location.protocol=="http"||Zo(n,"https"),Ks(n)),xw(n.toString(),r)}else re(2);t.G=0,t.j&&t.j.va(e),fp(t),op(t)}F.jb=function(t){t?(this.h.info("Successfully pinged google.com"),re(2)):(this.h.info("Failed to ping google.com"),re(1))};function fp(t){t.G=0,t.I=-1,t.j&&((Jd(t.i).length!=0||t.l.length!=0)&&(t.i.i.length=0,Ha(t.l),t.l.length=0),t.j.ua())}function hp(t,e,n){var r=vw(n);if(r.i!="")e&&ts(r,e+"."+r.i),es(r,r.m);else{var i=G.location;r=mw(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&Ga(t.aa,function(o,s){mt(r,s,o)}),e=t.D,n=t.sa,e&&n&&mt(r,e,n),mt(r,"VER",t.ma),to(t,r),r}function dp(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ba&&!t.qa?new xt(new Ji({ib:!0})):new xt(t.qa),e.L=t.H,e}function pp(){}F=pp.prototype;F.xa=function(){};F.wa=function(){};F.va=function(){};F.ua=function(){};F.Oa=function(){};function rs(){if(kr&&!(10<=Number(Q0)))throw Error("Environmental error: no available transport.")}rs.prototype.g=function(t,e){return new be(t,e)};function be(t,e){Pt.call(this),this.g=new ip(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Yo(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Yo(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ni(this)}jt(be,Pt);be.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),tc(Ut(t.hb,t,e))),re(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=hp(t,null,t.W),Gs(t)};be.prototype.close=function(){hc(this.g)};be.prototype.u=function(t){if(typeof t=="string"){var e={};e.__data__=t,xu(this.g,e)}else this.v?(e={},e.__data__=Za(t),xu(this.g,e)):xu(this.g,t)};be.prototype.M=function(){this.g.j=null,delete this.j,hc(this.g),delete this.g,be.Z.M.call(this)};function gp(t){ic.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}jt(gp,ic);function yp(){oc.call(this),this.status=1}jt(yp,oc);function ni(t){this.g=t}jt(ni,pp);ni.prototype.xa=function(){Vt(this.g,"a")};ni.prototype.wa=function(t){Vt(this.g,new gp(t))};ni.prototype.va=function(t){Vt(this.g,new yp)};ni.prototype.ua=function(){Vt(this.g,"b")};rs.prototype.createWebChannel=rs.prototype.g;be.prototype.send=be.prototype.u;be.prototype.open=be.prototype.m;be.prototype.close=be.prototype.close;js.NO_ERROR=0;js.TIMEOUT=8;js.HTTP_ERROR=6;Fd.COMPLETE="complete";Ud.EventType=Qi;Qi.OPEN="a";Qi.CLOSE="b";Qi.ERROR="c";Qi.MESSAGE="d";Pt.prototype.listen=Pt.prototype.N;xt.prototype.listenOnce=xt.prototype.O;xt.prototype.getLastError=xt.prototype.La;xt.prototype.getLastErrorCode=xt.prototype.Da;xt.prototype.getStatus=xt.prototype.ba;xt.prototype.getResponseJson=xt.prototype.Qa;xt.prototype.getResponseText=xt.prototype.ga;xt.prototype.send=xt.prototype.ea;var Fw=function(){return new rs},Uw=function(){return Vs()},Du=js,Vw=Fd,jw=sr,rf={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Bw=Ji,Ao=Ud,qw=xt;/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye=function(){function t(e,n){var r=this;this.previousValue=e,n&&(n.sequenceNumberHandler=function(i){return r.t(i)},this.i=function(i){return n.writeSequenceNumber(i)})}return t.prototype.t=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},t.prototype.next=function(){var e=++this.previousValue;return this.i&&this.i(e),e},t}();ye.o=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var m={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},A=function(t){function e(n,r){var i=this;return(i=t.call(this,r)||this).code=n,i.message=r,i.name="FirebaseError",i.toString=function(){return i.name+": [code="+i.code+"]: "+i.message},i}return $(e,t),e}(Error),Re=new hd("@firebase/firestore");function aa(){return Re.logLevel}function D(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Re.logLevel<=it.DEBUG){var r=e.map(gc);Re.debug.apply(Re,It(["Firestore (8.10.1): "+t],r))}}function Ct(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Re.logLevel<=it.ERROR){var r=e.map(gc);Re.error.apply(Re,It(["Firestore (8.10.1): "+t],r))}}function is(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Re.logLevel<=it.WARN){var r=e.map(gc);Re.warn.apply(Re,It(["Firestore (8.10.1): "+t],r))}}function gc(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j(t){t===void 0&&(t="Unexpected state");var e="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+t;throw Ct(e),new Error(e)}function H(t,e){t||j()}function L(t,e){return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(t){var e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vp=function(){function t(){}return t.u=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";r.length<20;)for(var i=Kw(40),o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length));return r},t}();function et(t,e){return t<e?-1:t>e?1:0}function Pr(t,e,n){return t.length===e.length&&t.every(function(r,i){return n(r,e[i])})}function mp(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue=function(){function t(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new A(m.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new A(m.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new A(m.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new A(m.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(e){return this.seconds===e.seconds?et(this.nanoseconds,e.nanoseconds):et(this.seconds,e.seconds)},t.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),J=function(){function t(e){this.timestamp=e}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new ue(0,0))},t.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},t.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ur(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wp(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bp=function(){function t(e,n,r){n===void 0?n=0:n>e.length&&j(),r===void 0?r=e.length-n:r>e.length-n&&j(),this.segments=e,this.offset=n,this.len=r}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return t.comparator(this,e)===0},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(r){n.push(r)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(e){return this.segments[this.offset+e]},t.prototype.isEmpty=function(){return this.length===0},t.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0},t.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0},t.prototype.forEach=function(e){for(var n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(e,n){for(var r=Math.min(e.length,n.length),i=0;i<r;i++){var o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0},t}(),ot=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return $(e,t),e.prototype.construct=function(n,r,i){return new e(n,r,i)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=[],o=0,s=n;o<s.length;o++){var u=s[o];if(u.indexOf("//")>=0)throw new A(m.INVALID_ARGUMENT,"Invalid segment ("+u+"). Paths must not contain // in them.");i.push.apply(i,u.split("/").filter(function(a){return a.length>0}))}return new e(i)},e.emptyPath=function(){return new e([])},e}(bp),$w=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Le=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return $(e,t),e.prototype.construct=function(n,r,i){return new e(n,r,i)},e.isValidIdentifier=function(n){return $w.test(n)},e.prototype.canonicalString=function(){return this.toArray().map(function(n){return n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(n)||(n="`"+n+"`"),n}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return this.length===1&&this.get(0)==="__name__"},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(n){for(var r=[],i="",o=0,s=function(){if(i.length===0)throw new A(m.INVALID_ARGUMENT,"Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");r.push(i),i=""},u=!1;o<n.length;){var a=n[o];if(a==="\\"){if(o+1===n.length)throw new A(m.INVALID_ARGUMENT,"Path has trailing escape character: "+n);var c=n[o+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new A(m.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);i+=c,o+=2}else a==="`"?(u=!u,o++):a!=="."||u?(i+=a,o++):(s(),o++)}if(s(),u)throw new A(m.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new e(r)},e.emptyPath=function(){return new e([])},e}(bp),Lr=function(){function t(e){this.fields=e,e.sort(Le.comparator)}return t.prototype.covers=function(e){for(var n=0,r=this.fields;n<r.length;n++)if(r[n].isPrefixOf(e))return!0;return!1},t.prototype.isEqual=function(e){return Pr(this.fields,e.fields,function(n,r){return n.isEqual(r)})},t}(),ae=function(){function t(e){this.binaryString=e}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(n){for(var r="",i=0;i<n.length;++i)r+=String.fromCharCode(n[i]);return r}(e))},t.prototype.toBase64=function(){return e=this.binaryString,btoa(e);var e},t.prototype.toUint8Array=function(){return function(e){for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(e){return et(this.binaryString,e.binaryString)},t.prototype.isEqual=function(e){return this.binaryString===e.binaryString},t}();ae.EMPTY_BYTE_STRING=new ae("");var zw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tn(t){if(H(!!t),typeof t=="string"){var e=0,n=zw.exec(t);if(H(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:At(t.seconds),nanos:At(t.nanos)}}function At(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Mr(t){return typeof t=="string"?ae.fromBase64String(t):ae.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function _p(t){var e=t.mapValue.fields.__previous_value__;return yc(e)?_p(e):e}function Li(t){var e=Tn(t.mapValue.fields.__local_write_time__.timestampValue);return new ue(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(t){return t==null}function os(t){return t===0&&1/t==-1/0}function Ep(t){return typeof t=="number"&&Number.isInteger(t)&&!os(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var B=function(){function t(e){this.path=e}return t.fromPath=function(e){return new t(ot.fromString(e))},t.fromName=function(e){return new t(ot.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},t.prototype.isEqual=function(e){return e!==null&&ot.comparator(this.path,e.path)===0},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(e,n){return ot.comparator(e.path,n.path)},t.isDocumentKey=function(e){return e.length%2==0},t.fromSegments=function(e){return new t(new ot(e.slice()))},t}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?yc(t)?4:10:j()}function He(t,e){var n=nr(t);if(n!==nr(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Li(t).isEqual(Li(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;var o=Tn(r.timestampValue),s=Tn(i.timestampValue);return o.seconds===s.seconds&&o.nanos===s.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Mr(r.bytesValue).isEqual(Mr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return At(r.geoPointValue.latitude)===At(i.geoPointValue.latitude)&&At(r.geoPointValue.longitude)===At(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return At(r.integerValue)===At(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){var o=At(r.doubleValue),s=At(i.doubleValue);return o===s?os(o)===os(s):isNaN(o)&&isNaN(s)}return!1}(t,e);case 9:return Pr(t.arrayValue.values||[],e.arrayValue.values||[],He);case 10:return function(r,i){var o=r.mapValue.fields||{},s=i.mapValue.fields||{};if(of(o)!==of(s))return!1;for(var u in o)if(o.hasOwnProperty(u)&&(s[u]===void 0||!He(o[u],s[u])))return!1;return!0}(t,e);default:return j()}}function Mi(t,e){return(t.values||[]).find(function(n){return He(n,e)})!==void 0}function Fr(t,e){var n=nr(t),r=nr(e);if(n!==r)return et(n,r);switch(n){case 0:return 0;case 1:return et(t.booleanValue,e.booleanValue);case 2:return function(i,o){var s=At(i.integerValue||i.doubleValue),u=At(o.integerValue||o.doubleValue);return s<u?-1:s>u?1:s===u?0:isNaN(s)?isNaN(u)?0:-1:1}(t,e);case 3:return sf(t.timestampValue,e.timestampValue);case 4:return sf(Li(t),Li(e));case 5:return et(t.stringValue,e.stringValue);case 6:return function(i,o){var s=Mr(i),u=Mr(o);return s.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){for(var s=i.split("/"),u=o.split("/"),a=0;a<s.length&&a<u.length;a++){var c=et(s[a],u[a]);if(c!==0)return c}return et(s.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){var s=et(At(i.latitude),At(o.latitude));return s!==0?s:et(At(i.longitude),At(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){for(var s=i.values||[],u=o.values||[],a=0;a<s.length&&a<u.length;++a){var c=Fr(s[a],u[a]);if(c)return c}return et(s.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){var s=i.fields||{},u=Object.keys(s),a=o.fields||{},c=Object.keys(a);u.sort(),c.sort();for(var l=0;l<u.length&&l<c.length;++l){var f=et(u[l],c[l]);if(f!==0)return f;var h=Fr(s[u[l]],a[c[l]]);if(h!==0)return h}return et(u.length,c.length)}(t.mapValue,e.mapValue);default:throw j()}}function sf(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return et(t,e);var n=Tn(t),r=Tn(e),i=et(n.seconds,r.seconds);return i!==0?i:et(n.nanos,r.nanos)}function vc(t){return ca(t)}function ca(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){var i=Tn(r);return"time("+i.seconds+","+i.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Mr(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,B.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(r){for(var i="[",o=!0,s=0,u=r.values||[];s<u.length;s++)o?o=!1:i+=",",i+=ca(u[s]);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){for(var i="{",o=!0,s=0,u=Object.keys(r.fields||{}).sort();s<u.length;s++){var a=u[s];o?o=!1:i+=",",i+=a+":"+ca(r.fields[a])}return i+"}"}(t.mapValue):j();var e,n}function ss(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function la(t){return!!t&&"integerValue"in t}function mc(t){return!!t&&"arrayValue"in t}function uf(t){return!!t&&"nullValue"in t}function af(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fo(t){return!!t&&"mapValue"in t}function wi(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return ur(t.mapValue.fields,function(i,o){return e.mapValue.fields[i]=wi(o)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=wi(t.arrayValue.values[r]);return n}return Object.assign({},t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ge=function(){function t(e){this.value=e}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){if(e.isEmpty())return this.value;for(var n=this.value,r=0;r<e.length-1;++r)if(!Fo(n=(n.mapValue.fields||{})[e.get(r)]))return null;return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.set=function(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wi(n)},t.prototype.setAll=function(e){var n=this,r=Le.emptyPath(),i={},o=[];e.forEach(function(u,a){if(!r.isImmediateParentOf(a)){var c=n.getFieldsMap(r);n.applyChanges(c,i,o),i={},o=[],r=a.popLast()}u?i[a.lastSegment()]=wi(u):o.push(a.lastSegment())});var s=this.getFieldsMap(r);this.applyChanges(s,i,o)},t.prototype.delete=function(e){var n=this.field(e.popLast());Fo(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]},t.prototype.isEqual=function(e){return He(this.value,e.value)},t.prototype.getFieldsMap=function(e){var n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(var r=0;r<e.length;++r){var i=n.mapValue.fields[e.get(r)];Fo(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields},t.prototype.applyChanges=function(e,n,r){ur(n,function(u,a){return e[u]=a});for(var i=0,o=r;i<o.length;i++){var s=o[i];delete e[s]}},t.prototype.clone=function(){return new t(wi(this.value))},t}();function Ip(t){var e=[];return ur(t.fields,function(n,r){var i=new Le([n]);if(Fo(r)){var o=Ip(r.mapValue).fields;if(o.length===0)e.push(i);else for(var s=0,u=o;s<u.length;s++){var a=u[s];e.push(i.child(a))}}else e.push(i)}),new Lr(e)}var Yt=function(){function t(e,n,r,i,o){this.key=e,this.documentType=n,this.version=r,this.data=i,this.documentState=o}return t.newInvalidDocument=function(e){return new t(e,0,J.min(),ge.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,ge.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,ge.empty(),2)},t.prototype.convertToFoundDocument=function(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this},t.prototype.convertToNoDocument=function(e){return this.version=e,this.documentType=2,this.data=ge.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(e){return this.version=e,this.documentType=3,this.data=ge.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return this.documentState===1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return this.documentState===2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return this.documentType!==0},t.prototype.isFoundDocument=function(){return this.documentType===1},t.prototype.isNoDocument=function(){return this.documentType===2},t.prototype.isUnknownDocument=function(){return this.documentType===3},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Hw=function(t,e,n,r,i,o,s){e===void 0&&(e=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),o===void 0&&(o=null),s===void 0&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(t,e,n,r,i,o,s){return e===void 0&&(e=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),o===void 0&&(o=null),s===void 0&&(s=null),new Hw(t,e,n,r,i,o,s)}function eo(t){var e=L(t);if(e.h===null){var n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(r){return function(i){return i.field.canonicalString()+i.op.toString()+vc(i.value)}(r)}).join(","),n+="|ob:",n+=e.orderBy.map(function(r){return function(i){return i.field.canonicalString()+i.dir}(r)}).join(","),ar(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=as(e.startAt)),e.endAt&&(n+="|ub:",n+=as(e.endAt)),e.h=n}return e.h}function Ws(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!tb(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!He(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ff(t.startAt,e.startAt)&&ff(t.endAt,e.endAt)}function us(t){return B.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var ve=function(t){function e(n,r,i){var o=this;return(o=t.call(this)||this).field=n,o.op=r,o.value=i,o}return $(e,t),e.create=function(n,r,i){return n.isKeyField()?r==="in"||r==="not-in"?this.l(n,r,i):new Gw(n,r,i):r==="array-contains"?new Yw(n,i):r==="in"?new Xw(n,i):r==="not-in"?new Jw(n,i):r==="array-contains-any"?new Zw(n,i):new e(n,r,i)},e.l=function(n,r,i){return r==="in"?new Ww(n,i):new Qw(n,i)},e.prototype.matches=function(n){var r=n.data.field(this.field);return this.op==="!="?r!==null&&this.m(Fr(r,this.value)):r!==null&&nr(this.value)===nr(r)&&this.m(Fr(r,this.value))},e.prototype.m=function(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return n===0;case"!=":return n!==0;case">":return n>0;case">=":return n>=0;default:return j()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Gw=function(t){function e(n,r,i){var o=this;return(o=t.call(this,n,r,i)||this).key=B.fromName(i.referenceValue),o}return $(e,t),e.prototype.matches=function(n){var r=B.comparator(n.key,this.key);return this.m(r)},e}(ve),Ww=function(t){function e(n,r){var i=this;return(i=t.call(this,n,"in",r)||this).keys=Tp("in",r),i}return $(e,t),e.prototype.matches=function(n){return this.keys.some(function(r){return r.isEqual(n.key)})},e}(ve),Qw=function(t){function e(n,r){var i=this;return(i=t.call(this,n,"not-in",r)||this).keys=Tp("not-in",r),i}return $(e,t),e.prototype.matches=function(n){return!this.keys.some(function(r){return r.isEqual(n.key)})},e}(ve);function Tp(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(function(r){return B.fromName(r.referenceValue)})}var Yw=function(t){function e(n,r){return t.call(this,n,"array-contains",r)||this}return $(e,t),e.prototype.matches=function(n){var r=n.data.field(this.field);return mc(r)&&Mi(r.arrayValue,this.value)},e}(ve),Xw=function(t){function e(n,r){return t.call(this,n,"in",r)||this}return $(e,t),e.prototype.matches=function(n){var r=n.data.field(this.field);return r!==null&&Mi(this.value.arrayValue,r)},e}(ve),Jw=function(t){function e(n,r){return t.call(this,n,"not-in",r)||this}return $(e,t),e.prototype.matches=function(n){if(Mi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var r=n.data.field(this.field);return r!==null&&!Mi(this.value.arrayValue,r)},e}(ve),Zw=function(t){function e(n,r){return t.call(this,n,"array-contains-any",r)||this}return $(e,t),e.prototype.matches=function(n){var r=this,i=n.data.field(this.field);return!(!mc(i)||!i.arrayValue.values)&&i.arrayValue.values.some(function(o){return Mi(r.value.arrayValue,o)})},e}(ve),Fi=function(t,e){this.position=t,this.before=e};function as(t){return(t.before?"b":"a")+":"+t.position.map(function(e){return vc(e)}).join(",")}var Nr=function(t,e){e===void 0&&(e="asc"),this.field=t,this.dir=e};function tb(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function lf(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?B.comparator(B.fromName(s.referenceValue),n.key):Fr(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return t.before?r<=0:r<0}function ff(t,e){if(t===null)return e===null;if(e===null||t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!He(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var un=function(t,e,n,r,i,o,s,u){e===void 0&&(e=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),o===void 0&&(o="F"),s===void 0&&(s=null),u===void 0&&(u=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.p=null,this.T=null,this.startAt,this.endAt};function Sp(t,e,n,r,i,o,s,u){return new un(t,e,n,r,i,o,s,u)}function no(t){return new un(t)}function Uo(t){return!ar(t.limit)&&t.limitType==="F"}function cs(t){return!ar(t.limit)&&t.limitType==="L"}function wc(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function bc(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function _c(t){return t.collectionGroup!==null}function Ur(t){var e=L(t);if(e.p===null){e.p=[];var n=bc(e),r=wc(e);if(n!==null&&r===null)n.isKeyField()||e.p.push(new Nr(n)),e.p.push(new Nr(Le.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var u=s[o];e.p.push(u),u.field.isKeyField()&&(i=!0)}if(!i){var a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Nr(Le.keyField(),a))}}}return e.p}function Ge(t){var e=L(t);if(!e.T)if(e.limitType==="F")e.T=cf(e.path,e.collectionGroup,Ur(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Ur(e);r<i.length;r++){var o=i[r],s=o.dir==="desc"?"asc":"desc";n.push(new Nr(o.field,s))}var u=e.endAt?new Fi(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Fi(e.startAt.position,!e.startAt.before):null;e.T=cf(e.path,e.collectionGroup,n,e.filters,e.limit,u,a)}return e.T}function Ap(t,e,n){return new un(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ro(t,e){return Ws(Ge(t),Ge(e))&&t.limitType===e.limitType}function Cp(t){return eo(Ge(t))+"|lt:"+t.limitType}function fa(t){return"Query(target="+function(e){var n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=", filters: ["+e.filters.map(function(r){return(i=r).field.canonicalString()+" "+i.op+" "+vc(i.value);var i}).join(", ")+"]"),ar(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=", orderBy: ["+e.orderBy.map(function(r){return function(i){return i.field.canonicalString()+" ("+i.dir+")"}(r)}).join(", ")+"]"),e.startAt&&(n+=", startAt: "+as(e.startAt)),e.endAt&&(n+=", endAt: "+as(e.endAt)),"Target("+n+")"}(Ge(t))+"; limitType="+t.limitType+")"}function io(t,e){return e.isFoundDocument()&&function(n,r){var i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):B.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(var i=0,o=n.explicitOrderBy;i<o.length;i++){var s=o[i];if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1}return!0}(t,e)&&function(n,r){for(var i=0,o=n.filters;i<o.length;i++)if(!o[i].matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!lf(n.startAt,Ur(n),r))&&(!n.endAt||!lf(n.endAt,Ur(n),r))}(t,e)}function Np(t){return function(e,n){for(var r=!1,i=0,o=Ur(t);i<o.length;i++){var s=o[i],u=eb(s,e,n);if(u!==0)return u;r=r||s.field.isKeyField()}return 0}}function eb(t,e,n){var r=t.field.isKeyField()?B.comparator(e.key,n.key):function(i,o,s){var u=o.data.field(i),a=s.data.field(i);return u!==null&&a!==null?Fr(u,a):j()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return j()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:os(e)?"-0":e}}function Dp(t){return{integerValue:""+t}}function Op(t,e){return Ep(e)?Dp(e):xp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qs=function(){this._=void 0};function nb(t,e,n){return t instanceof Vr?function(r,i){var o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof rr?kp(t,e):t instanceof ir?Pp(t,e):function(r,i){var o=Rp(r,i),s=hf(o)+hf(r.A);return la(o)&&la(r.A)?Dp(s):xp(r.R,s)}(t,e)}function rb(t,e,n){return t instanceof rr?kp(t,e):t instanceof ir?Pp(t,e):n}function Rp(t,e){return t instanceof jr?la(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}var Vr=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return $(e,t),e}(Qs),rr=function(t){function e(n){var r=this;return(r=t.call(this)||this).elements=n,r}return $(e,t),e}(Qs);function kp(t,e){for(var n=Lp(e),r=function(s){n.some(function(u){return He(u,s)})||n.push(s)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ir=function(t){function e(n){var r=this;return(r=t.call(this)||this).elements=n,r}return $(e,t),e}(Qs);function Pp(t,e){for(var n=Lp(e),r=function(s){n=n.filter(function(u){return!He(u,s)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var jr=function(t){function e(n,r){var i=this;return(i=t.call(this)||this).R=n,i.A=r,i}return $(e,t),e}(Qs);function hf(t){return At(t.integerValue||t.doubleValue)}function Lp(t){return mc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oo=function(t,e){this.field=t,this.transform=e},ib=function(t,e){this.version=t,this.transformResults=e},Gt=function(){function t(e,n){this.updateTime=e,this.exists=n}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return this.updateTime===void 0&&this.exists===void 0},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},t}();function Vo(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ys=function(){};function ob(t,e,n){t instanceof so?function(r,i,o){var s=r.value.clone(),u=gf(r.fieldTransforms,i,o.transformResults);s.setAll(u),i.convertToFoundDocument(o.version,s).setHasCommittedMutations()}(t,e,n):t instanceof Nn?function(r,i,o){if(Vo(r.precondition,i)){var s=gf(r.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(Mp(r)),u.setAll(s),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}else i.convertToUnknownDocument(o.version)}(t,e,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ha(t,e,n){t instanceof so?function(r,i,o){if(Vo(r.precondition,i)){var s=r.value.clone(),u=yf(r.fieldTransforms,o,i);s.setAll(u),i.convertToFoundDocument(pf(i),s).setHasLocalMutations()}}(t,e,n):t instanceof Nn?function(r,i,o){if(Vo(r.precondition,i)){var s=yf(r.fieldTransforms,o,i),u=i.data;u.setAll(Mp(r)),u.setAll(s),i.convertToFoundDocument(pf(i),u).setHasLocalMutations()}}(t,e,n):function(r,i){Vo(r.precondition,i)&&i.convertToNoDocument(J.min())}(t,e)}function sb(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),u=Rp(o.transform,s||null);u!=null&&(n==null&&(n=ge.empty()),n.set(o.field,u))}return n||null}function df(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Pr(n,r,function(i,o){return function(s,u){return s.field.isEqual(u.field)&&function(a,c){return a instanceof rr&&c instanceof rr||a instanceof ir&&c instanceof ir?Pr(a.elements,c.elements,He):a instanceof jr&&c instanceof jr?He(a.A,c.A):a instanceof Vr&&c instanceof Vr}(s.transform,u.transform)}(i,o)})}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function pf(t){return t.isFoundDocument()?t.version:J.min()}var so=function(t){function e(n,r,i,o){o===void 0&&(o=[]);var s=this;return(s=t.call(this)||this).key=n,s.value=r,s.precondition=i,s.fieldTransforms=o,s.type=0,s}return $(e,t),e}(Ys),Nn=function(t){function e(n,r,i,o,s){s===void 0&&(s=[]);var u=this;return(u=t.call(this)||this).key=n,u.data=r,u.fieldMask=i,u.precondition=o,u.fieldTransforms=s,u.type=1,u}return $(e,t),e}(Ys);function Mp(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function gf(t,e,n){var r=new Map;H(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=e.data.field(o.field);r.set(o.field,rb(s,u,n[i]))}return r}function yf(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],u=s.transform,a=n.data.field(s.field);r.set(s.field,nb(u,a,e))}return r}var St,nt,uo=function(t){function e(n,r){var i=this;return(i=t.call(this)||this).key=n,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return $(e,t),e}(Ys),Ec=function(t){function e(n,r){var i=this;return(i=t.call(this)||this).key=n,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return $(e,t),e}(Ys),ub=function(t){this.count=t};function Fp(t){switch(t){case m.OK:return j();case m.CANCELLED:case m.UNKNOWN:case m.DEADLINE_EXCEEDED:case m.RESOURCE_EXHAUSTED:case m.INTERNAL:case m.UNAVAILABLE:case m.UNAUTHENTICATED:return!1;case m.INVALID_ARGUMENT:case m.NOT_FOUND:case m.ALREADY_EXISTS:case m.PERMISSION_DENIED:case m.FAILED_PRECONDITION:case m.ABORTED:case m.OUT_OF_RANGE:case m.UNIMPLEMENTED:case m.DATA_LOSS:return!0;default:return j()}}function Up(t){if(t===void 0)return Ct("GRPC error has no .code"),m.UNKNOWN;switch(t){case St.OK:return m.OK;case St.CANCELLED:return m.CANCELLED;case St.UNKNOWN:return m.UNKNOWN;case St.DEADLINE_EXCEEDED:return m.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return m.RESOURCE_EXHAUSTED;case St.INTERNAL:return m.INTERNAL;case St.UNAVAILABLE:return m.UNAVAILABLE;case St.UNAUTHENTICATED:return m.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return m.INVALID_ARGUMENT;case St.NOT_FOUND:return m.NOT_FOUND;case St.ALREADY_EXISTS:return m.ALREADY_EXISTS;case St.PERMISSION_DENIED:return m.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return m.FAILED_PRECONDITION;case St.ABORTED:return m.ABORTED;case St.OUT_OF_RANGE:return m.OUT_OF_RANGE;case St.UNIMPLEMENTED:return m.UNIMPLEMENTED;case St.DATA_LOSS:return m.DATA_LOSS;default:return j()}}(nt=St||(St={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt=function(){function t(e,n){this.comparator=e,this.root=n||pn.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pn.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))},t.prototype.get=function(e){for(var n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null},t.prototype.indexOf=function(e){for(var n=0,r=this.root;!r.isEmpty();){var i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},t.prototype.forEach=function(e){this.inorderTraversal(function(n,r){return e(n,r),!1})},t.prototype.toString=function(){var e=[];return this.inorderTraversal(function(n,r){return e.push(n+":"+r),!1}),"{"+e.join(", ")+"}"},t.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},t.prototype.getIterator=function(){return new Co(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(e){return new Co(this.root,e,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Co(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(e){return new Co(this.root,e,this.comparator,!0)},t}(),Co=function(){function t(e,n,r,i){this.isReverse=i,this.nodeStack=[];for(var o=1;!e.isEmpty();)if(o=n?r(e.key,n):1,i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return t.prototype.getNext=function(){var e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(this.nodeStack.length===0)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},t}(),pn=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=r!=null?r:t.RED,this.left=i!=null?i:t.EMPTY,this.right=o!=null?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,o!=null?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},t.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(e,n,r){var i=this,o=r(e,i.key);return(i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},t.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},t.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)},t.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw j();var e=this.left.check();if(e!==this.right.check())throw j();return e+(this.isRed()?0:1)},t}();pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1,pn.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw j()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw j()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw j()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw j()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw j()},enumerable:!1,configurable:!0}),t.prototype.copy=function(e,n,r,i,o){return this},t.prototype.insert=function(e,n,r){return new pn(e,n)},t.prototype.remove=function(e,n){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(e){return!1},t.prototype.reverseTraversal=function(e){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot=function(){function t(e){this.comparator=e,this.data=new Xt(this.comparator)}return t.prototype.has=function(e){return this.data.get(e)!==null},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(e){return this.data.indexOf(e)},t.prototype.forEach=function(e){this.data.inorderTraversal(function(n,r){return e(n),!1})},t.prototype.forEachInRange=function(e,n){for(var r=this.data.getIteratorFrom(e[0]);r.hasNext();){var i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}},t.prototype.forEachWhile=function(e,n){var r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return},t.prototype.firstAfterOrEqual=function(e){var n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null},t.prototype.getIterator=function(){return new vf(this.data.getIterator())},t.prototype.getIteratorFrom=function(e){return new vf(this.data.getIteratorFrom(e))},t.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},t.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(e){var n=this;return n.size<e.size&&(n=e,e=this),e.forEach(function(r){n=n.add(r)}),n},t.prototype.isEqual=function(e){if(!(e instanceof t)||this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0},t.prototype.toArray=function(){var e=[];return this.forEach(function(n){e.push(n)}),e},t.prototype.toString=function(){var e=[];return this.forEach(function(n){return e.push(n)}),"SortedSet("+e.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),vf=function(){function t(e){this.iter=e}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),ab=new Xt(B.comparator);function ke(){return ab}var cb=new Xt(B.comparator);function da(){return cb}var lb=new Xt(B.comparator);function fb(){return lb}var hb=new Ot(B.comparator);function dt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=hb,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var db=new Ot(et);function Xs(){return db}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ic=function(){function t(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Tc.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(J.min(),r,Xs(),ke(),dt())},t}(),Tc=function(){function t(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(ae.EMPTY_BYTE_STRING,n,dt(),dt(),dt())},t}(),jo=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Vp=function(t,e){this.targetId=t,this.V=e},jp=function(t,e,n,r){n===void 0&&(n=ae.EMPTY_BYTE_STRING),r===void 0&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},mf=function(){function t(){this.S=0,this.D=bf(),this.C=ae.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"F",{get:function(){return this.S!==0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.O=function(e){e.approximateByteSize()>0&&(this.k=!0,this.C=e)},t.prototype.M=function(){var e=dt(),n=dt(),r=dt();return this.D.forEach(function(i,o){switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:j()}}),new Tc(this.C,this.N,e,n,r)},t.prototype.L=function(){this.k=!1,this.D=bf()},t.prototype.B=function(e,n){this.k=!0,this.D=this.D.insert(e,n)},t.prototype.q=function(e){this.k=!0,this.D=this.D.remove(e)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.k=!0,this.N=!0},t}(),pb=function(){function t(e){this.W=e,this.G=new Map,this.H=ke(),this.J=wf(),this.Y=new Ot(et)}return t.prototype.X=function(e){for(var n=0,r=e.v;n<r.length;n++){var i=r[n];e.P&&e.P.isFoundDocument()?this.Z(i,e.P):this.tt(i,e.key,e.P)}for(var o=0,s=e.removedTargetIds;o<s.length;o++)i=s[o],this.tt(i,e.key,e.P)},t.prototype.et=function(e){var n=this;this.forEachTarget(e,function(r){var i=n.nt(r);switch(e.state){case 0:n.st(r)&&i.O(e.resumeToken);break;case 1:i.K(),i.F||i.L(),i.O(e.resumeToken);break;case 2:i.K(),i.F||n.removeTarget(r);break;case 3:n.st(r)&&(i.j(),i.O(e.resumeToken));break;case 4:n.st(r)&&(n.it(r),i.O(e.resumeToken));break;default:j()}})},t.prototype.forEachTarget=function(e,n){var r=this;e.targetIds.length>0?e.targetIds.forEach(n):this.G.forEach(function(i,o){r.st(o)&&n(o)})},t.prototype.rt=function(e){var n=e.targetId,r=e.V.count,i=this.ot(n);if(i){var o=i.target;if(us(o))if(r===0){var s=new B(o.path);this.tt(n,s,Yt.newNoDocument(s,J.min()))}else H(r===1);else this.ct(n)!==r&&(this.it(n),this.Y=this.Y.add(n))}},t.prototype.ut=function(e){var n=this,r=new Map;this.G.forEach(function(s,u){var a=n.ot(u);if(a){if(s.current&&us(a.target)){var c=new B(a.target.path);n.H.get(c)!==null||n.at(u,c)||n.tt(u,c,Yt.newNoDocument(c,e))}s.$&&(r.set(u,s.M()),s.L())}});var i=dt();this.J.forEach(function(s,u){var a=!0;u.forEachWhile(function(c){var l=n.ot(c);return!l||l.purpose===2||(a=!1,!1)}),a&&(i=i.add(s))});var o=new Ic(e,r,this.Y,this.H,i);return this.H=ke(),this.J=wf(),this.Y=new Ot(et),o},t.prototype.Z=function(e,n){if(this.st(e)){var r=this.at(e,n.key)?2:0;this.nt(e).B(n.key,r),this.H=this.H.insert(n.key,n),this.J=this.J.insert(n.key,this.ht(n.key).add(e))}},t.prototype.tt=function(e,n,r){if(this.st(e)){var i=this.nt(e);this.at(e,n)?i.B(n,1):i.q(n),this.J=this.J.insert(n,this.ht(n).delete(e)),r&&(this.H=this.H.insert(n,r))}},t.prototype.removeTarget=function(e){this.G.delete(e)},t.prototype.ct=function(e){var n=this.nt(e).M();return this.W.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size},t.prototype.U=function(e){this.nt(e).U()},t.prototype.nt=function(e){var n=this.G.get(e);return n||(n=new mf,this.G.set(e,n)),n},t.prototype.ht=function(e){var n=this.J.get(e);return n||(n=new Ot(et),this.J=this.J.insert(e,n)),n},t.prototype.st=function(e){var n=this.ot(e)!==null;return n||D("WatchChangeAggregator","Detected inactive target",e),n},t.prototype.ot=function(e){var n=this.G.get(e);return n&&n.F?null:this.W.lt(e)},t.prototype.it=function(e){var n=this;this.G.set(e,new mf),this.W.getRemoteKeysForTarget(e).forEach(function(r){n.tt(e,r,null)})},t.prototype.at=function(e,n){return this.W.getRemoteKeysForTarget(e).has(n)},t}();function wf(){return new Xt(B.comparator)}function bf(){return new Xt(B.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gb={asc:"ASCENDING",desc:"DESCENDING"},yb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vb=function(t,e){this.databaseId=t,this.I=e};function Ui(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Bp(t,e){return t.I?e.toBase64():e.toUint8Array()}function mb(t,e){return Ui(t,e.toTimestamp())}function ie(t){return H(!!t),J.fromTimestamp(function(e){var n=Tn(e);return new ue(n.seconds,n.nanos)}(t))}function Sc(t,e){return function(n){return new ot(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function qp(t){var e=ot.fromString(t);return H(Qp(e)),e}function Vi(t,e){return Sc(t.databaseId,e.path)}function tn(t,e){var n=qp(e);if(n.get(1)!==t.databaseId.projectId)throw new A(m.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new A(m.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new B($p(n))}function pa(t,e){return Sc(t.databaseId,e)}function Kp(t){var e=qp(t);return e.length===4?ot.emptyPath():$p(e)}function ji(t){return new ot(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $p(t){return H(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function _f(t,e,n){return{name:Vi(t,e),fields:n.value.mapValue.fields}}function wb(t,e,n){var r=tn(t,e.name),i=ie(e.updateTime),o=new ge({mapValue:{fields:e.fields}}),s=Yt.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function ls(t,e){var n;if(e instanceof so)n={update:_f(t,e.key,e.value)};else if(e instanceof uo)n={delete:Vi(t,e.key)};else if(e instanceof Nn)n={update:_f(t,e.key,e.data),updateMask:Tb(e.fieldMask)};else{if(!(e instanceof Ec))return j();n={verify:Vi(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(r){return function(i,o){var s=o.transform;if(s instanceof Vr)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof rr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof ir)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof jr)return{fieldPath:o.field.canonicalString(),increment:s.A};throw j()}(0,r)})),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:mb(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:j()}(t,e.precondition)),n}function Ef(t,e){var n=e.currentDocument?function(c){return c.updateTime!==void 0?Gt.updateTime(ie(c.updateTime)):c.exists!==void 0?Gt.exists(c.exists):Gt.none()}(e.currentDocument):Gt.none(),r=e.updateTransforms?e.updateTransforms.map(function(c){return function(l,f){var h=null;if("setToServerValue"in f)H(f.setToServerValue==="REQUEST_TIME"),h=new Vr;else if("appendMissingElements"in f){var d=f.appendMissingElements.values||[];h=new rr(d)}else if("removeAllFromArray"in f){var g=f.removeAllFromArray.values||[];h=new ir(g)}else"increment"in f?h=new jr(l,f.increment):j();var y=Le.fromServerFormat(f.fieldPath);return new oo(y,h)}(t,c)}):[];if(e.update){e.update.name;var i=tn(t,e.update.name),o=new ge({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(c){var l=c.fieldPaths||[];return new Lr(l.map(function(f){return Le.fromServerFormat(f)}))}(e.updateMask);return new Nn(i,o,s,n,r)}return new so(i,o,n,r)}if(e.delete){var u=tn(t,e.delete);return new uo(u,n)}if(e.verify){var a=tn(t,e.verify);return new Ec(a,n)}return j()}function zp(t,e){return{documents:[pa(t,e.path)]}}function Hp(t,e){var n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=pa(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=pa(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(u){if(u.length!==0){var a=u.map(function(c){return function(l){if(l.op==="=="){if(af(l.value))return{unaryFilter:{field:yr(l.field),op:"IS_NAN"}};if(uf(l.value))return{unaryFilter:{field:yr(l.field),op:"IS_NULL"}}}else if(l.op==="!="){if(af(l.value))return{unaryFilter:{field:yr(l.field),op:"IS_NOT_NAN"}};if(uf(l.value))return{unaryFilter:{field:yr(l.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yr(l.field),op:_b(l.op),value:l.value}}}(c)});return a.length===1?a[0]:{compositeFilter:{op:"AND",filters:a}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(u){if(u.length!==0)return u.map(function(a){return function(c){return{field:yr(c.field),direction:bb(c.dir)}}(a)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(u,a){return u.I||ar(a)?a:{value:a}}(t,e.limit);return s!==null&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=If(e.startAt)),e.endAt&&(n.structuredQuery.endAt=If(e.endAt)),n}function Gp(t){var e=Kp(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){H(r===1);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Wp(n.where));var u=[];n.orderBy&&(u=n.orderBy.map(function(f){return function(h){return new Nr(Ir(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(f)}));var a=null;n.limit&&(a=function(f){var h;return ar(h=typeof f=="object"?f.value:f)?null:h}(n.limit));var c=null;n.startAt&&(c=Tf(n.startAt));var l=null;return n.endAt&&(l=Tf(n.endAt)),Sp(e,i,u,s,a,"F",c,l)}function Wp(t){return t?t.unaryFilter!==void 0?[Ib(t)]:t.fieldFilter!==void 0?[Eb(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(function(e){return Wp(e)}).reduce(function(e,n){return e.concat(n)}):j():[]}function If(t){return{before:t.before,values:t.position}}function Tf(t){var e=!!t.before,n=t.values||[];return new Fi(n,e)}function bb(t){return gb[t]}function _b(t){return yb[t]}function yr(t){return{fieldPath:t.canonicalString()}}function Ir(t){return Le.fromServerFormat(t.fieldPath)}function Eb(t){return ve.create(Ir(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return j()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ib(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Ir(t.unaryFilter.field);return ve.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Ir(t.unaryFilter.field);return ve.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ir(t.unaryFilter.field);return ve.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ir(t.unaryFilter.field);return ve.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return j()}}function Tb(t){var e=[];return t.fields.forEach(function(n){return e.push(n.canonicalString())}),{fieldPaths:e}}function Qp(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Sf(e)),e=Sb(t.get(n),e);return Sf(e)}function Sb(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Sf(t){return t+""}function Je(t){var e=t.length;if(H(e>=2),e===2)return H(t.charAt(0)===""&&t.charAt(1)===""),ot.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&j(),t.charAt(s+1)){case"":var u=t.substring(o,s),a=void 0;i.length===0?a=u:(a=i+=u,i=""),r.push(a);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:j()}o=s+2}return new ot(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ab=function(t,e){this.seconds=t,this.nanoseconds=e},de=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};de.store="owner",de.key="owner";var bn=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};bn.store="mutationQueues",bn.keyPath="userId";var gt=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};gt.store="mutations",gt.keyPath="batchId",gt.userMutationsIndex="userMutationsIndex",gt.userMutationsKeyPath=["userId","batchId"];var Kt=function(){function t(){}return t.prefixForUser=function(e){return[e]},t.prefixForPath=function(e,n){return[e,Pe(n)]},t.key=function(e,n,r){return[e,Pe(n),r]},t}();Kt.store="documentMutations",Kt.PLACEHOLDER=new Kt;var Cb=function(t,e){this.path=t,this.readTime=e},Nb=function(t,e){this.path=t,this.version=e},Et=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Et.store="remoteDocuments",Et.readTimeIndex="readTimeIndex",Et.readTimeIndexPath="readTime",Et.collectionReadTimeIndex="collectionReadTimeIndex",Et.collectionReadTimeIndexPath=["parentPath","readTime"];var $e=function(t){this.byteSize=t};$e.store="remoteDocumentGlobal",$e.key="remoteDocumentGlobalKey";var se=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};se.store="targets",se.keyPath="targetId",se.queryTargetsIndexName="queryTargetsIndex",se.queryTargetsKeyPath=["canonicalId","targetId"];var Ft=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Ft.store="targetDocuments",Ft.keyPath=["targetId","path"],Ft.documentTargetsIndex="documentTargetsIndex",Ft.documentTargetsKeyPath=["path","targetId"];var pe=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};pe.key="targetGlobalKey",pe.store="targetGlobal";var Yn=function(t,e){this.collectionId=t,this.parent=e};Yn.store="collectionParents",Yn.keyPath=["collectionId","parent"];var en=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};en.store="clientMetadata",en.keyPath="clientId";var Br=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Br.store="bundles",Br.keyPath="bundleId";var qr=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};qr.store="namedQueries",qr.keyPath="name";var xb=It(It([],It(It([],It(It([],It(It([],[bn.store,gt.store,Kt.store,Et.store,se.store,de.store,pe.store,Ft.store]),[en.store])),[$e.store])),[Yn.store])),[Br.store,qr.store]),Yp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Xp=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(e){return e()})},t}(),ce=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},x=function(){function t(e){var n=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(function(r){n.isDone=!0,n.result=r,n.nextCallback&&n.nextCallback(r)},function(r){n.isDone=!0,n.error=r,n.catchCallback&&n.catchCallback(r)})}return t.prototype.catch=function(e){return this.next(void 0,e)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&j(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(i,o){r.nextCallback=function(s){r.wrapSuccess(e,s).next(i,o)},r.catchCallback=function(s){r.wrapFailure(n,s).next(i,o)}})},t.prototype.toPromise=function(){var e=this;return new Promise(function(n,r){e.next(n,r)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(r){return t.reject(r)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(n,r){n(e)})},t.reject=function(e){return new t(function(n,r){r(e)})},t.waitFor=function(e){return new t(function(n,r){var i=0,o=0,s=!1;e.forEach(function(u){++i,u.next(function(){++o,s&&o===i&&n()},function(a){return r(a)})}),s=!0,o===i&&n()})},t.or=function(e){for(var n=t.resolve(!1),r=function(s){n=n.next(function(u){return u?t.resolve(u):s()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(e,n){var r=this,i=[];return e.forEach(function(o,s){i.push(n.call(r,o,s))}),this.waitFor(i)},t}(),Jp=function(){function t(e,n){var r=this;this.action=e,this.transaction=n,this.aborted=!1,this.ft=new ce,this.transaction.oncomplete=function(){r.ft.resolve()},this.transaction.onabort=function(){n.error?r.ft.reject(new bi(e,n.error)):r.ft.resolve()},this.transaction.onerror=function(i){var o=Ac(i.target.error);r.ft.reject(new bi(e,o))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new bi(n,o)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(e){e&&this.ft.reject(e),this.aborted||(D("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(e){var n=this.transaction.objectStore(e);return new Ob(n)},t}(),Kr=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,t._t(Zn())===12.2&&Ct("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(e){return D("SimpleDb","Removing database:",e),qn(window.indexedDB.deleteDatabase(e)).toPromise()},t.yt=function(){if(typeof indexedDB>"u")return!1;if(t.gt())return!0;var e=Zn(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.Tt)==="YES"},t.It=function(e,n){return e.store(n)},t._t=function(e){var n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)},t.Et=function(e){var n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)},t.prototype.At=function(e){return I(this,void 0,void 0,function(){var n,r=this;return E(this,function(i){switch(i.label){case 0:return this.db?[3,2]:(D("SimpleDb","Opening database:",this.name),n=this,[4,new Promise(function(o,s){var u=indexedDB.open(r.name,r.version);u.onsuccess=function(a){var c=a.target.result;o(c)},u.onblocked=function(){s(new bi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=function(a){var c=a.target.error;c.name==="VersionError"?s(new A(m.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s(new bi(e,c))},u.onupgradeneeded=function(a){D("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',a.oldVersion);var c=a.target.result;r.wt.Rt(c,u.transaction,a.oldVersion,r.version).next(function(){D("SimpleDb","Database upgrade to version "+r.version+" complete")})}})]);case 1:n.db=i.sent(),i.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(o){return r.bt(o)}),this.db)]}})})},t.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(n){return e(n)})},t.prototype.runTransaction=function(e,n,r,i){return I(this,void 0,void 0,function(){var o,s,u,a,c;return E(this,function(l){switch(l.label){case 0:o=n==="readonly",s=0,u=function(){var f,h,d,g,y;return E(this,function(w){switch(w.label){case 0:++s,w.label=1;case 1:return w.trys.push([1,4,,5]),[4,a.At(e)];case 2:return a.db=w.sent(),f=Jp.open(a.db,e,o?"readonly":"readwrite",r),h=i(f).catch(function(_){return f.abort(_),x.reject(_)}).toPromise(),d={},h.catch(function(){}),[4,f.dt];case 3:return[2,(d.value=(w.sent(),h),d)];case 4:return g=w.sent(),y=g.name!=="FirebaseError"&&s<3,D("SimpleDb","Transaction failed with error:",g.message,"Retrying:",y),a.close(),y?[3,5]:[2,{value:Promise.reject(g)}];case 5:return[2]}})},a=this,l.label=1;case 1:return[5,u()];case 2:if(typeof(c=l.sent())=="object")return[2,c.value];l.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Db=function(){function t(e){this.Pt=e,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(e){this.Pt=e},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(e){this.St=e},t.prototype.delete=function(){return qn(this.Pt.delete())},t}(),bi=function(t){function e(n,r){var i=this;return(i=t.call(this,m.UNAVAILABLE,"IndexedDB transaction '"+n+"' failed: "+r)||this).name="IndexedDbTransactionError",i}return $(e,t),e}(A);function cr(t){return t.name==="IndexedDbTransactionError"}var Ob=function(){function t(e){this.store=e}return t.prototype.put=function(e,n){var r;return n!==void 0?(D("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(D("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),qn(r)},t.prototype.add=function(e){return D("SimpleDb","ADD",this.store.name,e,e),qn(this.store.add(e))},t.prototype.get=function(e){var n=this;return qn(this.store.get(e)).next(function(r){return r===void 0&&(r=null),D("SimpleDb","GET",n.store.name,e,r),r})},t.prototype.delete=function(e){return D("SimpleDb","DELETE",this.store.name,e),qn(this.store.delete(e))},t.prototype.count=function(){return D("SimpleDb","COUNT",this.store.name),qn(this.store.count())},t.prototype.Nt=function(e,n){var r=this.cursor(this.options(e,n)),i=[];return this.xt(r,function(o,s){i.push(s)}).next(function(){return i})},t.prototype.kt=function(e,n){D("SimpleDb","DELETE ALL",this.store.name);var r=this.options(e,n);r.Ft=!1;var i=this.cursor(r);return this.xt(i,function(o,s,u){return u.delete()})},t.prototype.$t=function(e,n){var r;n?r=e:(r={},n=e);var i=this.cursor(r);return this.xt(i,n)},t.prototype.Ot=function(e){var n=this.cursor({});return new x(function(r,i){n.onerror=function(o){var s=Ac(o.target.error);i(s)},n.onsuccess=function(o){var s=o.target.result;s?e(s.primaryKey,s.value).next(function(u){u?s.continue():r()}):r()}})},t.prototype.xt=function(e,n){var r=[];return new x(function(i,o){e.onerror=function(s){o(s.target.error)},e.onsuccess=function(s){var u=s.target.result;if(u){var a=new Db(u),c=n(u.primaryKey,u.value,a);if(c instanceof x){var l=c.catch(function(f){return a.done(),x.reject(f)});r.push(l)}a.isDone?i():a.Dt===null?u.continue():u.continue(a.Dt)}else i()}}).next(function(){return x.waitFor(r)})},t.prototype.options=function(e,n){var r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}},t.prototype.cursor=function(e){var n="next";if(e.reverse&&(n="prev"),e.index){var r=this.store.index(e.index);return e.Ft?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)},t}();function qn(t){return new x(function(e,n){t.onsuccess=function(r){var i=r.target.result;e(i)},t.onerror=function(r){var i=Ac(r.target.error);n(i)}})}var Af=!1;function Ac(t){var e=Kr._t(Zn());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new A("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Af||(Af=!0,setTimeout(function(){throw r},0)),r}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cf=function(t){function e(n,r){var i=this;return(i=t.call(this)||this).Mt=n,i.currentSequenceNumber=r,i}return $(e,t),e}(Xp);function le(t,e){var n=L(t);return Kr.It(n.Mt,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cc=function(){function t(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return t.prototype.applyToRemoteDocument=function(e,n){for(var r=n.mutationResults,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(e.key)&&ob(o,e,r[i])}},t.prototype.applyToLocalView=function(e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(e.key)&&ha(s,e,this.localWriteTime);for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(e.key)&&ha(s,e,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(e){var n=this;this.mutations.forEach(function(r){var i=e.get(r.key),o=i;n.applyToLocalView(o),i.isValidDocument()||o.convertToNoDocument(J.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(e,n){return e.add(n.key)},dt())},t.prototype.isEqual=function(e){return this.batchId===e.batchId&&Pr(this.mutations,e.mutations,function(n,r){return df(n,r)})&&Pr(this.baseMutations,e.baseMutations,function(n,r){return df(n,r)})},t}(),Rb=function(){function t(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return t.from=function(e,n,r){H(e.mutations.length===r.length);for(var i=fb(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Js=function(){function t(e,n,r,i,o,s,u){o===void 0&&(o=J.min()),s===void 0&&(s=J.min()),u===void 0&&(u=ae.EMPTY_BYTE_STRING),this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=u}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Zp=function(t){this.Lt=t};function ga(t,e){if(e.document)return wb(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=B.fromSegments(e.noDocument.path),r=zr(e.noDocument.readTime),i=Yt.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=B.fromSegments(e.unknownDocument.path);return r=zr(e.unknownDocument.version),Yt.newUnknownDocument(o,r)}return j()}function Nf(t,e,n){var r=Nc(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(f,h){return{name:Vi(f,h.key),fields:h.data.value.mapValue.fields,updateTime:Ui(f,h.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new Et(null,null,o,s,r,i)}if(e.isNoDocument()){var u=e.key.path.toArray(),a=$r(e.version);return s=e.hasCommittedMutations,new Et(null,new Cb(u,a),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=$r(e.version);return new Et(new Nb(c,l),null,null,!0,r,i)}return j()}function Nc(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function tg(t){var e=new ue(t[0],t[1]);return J.fromTimestamp(e)}function $r(t){var e=t.toTimestamp();return new Ab(e.seconds,e.nanoseconds)}function zr(t){var e=new ue(t.seconds,t.nanoseconds);return J.fromTimestamp(e)}function br(t,e){for(var n=(e.baseMutations||[]).map(function(a){return Ef(t.Lt,a)}),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&e.mutations[r+1].transform!==void 0){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map(function(a){return Ef(t.Lt,a)}),u=ue.fromMillis(e.localWriteTimeMs);return new Cc(e.batchId,u,n,s)}function pi(t){var e,n,r=zr(t.readTime),i=t.lastLimboFreeSnapshotVersion!==void 0?zr(t.lastLimboFreeSnapshotVersion):J.min();return t.query.documents!==void 0?(H((n=t.query).documents.length===1),e=Ge(no(Kp(n.documents[0])))):e=function(o){return Ge(Gp(o))}(t.query),new Js(e,t.targetId,0,t.lastListenSequenceNumber,r,i,ae.fromBase64String(t.resumeToken))}function eg(t,e){var n,r=$r(e.snapshotVersion),i=$r(e.lastLimboFreeSnapshotVersion);n=us(e.target)?zp(t.Lt,e.target):Hp(t.Lt,e.target);var o=e.resumeToken.toBase64();return new se(e.targetId,eo(e.target),r,o,e.sequenceNumber,i,n)}function ng(t){var e=Gp({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ap(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kb=function(){function t(){}return t.prototype.getBundleMetadata=function(e,n){return xf(e).get(n).next(function(r){if(r)return{id:(i=r).bundleId,createTime:zr(i.createTime),version:i.version};var i})},t.prototype.saveBundleMetadata=function(e,n){return xf(e).put({bundleId:(r=n).id,createTime:$r(ie(r.createTime)),version:r.version});var r},t.prototype.getNamedQuery=function(e,n){return Df(e).get(n).next(function(r){if(r)return{name:(i=r).name,query:ng(i.bundledQuery),readTime:zr(i.readTime)};var i})},t.prototype.saveNamedQuery=function(e,n){return Df(e).put(function(r){return{name:r.name,readTime:$r(ie(r.readTime)),bundledQuery:r.bundledQuery}}(n))},t}();function xf(t){return le(t,Br.store)}function Df(t){return le(t,qr.store)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pb=function(){function t(){this.Bt=new xc}return t.prototype.addToCollectionParentIndex=function(e,n){return this.Bt.add(n),x.resolve()},t.prototype.getCollectionParents=function(e,n){return x.resolve(this.Bt.getEntries(n))},t}(),xc=function(){function t(){this.index={}}return t.prototype.add=function(e){var n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ot(ot.comparator),o=!i.has(r);return this.index[n]=i.add(r),o},t.prototype.has=function(e){var n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)},t.prototype.getEntries=function(e){return(this.index[e]||new Ot(ot.comparator)).toArray()},t}(),Lb=function(){function t(){this.qt=new xc}return t.prototype.addToCollectionParentIndex=function(e,n){var r=this;if(!this.qt.has(n)){var i=n.lastSegment(),o=n.popLast();e.addOnCommittedListener(function(){r.qt.add(n)});var s={collectionId:i,parent:Pe(o)};return Of(e).put(s)}return x.resolve()},t.prototype.getCollectionParents=function(e,n){var r=[],i=IDBKeyRange.bound([n,""],[mp(n),""],!1,!0);return Of(e).Nt(i).next(function(o){for(var s=0,u=o;s<u.length;s++){var a=u[s];if(a.collectionId!==n)break;r.push(Je(a.parent))}return r})},t}();function Of(t){return le(t,Yn.store)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Be=function(){function t(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t,e,n){var r=t.store(gt.store),i=t.store(Kt.store),o=[],s=IDBKeyRange.only(n.batchId),u=0,a=r.$t({range:s},function(g,y,w){return u++,w.delete()});o.push(a.next(function(){H(u===1)}));for(var c=[],l=0,f=n.mutations;l<f.length;l++){var h=f[l],d=Kt.key(e,h.key.path,n.batchId);o.push(i.delete(d)),c.push(h.key)}return x.waitFor(o).next(function(){return c})}function fs(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw j();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Be.DEFAULT_COLLECTION_PERCENTILE=10,Be.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Be.DEFAULT=new Be(41943040,Be.DEFAULT_COLLECTION_PERCENTILE,Be.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Be.DISABLED=new Be(-1,0,0);var Mb=function(){function t(e,n,r,i){this.userId=e,this.R=n,this.Ut=r,this.referenceDelegate=i,this.Kt={}}return t.Qt=function(e,n,r,i){return H(e.uid!==""),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(e){var n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ln(e).$t({index:gt.userMutationsIndex,range:r},function(i,o,s){n=!1,s.done()}).next(function(){return n})},t.prototype.addMutationBatch=function(e,n,r,i){var o=this,s=_r(e),u=ln(e);return u.add({}).next(function(a){H(typeof a=="number");for(var c=new Cc(a,n,r,i),l=function(_,P,T){var U=T.baseMutations.map(function(Z){return ls(_.Lt,Z)}),z=T.mutations.map(function(Z){return ls(_.Lt,Z)});return new gt(P,T.batchId,T.localWriteTime.toMillis(),U,z)}(o.R,o.userId,c),f=[],h=new Ot(function(_,P){return et(_.canonicalString(),P.canonicalString())}),d=0,g=i;d<g.length;d++){var y=g[d],w=Kt.key(o.userId,y.key.path,a);h=h.add(y.key.path.popLast()),f.push(u.put(l)),f.push(s.put(w,Kt.PLACEHOLDER))}return h.forEach(function(_){f.push(o.Ut.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(function(){o.Kt[a]=c.keys()}),x.waitFor(f).next(function(){return c})})},t.prototype.lookupMutationBatch=function(e,n){var r=this;return ln(e).get(n).next(function(i){return i?(H(i.userId===r.userId),br(r.R,i)):null})},t.prototype.jt=function(e,n){var r=this;return this.Kt[n]?x.resolve(this.Kt[n]):this.lookupMutationBatch(e,n).next(function(i){if(i){var o=i.keys();return r.Kt[n]=o,o}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(e,n){var r=this,i=n+1,o=IDBKeyRange.lowerBound([this.userId,i]),s=null;return ln(e).$t({index:gt.userMutationsIndex,range:o},function(u,a,c){a.userId===r.userId&&(H(a.batchId>=i),s=br(r.R,a)),c.done()}).next(function(){return s})},t.prototype.getHighestUnacknowledgedBatchId=function(e){var n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return ln(e).$t({index:gt.userMutationsIndex,range:n,reverse:!0},function(i,o,s){r=o.batchId,s.done()}).next(function(){return r})},t.prototype.getAllMutationBatches=function(e){var n=this,r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ln(e).Nt(gt.userMutationsIndex,r).next(function(i){return i.map(function(o){return br(n.R,o)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,n){var r=this,i=Kt.prefixForPath(this.userId,n.path),o=IDBKeyRange.lowerBound(i),s=[];return _r(e).$t({range:o},function(u,a,c){var l=u[0],f=u[1],h=u[2],d=Je(f);if(l===r.userId&&n.path.isEqual(d))return ln(e).get(h).next(function(g){if(!g)throw j();H(g.userId===r.userId),s.push(br(r.R,g))});c.done()}).next(function(){return s})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,n){var r=this,i=new Ot(et),o=[];return n.forEach(function(s){var u=Kt.prefixForPath(r.userId,s.path),a=IDBKeyRange.lowerBound(u),c=_r(e).$t({range:a},function(l,f,h){var d=l[0],g=l[1],y=l[2],w=Je(g);d===r.userId&&s.path.isEqual(w)?i=i.add(y):h.done()});o.push(c)}),x.waitFor(o).next(function(){return r.Wt(e,i)})},t.prototype.getAllMutationBatchesAffectingQuery=function(e,n){var r=this,i=n.path,o=i.length+1,s=Kt.prefixForPath(this.userId,i),u=IDBKeyRange.lowerBound(s),a=new Ot(et);return _r(e).$t({range:u},function(c,l,f){var h=c[0],d=c[1],g=c[2],y=Je(d);h===r.userId&&i.isPrefixOf(y)?y.length===o&&(a=a.add(g)):f.done()}).next(function(){return r.Wt(e,a)})},t.prototype.Wt=function(e,n){var r=this,i=[],o=[];return n.forEach(function(s){o.push(ln(e).get(s).next(function(u){if(u===null)throw j();H(u.userId===r.userId),i.push(br(r.R,u))}))}),x.waitFor(o).next(function(){return i})},t.prototype.removeMutationBatch=function(e,n){var r=this;return rg(e.Mt,this.userId,n).next(function(i){return e.addOnCommittedListener(function(){r.Gt(n.batchId)}),x.forEach(i,function(o){return r.referenceDelegate.markPotentiallyOrphaned(e,o)})})},t.prototype.Gt=function(e){delete this.Kt[e]},t.prototype.performConsistencyCheck=function(e){var n=this;return this.checkEmpty(e).next(function(r){if(!r)return x.resolve();var i=IDBKeyRange.lowerBound(Kt.prefixForUser(n.userId)),o=[];return _r(e).$t({range:i},function(s,u,a){if(s[0]===n.userId){var c=Je(s[1]);o.push(c)}else a.done()}).next(function(){H(o.length===0)})})},t.prototype.containsKey=function(e,n){return ig(e,this.userId,n)},t.prototype.zt=function(e){var n=this;return og(e).get(this.userId).next(function(r){return r||new bn(n.userId,-1,"")})},t}();function ig(t,e,n){var r=Kt.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return _r(t).$t({range:o,Ft:!0},function(u,a,c){var l=u[0],f=u[1];u[2],l===e&&f===i&&(s=!0),c.done()}).next(function(){return s})}function ln(t){return le(t,gt.store)}function _r(t){return le(t,Kt.store)}function og(t){return le(t,bn.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hs=function(){function t(e){this.Ht=e}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Fb=function(){function t(e,n){this.referenceDelegate=e,this.R=n}return t.prototype.allocateTargetId=function(e){var n=this;return this.Xt(e).next(function(r){var i=new hs(r.highestTargetId);return r.highestTargetId=i.next(),n.Zt(e,r).next(function(){return r.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(e){return this.Xt(e).next(function(n){return J.fromTimestamp(new ue(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(e){return this.Xt(e).next(function(n){return n.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(e,n,r){var i=this;return this.Xt(e).next(function(o){return o.highestListenSequenceNumber=n,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),n>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=n),i.Zt(e,o)})},t.prototype.addTargetData=function(e,n){var r=this;return this.te(e,n).next(function(){return r.Xt(e).next(function(i){return i.targetCount+=1,r.ee(n,i),r.Zt(e,i)})})},t.prototype.updateTargetData=function(e,n){return this.te(e,n)},t.prototype.removeTargetData=function(e,n){var r=this;return this.removeMatchingKeysForTargetId(e,n.targetId).next(function(){return vr(e).delete(n.targetId)}).next(function(){return r.Xt(e)}).next(function(i){return H(i.targetCount>0),i.targetCount-=1,r.Zt(e,i)})},t.prototype.removeTargets=function(e,n,r){var i=this,o=0,s=[];return vr(e).$t(function(u,a){var c=pi(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(o++,s.push(i.removeTargetData(e,c)))}).next(function(){return x.waitFor(s)}).next(function(){return o})},t.prototype.forEachTarget=function(e,n){return vr(e).$t(function(r,i){var o=pi(i);n(o)})},t.prototype.Xt=function(e){return kf(e).get(pe.key).next(function(n){return H(n!==null),n})},t.prototype.Zt=function(e,n){return kf(e).put(pe.key,n)},t.prototype.te=function(e,n){return vr(e).put(eg(this.R,n))},t.prototype.ee=function(e,n){var r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r},t.prototype.getTargetCount=function(e){return this.Xt(e).next(function(n){return n.targetCount})},t.prototype.getTargetData=function(e,n){var r=eo(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return vr(e).$t({range:i,index:se.queryTargetsIndexName},function(s,u,a){var c=pi(u);Ws(n,c.target)&&(o=c,a.done())}).next(function(){return o})},t.prototype.addMatchingKeys=function(e,n,r){var i=this,o=[],s=gn(e);return n.forEach(function(u){var a=Pe(u.path);o.push(s.put(new Ft(r,a))),o.push(i.referenceDelegate.addReference(e,r,u))}),x.waitFor(o)},t.prototype.removeMatchingKeys=function(e,n,r){var i=this,o=gn(e);return x.forEach(n,function(s){var u=Pe(s.path);return x.waitFor([o.delete([r,u]),i.referenceDelegate.removeReference(e,r,s)])})},t.prototype.removeMatchingKeysForTargetId=function(e,n){var r=gn(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)},t.prototype.getMatchingKeysForTargetId=function(e,n){var r=IDBKeyRange.bound([n],[n+1],!1,!0),i=gn(e),o=dt();return i.$t({range:r,Ft:!0},function(s,u,a){var c=Je(s[1]),l=new B(c);o=o.add(l)}).next(function(){return o})},t.prototype.containsKey=function(e,n){var r=Pe(n.path),i=IDBKeyRange.bound([r],[mp(r)],!1,!0),o=0;return gn(e).$t({index:Ft.documentTargetsIndex,Ft:!0,range:i},function(s,u,a){var c=s[0];s[1],c!==0&&(o++,a.done())}).next(function(){return o>0})},t.prototype.lt=function(e,n){return vr(e).get(n).next(function(r){return r?pi(r):null})},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(t){return le(t,se.store)}function kf(t){return le(t,pe.store)}function gn(t){return le(t,Ft.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(t){return I(this,void 0,void 0,function(){return E(this,function(e){if(t.code!==m.FAILED_PRECONDITION||t.message!==Yp)throw t;return D("LocalStore","Unexpectedly lost primary lease"),[2]})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=et(n,i);return s===0?et(r,o):s}var Ub=function(){function t(e){this.ne=e,this.buffer=new Ot(Pf),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(e){var n=[e,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(n);else{var r=this.buffer.last();Pf(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Vb=function(){function t(e,n){this.garbageCollector=e,this.asyncQueue=n,this.oe=!1,this.ce=null}return t.prototype.start=function(e){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.ue(e)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return this.ce!==null},enumerable:!1,configurable:!0}),t.prototype.ue=function(e){var n=this,r=this.oe?3e5:6e4;D("LruGarbageCollector","Garbage collection scheduled in "+r+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,function(){return I(n,void 0,void 0,function(){var i;return E(this,function(o){switch(o.label){case 0:this.ce=null,this.oe=!0,o.label=1;case 1:return o.trys.push([1,3,,7]),[4,e.collectGarbage(this.garbageCollector)];case 2:return o.sent(),[3,7];case 3:return cr(i=o.sent())?(D("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i),[3,6]):[3,4];case 4:return[4,lr(i)];case 5:o.sent(),o.label=6;case 6:return[3,7];case 7:return[4,this.ue(e)];case 8:return o.sent(),[2]}})})})},t}(),jb=function(){function t(e,n){this.ae=e,this.params=n}return t.prototype.calculateTargetCount=function(e,n){return this.ae.he(e).next(function(r){return Math.floor(n/100*r)})},t.prototype.nthSequenceNumber=function(e,n){var r=this;if(n===0)return x.resolve(ye.o);var i=new Ub(n);return this.ae.forEachTarget(e,function(o){return i.re(o.sequenceNumber)}).next(function(){return r.ae.le(e,function(o){return i.re(o)})}).next(function(){return i.maxValue})},t.prototype.removeTargets=function(e,n,r){return this.ae.removeTargets(e,n,r)},t.prototype.removeOrphanedDocuments=function(e,n){return this.ae.removeOrphanedDocuments(e,n)},t.prototype.collect=function(e,n){var r=this;return this.params.cacheSizeCollectionThreshold===-1?(D("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(Rf)):this.getCacheSize(e).next(function(i){return i<r.params.cacheSizeCollectionThreshold?(D("LruGarbageCollector","Garbage collection skipped; Cache size "+i+" is lower than threshold "+r.params.cacheSizeCollectionThreshold),Rf):r.fe(e,n)})},t.prototype.getCacheSize=function(e){return this.ae.getCacheSize(e)},t.prototype.fe=function(e,n){var r,i,o,s,u,a,c,l=this,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(h){return h>l.params.maximumSequenceNumbersToCollect?(D("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+h),i=l.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),l.nthSequenceNumber(e,i)}).next(function(h){return r=h,u=Date.now(),l.removeTargets(e,r,n)}).next(function(h){return o=h,a=Date.now(),l.removeOrphanedDocuments(e,r)}).next(function(h){return c=Date.now(),aa()<=it.DEBUG&&D("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in `+(s-f)+`ms
	Determined least recently used `+i+" in "+(u-s)+`ms
	Removed `+o+" targets in "+(a-u)+`ms
	Removed `+h+" documents in "+(c-a)+`ms
Total Duration: `+(c-f)+"ms"),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:h})})},t}(),Bb=function(){function t(e,n){this.db=e,this.garbageCollector=function(r,i){return new jb(r,i)}(this,n)}return t.prototype.he=function(e){var n=this.de(e);return this.db.getTargetCache().getTargetCount(e).next(function(r){return n.next(function(i){return r+i})})},t.prototype.de=function(e){var n=0;return this.le(e,function(r){n++}).next(function(){return n})},t.prototype.forEachTarget=function(e,n){return this.db.getTargetCache().forEachTarget(e,n)},t.prototype.le=function(e,n){return this.we(e,function(r,i){return n(i)})},t.prototype.addReference=function(e,n,r){return No(e,r)},t.prototype.removeReference=function(e,n,r){return No(e,r)},t.prototype.removeTargets=function(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)},t.prototype.markPotentiallyOrphaned=function(e,n){return No(e,n)},t.prototype._e=function(e,n){return function(r,i){var o=!1;return og(r).Ot(function(s){return ig(r,s,i).next(function(u){return u&&(o=!0),x.resolve(!u)})}).next(function(){return o})}(e,n)},t.prototype.removeOrphanedDocuments=function(e,n){var r=this,i=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[],s=0;return this.we(e,function(u,a){if(a<=n){var c=r._e(e,u).next(function(l){if(!l)return s++,i.getEntry(e,u).next(function(){return i.removeEntry(u),gn(e).delete([0,Pe(u.path)])})});o.push(c)}}).next(function(){return x.waitFor(o)}).next(function(){return i.apply(e)}).next(function(){return s})},t.prototype.removeTarget=function(e,n){var r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)},t.prototype.updateLimboDocument=function(e,n){return No(e,n)},t.prototype.we=function(e,n){var r,i=gn(e),o=ye.o;return i.$t({index:Ft.documentTargetsIndex},function(s,u){var a=s[0];s[1];var c=u.path,l=u.sequenceNumber;a===0?(o!==ye.o&&n(new B(Je(r)),o),o=l,r=c):o=ye.o}).next(function(){o!==ye.o&&n(new B(Je(r)),o)})},t.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},t}();function No(t,e){return gn(t).put(function(n,r){return new Ft(0,Pe(n.path),r)}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ri=function(){function t(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={}}return t.prototype.get=function(e){var n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0)for(var i=0,o=r;i<o.length;i++){var s=o[i],u=s[0],a=s[1];if(this.equalsFn(u,e))return a}},t.prototype.has=function(e){return this.get(e)!==void 0},t.prototype.set=function(e,n){var r=this.mapKeyFn(e),i=this.inner[r];if(i!==void 0){for(var o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n])}else this.inner[r]=[[e,n]]},t.prototype.delete=function(e){var n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),!0;return!1},t.prototype.forEach=function(e){ur(this.inner,function(n,r){for(var i=0,o=r;i<o.length;i++){var s=o[i],u=s[0],a=s[1];e(u,a)}})},t.prototype.isEmpty=function(){return wp(this.inner)},t}(),sg=function(){function t(){this.changes=new ri(function(e){return e.toString()},function(e,n){return e.isEqual(n)}),this.changesApplied=!1}return t.prototype.getReadTime=function(e){var n=this.changes.get(e);return n?n.readTime:J.min()},t.prototype.addEntry=function(e,n){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:n})},t.prototype.removeEntry=function(e,n){n===void 0&&(n=null),this.assertNotApplied(),this.changes.set(e,{document:Yt.newInvalidDocument(e),readTime:n})},t.prototype.getEntry=function(e,n){this.assertNotApplied();var r=this.changes.get(n);return r!==void 0?x.resolve(r.document):this.getFromCache(e,n)},t.prototype.getEntries=function(e,n){return this.getAllFromCache(e,n)},t.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},t.prototype.assertNotApplied=function(){},t}(),qb=function(){function t(e,n){this.R=e,this.Ut=n}return t.prototype.addEntry=function(e,n,r){return dn(e).put(xo(n),r)},t.prototype.removeEntry=function(e,n){var r=dn(e),i=xo(n);return r.delete(i)},t.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(i){return i.byteSize+=n,r.me(e,i)})},t.prototype.getEntry=function(e,n){var r=this;return dn(e).get(xo(n)).next(function(i){return r.ye(n,i)})},t.prototype.ge=function(e,n){var r=this;return dn(e).get(xo(n)).next(function(i){return{document:r.ye(n,i),size:fs(i)}})},t.prototype.getEntries=function(e,n){var r=this,i=ke();return this.pe(e,n,function(o,s){var u=r.ye(o,s);i=i.insert(o,u)}).next(function(){return i})},t.prototype.Ee=function(e,n){var r=this,i=ke(),o=new Xt(B.comparator);return this.pe(e,n,function(s,u){var a=r.ye(s,u);i=i.insert(s,a),o=o.insert(s,fs(u))}).next(function(){return{documents:i,Te:o}})},t.prototype.pe=function(e,n,r){if(n.isEmpty())return x.resolve();var i=IDBKeyRange.bound(n.first().path.toArray(),n.last().path.toArray()),o=n.getIterator(),s=o.getNext();return dn(e).$t({range:i},function(u,a,c){for(var l=B.fromSegments(u);s&&B.comparator(s,l)<0;)r(s,null),s=o.getNext();s&&s.isEqual(l)&&(r(s,a),s=o.hasNext()?o.getNext():null),s?c.Ct(s.path.toArray()):c.done()}).next(function(){for(;s;)r(s,null),s=o.hasNext()?o.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(e,n,r){var i=this,o=ke(),s=n.path.length+1,u={};if(r.isEqual(J.min())){var a=n.path.toArray();u.range=IDBKeyRange.lowerBound(a)}else{var c=n.path.toArray(),l=Nc(r);u.range=IDBKeyRange.lowerBound([c,l],!0),u.index=Et.collectionReadTimeIndex}return dn(e).$t(u,function(f,h,d){if(f.length===s){var g=ga(i.R,h);n.path.isPrefixOf(g.key.path)?io(n,g)&&(o=o.insert(g.key,g)):d.done()}}).next(function(){return o})},t.prototype.newChangeBuffer=function(e){return new Kb(this,!!e&&e.trackRemovals)},t.prototype.getSize=function(e){return this.getMetadata(e).next(function(n){return n.byteSize})},t.prototype.getMetadata=function(e){return Lf(e).get($e.key).next(function(n){return H(!!n),n})},t.prototype.me=function(e,n){return Lf(e).put($e.key,n)},t.prototype.ye=function(e,n){if(n){var r=ga(this.R,n);if(!r.isNoDocument()||!r.version.isEqual(J.min()))return r}return Yt.newInvalidDocument(e)},t}(),Kb=function(t){function e(n,r){var i=this;return(i=t.call(this)||this).Ie=n,i.trackRemovals=r,i.Ae=new ri(function(o){return o.toString()},function(o,s){return o.isEqual(s)}),i}return $(e,t),e.prototype.applyChanges=function(n){var r=this,i=[],o=0,s=new Ot(function(u,a){return et(u.canonicalString(),a.canonicalString())});return this.changes.forEach(function(u,a){var c=r.Ae.get(u);if(a.document.isValidDocument()){var l=Nf(r.Ie.R,a.document,r.getReadTime(u));s=s.add(u.path.popLast());var f=fs(l);o+=f-c,i.push(r.Ie.addEntry(n,u,l))}else if(o-=c,r.trackRemovals){var h=Nf(r.Ie.R,Yt.newNoDocument(u,J.min()),r.getReadTime(u));i.push(r.Ie.addEntry(n,u,h))}else i.push(r.Ie.removeEntry(n,u))}),s.forEach(function(u){i.push(r.Ie.Ut.addToCollectionParentIndex(n,u))}),i.push(this.Ie.updateMetadata(n,o)),x.waitFor(i)},e.prototype.getFromCache=function(n,r){var i=this;return this.Ie.ge(n,r).next(function(o){return i.Ae.set(r,o.size),o.document})},e.prototype.getAllFromCache=function(n,r){var i=this;return this.Ie.Ee(n,r).next(function(o){var s=o.documents;return o.Te.forEach(function(u,a){i.Ae.set(u,a)}),s})},e}(sg);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(t){return le(t,$e.store)}function dn(t){return le(t,Et.store)}function xo(t){return t.path.toArray()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $b=function(){function t(e){this.R=e}return t.prototype.Rt=function(e,n,r,i){var o=this;H(r<i&&r>=0&&i<=11);var s=new Jp("createOrUpgrade",n);r<1&&i>=1&&(function(a){a.createObjectStore(de.store)}(e),function(a){a.createObjectStore(bn.store,{keyPath:bn.keyPath}),a.createObjectStore(gt.store,{keyPath:gt.keyPath,autoIncrement:!0}).createIndex(gt.userMutationsIndex,gt.userMutationsKeyPath,{unique:!0}),a.createObjectStore(Kt.store)}(e),Mf(e),function(a){a.createObjectStore(Et.store)}(e));var u=x.resolve();return r<3&&i>=3&&(r!==0&&(function(a){a.deleteObjectStore(Ft.store),a.deleteObjectStore(se.store),a.deleteObjectStore(pe.store)}(e),Mf(e)),u=u.next(function(){return function(a){var c=a.store(pe.store),l=new pe(0,0,J.min().toTimestamp(),0);return c.put(pe.key,l)}(s)})),r<4&&i>=4&&(r!==0&&(u=u.next(function(){return function(a,c){return c.store(gt.store).Nt().next(function(l){a.deleteObjectStore(gt.store),a.createObjectStore(gt.store,{keyPath:gt.keyPath,autoIncrement:!0}).createIndex(gt.userMutationsIndex,gt.userMutationsKeyPath,{unique:!0});var f=c.store(gt.store),h=l.map(function(d){return f.put(d)});return x.waitFor(h)})}(e,s)})),u=u.next(function(){(function(a){a.createObjectStore(en.store,{keyPath:en.keyPath})})(e)})),r<5&&i>=5&&(u=u.next(function(){return o.Re(s)})),r<6&&i>=6&&(u=u.next(function(){return function(a){a.createObjectStore($e.store)}(e),o.be(s)})),r<7&&i>=7&&(u=u.next(function(){return o.ve(s)})),r<8&&i>=8&&(u=u.next(function(){return o.Pe(e,s)})),r<9&&i>=9&&(u=u.next(function(){(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e),function(a){var c=a.objectStore(Et.store);c.createIndex(Et.readTimeIndex,Et.readTimeIndexPath,{unique:!1}),c.createIndex(Et.collectionReadTimeIndex,Et.collectionReadTimeIndexPath,{unique:!1})}(n)})),r<10&&i>=10&&(u=u.next(function(){return o.Ve(s)})),r<11&&i>=11&&(u=u.next(function(){(function(a){a.createObjectStore(Br.store,{keyPath:Br.keyPath})})(e),function(a){a.createObjectStore(qr.store,{keyPath:qr.keyPath})}(e)})),u},t.prototype.be=function(e){var n=0;return e.store(Et.store).$t(function(r,i){n+=fs(i)}).next(function(){var r=new $e(n);return e.store($e.store).put($e.key,r)})},t.prototype.Re=function(e){var n=this,r=e.store(bn.store),i=e.store(gt.store);return r.Nt().next(function(o){return x.forEach(o,function(s){var u=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.Nt(gt.userMutationsIndex,u).next(function(a){return x.forEach(a,function(c){H(c.userId===s.userId);var l=br(n.R,c);return rg(e,s.userId,l).next(function(){})})})})})},t.prototype.ve=function(e){var n=e.store(Ft.store),r=e.store(Et.store);return e.store(pe.store).get(pe.key).next(function(i){var o=[];return r.$t(function(s,u){var a=new ot(s),c=function(l){return[0,Pe(l)]}(a);o.push(n.get(c).next(function(l){return l?x.resolve():function(f){return n.put(new Ft(0,Pe(f),i.highestListenSequenceNumber))}(a)}))}).next(function(){return x.waitFor(o)})})},t.prototype.Pe=function(e,n){e.createObjectStore(Yn.store,{keyPath:Yn.keyPath});var r=n.store(Yn.store),i=new xc,o=function(s){if(i.add(s)){var u=s.lastSegment(),a=s.popLast();return r.put({collectionId:u,parent:Pe(a)})}};return n.store(Et.store).$t({Ft:!0},function(s,u){var a=new ot(s);return o(a.popLast())}).next(function(){return n.store(Kt.store).$t({Ft:!0},function(s,u){s[0];var a=s[1];s[2];var c=Je(a);return o(c.popLast())})})},t.prototype.Ve=function(e){var n=this,r=e.store(se.store);return r.$t(function(i,o){var s=pi(o),u=eg(n.R,s);return r.put(u)})},t}();function Mf(t){t.createObjectStore(Ft.store,{keyPath:Ft.keyPath}).createIndex(Ft.documentTargetsIndex,Ft.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(se.store,{keyPath:se.keyPath}).createIndex(se.queryTargetsIndexName,se.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(pe.store)}var Ou="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",zb=function(){function t(e,n,r,i,o,s,u,a,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=u,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(f){return Promise.resolve()},!t.yt())throw new A(m.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Bb(this,i),this.Le=n+"main",this.R=new Zp(a),this.Be=new Kr(this.Le,11,new $b(this.R)),this.qe=new Fb(this.referenceDelegate,this.R),this.Ut=new Lb,this.Ue=function(f,h){return new qb(f,h)}(this.R,this.Ut),this.Ke=new kb,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,l===!1&&Ct("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var e=this;return this.je().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new A(m.FAILED_PRECONDITION,Ou);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(n){return e.qe.getHighestSequenceNumber(n)})}).then(function(n){e.Ne=new ye(n,e.De)}).then(function(){e.xe=!0}).catch(function(n){return e.Be&&e.Be.close(),Promise.reject(n)})},t.prototype.He=function(e){var n=this;return this.Me=function(r){return I(n,void 0,void 0,function(){return E(this,function(i){return this.started?[2,e(r)]:[2]})})},e(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(e){var n=this;this.Be.vt(function(r){return I(n,void 0,void 0,function(){return E(this,function(i){switch(i.label){case 0:return r.newVersion===null?[4,e()]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Se.enqueueAndForget(function(){return I(n,void 0,void 0,function(){return E(this,function(r){switch(r.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(n){return Do(n).put(new en(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next(function(){if(e.isPrimary)return e.Je(n).next(function(r){r||(e.isPrimary=!1,e.Se.enqueueRetryable(function(){return e.Me(!1)}))})}).next(function(){return e.Ye(n)}).next(function(r){return e.isPrimary&&!r?e.Xe(n).next(function(){return!1}):!!r&&e.Ze(n).next(function(){return!0})})}).catch(function(n){if(cr(n))return D("IndexedDbPersistence","Failed to extend owner lease: ",n),e.isPrimary;if(!e.allowTabSynchronization)throw n;return D("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(function(n){e.isPrimary!==n&&e.Se.enqueueRetryable(function(){return e.Me(n)}),e.isPrimary=n})},t.prototype.Je=function(e){var n=this;return fi(e).get(de.key).next(function(r){return x.resolve(n.tn(r))})},t.prototype.en=function(e){return Do(e).delete(this.clientId)},t.prototype.nn=function(){return I(this,void 0,void 0,function(){var e,n,r,i,o=this;return E(this,function(s){switch(s.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(u){var a=le(u,en.store);return a.Nt().next(function(c){var l=o.rn(c,18e5),f=c.filter(function(h){return l.indexOf(h)===-1});return x.forEach(f,function(h){return a.delete(h.clientId)}).next(function(){return f})})}).catch(function(){return[]})]);case 1:if(e=s.sent(),this.Qe)for(n=0,r=e;n<r.length;n++)i=r[n],this.Qe.removeItem(this.on(i.clientId));s.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var e=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return e.je().then(function(){return e.nn()}).then(function(){return e.ze()})})},t.prototype.tn=function(e){return!!e&&e.ownerId===this.clientId},t.prototype.Ye=function(e){var n=this;return this.Ce?x.resolve(!0):fi(e).get(de.key).next(function(r){if(r!==null&&n.sn(r.leaseTimestampMs,5e3)&&!n.cn(r.ownerId)){if(n.tn(r)&&n.networkEnabled)return!0;if(!n.tn(r)){if(!r.allowTabSynchronization)throw new A(m.FAILED_PRECONDITION,Ou);return!1}}return!(!n.networkEnabled||!n.inForeground)||Do(e).Nt().next(function(i){return n.rn(i,5e3).find(function(o){if(n.clientId!==o.clientId){var s=!n.networkEnabled&&o.networkEnabled,u=!n.inForeground&&o.inForeground,a=n.networkEnabled===o.networkEnabled;if(s||u&&a)return!0}return!1})===void 0})}).next(function(r){return n.isPrimary!==r&&D("IndexedDbPersistence","Client "+(r?"is":"is not")+" eligible for a primary lease."),r})},t.prototype.shutdown=function(){return I(this,void 0,void 0,function(){var e=this;return E(this,function(n){switch(n.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[de.store,en.store],function(r){var i=new Cf(r,ye.o);return e.Xe(i).next(function(){return e.en(i)})})];case 1:return n.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(e,n){var r=this;return e.filter(function(i){return r.sn(i.updateTimeMs,n)&&!r.cn(i.clientId)})},t.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(n){return Do(n).Nt().next(function(r){return e.rn(r,18e5).map(function(i){return i.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(e){return Mb.Qt(e,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(e,n,r){var i=this;D("IndexedDbPersistence","Starting transaction:",e);var o,s=n==="readonly"?"readonly":"readwrite";return this.Be.runTransaction(e,s,xb,function(u){return o=new Cf(u,i.Ne?i.Ne.next():ye.o),n==="readwrite-primary"?i.Je(o).next(function(a){return!!a||i.Ye(o)}).next(function(a){if(!a)throw Ct("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new A(m.FAILED_PRECONDITION,Yp);return r(o)}).next(function(a){return i.Ze(o).next(function(){return a})}):i.dn(o).next(function(){return r(o)})}).then(function(u){return o.raiseOnCommittedEvent(),u})},t.prototype.dn=function(e){var n=this;return fi(e).get(de.key).next(function(r){if(r!==null&&n.sn(r.leaseTimestampMs,5e3)&&!n.cn(r.ownerId)&&!n.tn(r)&&!(n.Ce||n.allowTabSynchronization&&r.allowTabSynchronization))throw new A(m.FAILED_PRECONDITION,Ou)})},t.prototype.Ze=function(e){var n=new de(this.clientId,this.allowTabSynchronization,Date.now());return fi(e).put(de.key,n)},t.yt=function(){return Kr.yt()},t.prototype.Xe=function(e){var n=this,r=fi(e);return r.get(de.key).next(function(i){return n.tn(i)?(D("IndexedDbPersistence","Releasing primary lease."),r.delete(de.key)):x.resolve()})},t.prototype.sn=function(e,n){var r=Date.now();return!(e<r-n||e>r&&(Ct("Detected an update time that is in the future: "+e+" > "+r),1))},t.prototype.We=function(){var e=this;this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Fe=function(){e.Se.enqueueAndForget(function(){return e.inForeground=e.document.visibilityState==="visible",e.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground=this.document.visibilityState==="visible")},t.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},t.prototype.Ge=function(){var e,n=this;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ke=function(){n.un(),Xm()&&navigator.appVersion.match("Version/14")&&n.Se.enterRestrictedMode(!0),n.Se.enqueueAndForget(function(){return n.shutdown()})},this.window.addEventListener("pagehide",this.ke))},t.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},t.prototype.cn=function(e){var n;try{var r=((n=this.Qe)===null||n===void 0?void 0:n.getItem(this.on(e)))!==null;return D("IndexedDbPersistence","Client '"+e+"' "+(r?"is":"is not")+" zombied in LocalStorage"),r}catch(i){return Ct("IndexedDbPersistence","Failed to get zombied client id.",i),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(e){Ct("Failed to set zombie client id.",e)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch{}},t.prototype.on=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},t}();function fi(t){return le(t,de.store)}function Do(t){return le(t,en.store)}function Dc(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var ug=function(){function t(e,n,r){this.Ue=e,this._n=n,this.Ut=r}return t.prototype.mn=function(e,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,n).next(function(i){return r.yn(e,n,i)})},t.prototype.yn=function(e,n,r){return this.Ue.getEntry(e,n).next(function(i){for(var o=0,s=r;o<s.length;o++)s[o].applyToLocalView(i);return i})},t.prototype.gn=function(e,n){e.forEach(function(r,i){for(var o=0,s=n;o<s.length;o++)s[o].applyToLocalView(i)})},t.prototype.pn=function(e,n){var r=this;return this.Ue.getEntries(e,n).next(function(i){return r.En(e,i).next(function(){return i})})},t.prototype.En=function(e,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(e,n).next(function(i){return r.gn(n,i)})},t.prototype.getDocumentsMatchingQuery=function(e,n,r){return function(i){return B.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.Tn(e,n.path):_c(n)?this.In(e,n,r):this.An(e,n,r)},t.prototype.Tn=function(e,n){return this.mn(e,new B(n)).next(function(r){var i=da();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})},t.prototype.In=function(e,n,r){var i=this,o=n.collectionGroup,s=da();return this.Ut.getCollectionParents(e,o).next(function(u){return x.forEach(u,function(a){var c=function(l,f){return new un(f,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(n,a.child(o));return i.An(e,c,r).next(function(l){l.forEach(function(f,h){s=s.insert(f,h)})})}).next(function(){return s})})},t.prototype.An=function(e,n,r){var i,o,s=this;return this.Ue.getDocumentsMatchingQuery(e,n,r).next(function(u){return i=u,s._n.getAllMutationBatchesAffectingQuery(e,n)}).next(function(u){return o=u,s.Rn(e,o,i).next(function(a){i=a;for(var c=0,l=o;c<l.length;c++)for(var f=l[c],h=0,d=f.mutations;h<d.length;h++){var g=d[h],y=g.key,w=i.get(y);w==null&&(w=Yt.newInvalidDocument(y),i=i.insert(y,w)),ha(g,w,f.localWriteTime),w.isFoundDocument()||(i=i.remove(y))}})}).next(function(){return i.forEach(function(u,a){io(n,a)||(i=i.remove(u))}),i})},t.prototype.Rn=function(e,n,r){for(var i=dt(),o=0,s=n;o<s.length;o++)for(var u=0,a=s[o].mutations;u<a.length;u++){var c=a[u];c instanceof Nn&&r.get(c.key)===null&&(i=i.add(c.key))}var l=r;return this.Ue.getEntries(e,i).next(function(f){return f.forEach(function(h,d){d.isFoundDocument()&&(l=l.insert(h,d))}),l})},t}(),Hb=function(){function t(e,n,r,i){this.targetId=e,this.fromCache=n,this.bn=r,this.vn=i}return t.Pn=function(e,n){for(var r=dt(),i=dt(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),ag=function(){function t(){}return t.prototype.Vn=function(e){this.Sn=e},t.prototype.getDocumentsMatchingQuery=function(e,n,r,i){var o=this;return function(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}(n)||r.isEqual(J.min())?this.Dn(e,n):this.Sn.pn(e,i).next(function(s){var u=o.Cn(n,s);return(Uo(n)||cs(n))&&o.Nn(n.limitType,u,i,r)?o.Dn(e,n):(aa()<=it.DEBUG&&D("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),fa(n)),o.Sn.getDocumentsMatchingQuery(e,n,r).next(function(a){return u.forEach(function(c){a=a.insert(c.key,c)}),a}))})},t.prototype.Cn=function(e,n){var r=new Ot(Np(e));return n.forEach(function(i,o){io(e,o)&&(r=r.add(o))}),r},t.prototype.Nn=function(e,n,r,i){if(r.size!==n.size)return!0;var o=e==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)},t.prototype.Dn=function(e,n){return aa()<=it.DEBUG&&D("QueryEngine","Using full collection scan to execute query:",fa(n)),this.Sn.getDocumentsMatchingQuery(e,n,J.min())},t}(),Gb=function(){function t(e,n,r,i){this.persistence=e,this.xn=n,this.R=i,this.kn=new Xt(et),this.Fn=new ri(function(o){return eo(o)},Ws),this.$n=J.min(),this._n=e.getMutationQueue(r),this.On=e.getRemoteDocumentCache(),this.qe=e.getTargetCache(),this.Mn=new ug(this.On,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(r){return e.collect(r,n.kn)})},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(t,e,n,r){return new Gb(t,e,n,r)}function lg(t,e){return I(this,void 0,void 0,function(){var n,r,i,o;return E(this,function(s){switch(s.label){case 0:return n=L(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(u){var a;return n._n.getAllMutationBatches(u).next(function(c){return a=c,r=n.persistence.getMutationQueue(e),i=new ug(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(u)}).next(function(c){for(var l=[],f=[],h=dt(),d=0,g=a;d<g.length;d++){var y=g[d];l.push(y.batchId);for(var w=0,_=y.mutations;w<_.length;w++){var P=_[w];h=h.add(P.key)}}for(var T=0,U=c;T<U.length;T++){var z=U[T];f.push(z.batchId);for(var Z=0,lt=z.mutations;Z<lt.length;Z++){var Y=lt[Z];h=h.add(Y.key)}}return i.pn(u,h).next(function(vt){return{Ln:vt,removedBatchIds:l,addedBatchIds:f}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function Wb(t,e){var n=L(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(r){var i=e.batch.keys(),o=n.On.newChangeBuffer({trackRemovals:!0});return function(s,u,a,c){var l=a.batch,f=l.keys(),h=x.resolve();return f.forEach(function(d){h=h.next(function(){return c.getEntry(u,d)}).next(function(g){var y=a.docVersions.get(d);H(y!==null),g.version.compareTo(y)<0&&(l.applyToRemoteDocument(g,a),g.isValidDocument()&&c.addEntry(g,a.commitVersion))})}),h.next(function(){return s._n.removeMutationBatch(u,l)})}(n,r,e,o).next(function(){return o.apply(r)}).next(function(){return n._n.performConsistencyCheck(r)}).next(function(){return n.Mn.pn(r,i)})})}function fg(t){var e=L(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(n){return e.qe.getLastRemoteSnapshotVersion(n)})}function Qb(t,e){var n=L(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var s=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var u=[];e.targetChanges.forEach(function(l,f){var h=i.get(f);if(h){u.push(n.qe.removeMatchingKeys(o,l.removedDocuments,f).next(function(){return n.qe.addMatchingKeys(o,l.addedDocuments,f)}));var d=l.resumeToken;if(d.approximateByteSize()>0){var g=h.withResumeToken(d,r).withSequenceNumber(o.currentSequenceNumber);i=i.insert(f,g),function(y,w,_){return H(w.resumeToken.approximateByteSize()>0),y.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8||_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(h,g,l)&&u.push(n.qe.updateTargetData(o,g))}}});var a=ke();if(e.documentUpdates.forEach(function(l,f){e.resolvedLimboDocuments.has(l)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,l))}),u.push(Yb(o,s,e.documentUpdates,r,void 0).next(function(l){a=l})),!r.isEqual(J.min())){var c=n.qe.getLastRemoteSnapshotVersion(o).next(function(l){return n.qe.setTargetsMetadata(o,o.currentSequenceNumber,r)});u.push(c)}return x.waitFor(u).next(function(){return s.apply(o)}).next(function(){return n.Mn.En(o,a)}).next(function(){return a})}).then(function(o){return n.kn=i,o})}function Yb(t,e,n,r,i){var o=dt();return n.forEach(function(s){return o=o.add(s)}),e.getEntries(t,o).next(function(s){var u=ke();return n.forEach(function(a,c){var l=s.get(a),f=(i==null?void 0:i.get(a))||r;c.isNoDocument()&&c.version.isEqual(J.min())?(e.removeEntry(a,f),u=u.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c,f),u=u.insert(a,c)):D("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),u})}function Xb(t,e){var n=L(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(r){return e===void 0&&(e=-1),n._n.getNextMutationBatchAfterBatchId(r,e)})}function ds(t,e){var n=L(t);return n.persistence.runTransaction("Allocate target","readwrite",function(r){var i;return n.qe.getTargetData(r,e).next(function(o){return o?(i=o,x.resolve(i)):n.qe.allocateTargetId(r).next(function(s){return i=new Js(e,s,0,r.currentSequenceNumber),n.qe.addTargetData(r,i).next(function(){return i})})})}).then(function(r){var i=n.kn.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.kn=n.kn.insert(r.targetId,r),n.Fn.set(e,r.targetId)),r})}function Hr(t,e,n){return I(this,void 0,void 0,function(){var r,i,o,s;return E(this,function(u){switch(u.label){case 0:r=L(t),i=r.kn.get(e),o=n?"readwrite":"readwrite-primary",u.label=1;case 1:return u.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(a){return r.persistence.referenceDelegate.removeTarget(a,i)})];case 2:u.sent(),u.label=3;case 3:return[3,5];case 4:if(!cr(s=u.sent()))throw s;return D("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.kn=r.kn.remove(e),r.Fn.delete(i.target),[2]}})})}function ps(t,e,n){var r=L(t),i=J.min(),o=dt();return r.persistence.runTransaction("Execute query","readonly",function(s){return function(u,a,c){var l=L(u),f=l.Fn.get(c);return f!==void 0?x.resolve(l.kn.get(f)):l.qe.getTargetData(a,c)}(r,s,Ge(e)).next(function(u){if(u)return i=u.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(s,u.targetId).next(function(a){o=a})}).next(function(){return r.xn.getDocumentsMatchingQuery(s,e,n?i:J.min(),n?o:dt())}).next(function(u){return{documents:u,Bn:o}})})}function hg(t,e){var n=L(t),r=L(n.qe),i=n.kn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(o){return r.lt(o,e).next(function(s){return s?s.target:null})})}function dg(t){var e=L(t);return e.persistence.runTransaction("Get new document changes","readonly",function(n){return function(r,i,o){var s=L(r),u=ke(),a=Nc(o),c=dn(i),l=IDBKeyRange.lowerBound(a,!0);return c.$t({index:Et.readTimeIndex,range:l},function(f,h){var d=ga(s.R,h);u=u.insert(d.key,d),a=h.readTime}).next(function(){return{wn:u,readTime:tg(a)}})}(e.On,n,e.$n)}).then(function(n){var r=n.wn,i=n.readTime;return e.$n=i,r})}function Jb(t){return I(this,void 0,void 0,function(){var e;return E(this,function(n){return[2,(e=L(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(r){return function(i){var o=dn(i),s=J.min();return o.$t({index:Et.readTimeIndex,reverse:!0},function(u,a,c){a.readTime&&(s=tg(a.readTime)),c.done()}).next(function(){return s})}(r)}).then(function(r){e.$n=r})]})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zb=function(){function t(e){this.R=e,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(e,n){return x.resolve(this.Qn.get(n))},t.prototype.saveBundleMetadata=function(e,n){var r;return this.Qn.set(n.id,{id:(r=n).id,version:r.version,createTime:ie(r.createTime)}),x.resolve()},t.prototype.getNamedQuery=function(e,n){return x.resolve(this.jn.get(n))},t.prototype.saveNamedQuery=function(e,n){return this.jn.set(n.name,function(r){return{name:r.name,query:ng(r.bundledQuery),readTime:ie(r.readTime)}}(n)),x.resolve()},t}(),Oc=function(){function t(){this.Wn=new Ot(kt.Gn),this.zn=new Ot(kt.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(e,n){var r=new kt(e,n);this.Wn=this.Wn.add(r),this.zn=this.zn.add(r)},t.prototype.Jn=function(e,n){var r=this;e.forEach(function(i){return r.addReference(i,n)})},t.prototype.removeReference=function(e,n){this.Yn(new kt(e,n))},t.prototype.Xn=function(e,n){var r=this;e.forEach(function(i){return r.removeReference(i,n)})},t.prototype.Zn=function(e){var n=this,r=new B(new ot([])),i=new kt(r,e),o=new kt(r,e+1),s=[];return this.zn.forEachInRange([i,o],function(u){n.Yn(u),s.push(u.key)}),s},t.prototype.ts=function(){var e=this;this.Wn.forEach(function(n){return e.Yn(n)})},t.prototype.Yn=function(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)},t.prototype.es=function(e){var n=new B(new ot([])),r=new kt(n,e),i=new kt(n,e+1),o=dt();return this.zn.forEachInRange([r,i],function(s){o=o.add(s.key)}),o},t.prototype.containsKey=function(e){var n=new kt(e,0),r=this.Wn.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)},t}(),kt=function(){function t(e,n){this.key=e,this.ns=n}return t.Gn=function(e,n){return B.comparator(e.key,n.key)||et(e.ns,n.ns)},t.Hn=function(e,n){return et(e.ns,n.ns)||B.comparator(e.key,n.key)},t}(),t_=function(){function t(e,n){this.Ut=e,this.referenceDelegate=n,this._n=[],this.ss=1,this.rs=new Ot(kt.Gn)}return t.prototype.checkEmpty=function(e){return x.resolve(this._n.length===0)},t.prototype.addMutationBatch=function(e,n,r,i){var o=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var s=new Cc(o,n,r,i);this._n.push(s);for(var u=0,a=i;u<a.length;u++){var c=a[u];this.rs=this.rs.add(new kt(c.key,o)),this.Ut.addToCollectionParentIndex(e,c.key.path.popLast())}return x.resolve(s)},t.prototype.lookupMutationBatch=function(e,n){return x.resolve(this.os(n))},t.prototype.getNextMutationBatchAfterBatchId=function(e,n){var r=n+1,i=this.cs(r),o=i<0?0:i;return x.resolve(this._n.length>o?this._n[o]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return x.resolve(this._n.length===0?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(e){return x.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,n){var r=this,i=new kt(n,0),o=new kt(n,Number.POSITIVE_INFINITY),s=[];return this.rs.forEachInRange([i,o],function(u){var a=r.os(u.ns);s.push(a)}),x.resolve(s)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,n){var r=this,i=new Ot(et);return n.forEach(function(o){var s=new kt(o,0),u=new kt(o,Number.POSITIVE_INFINITY);r.rs.forEachInRange([s,u],function(a){i=i.add(a.ns)})}),x.resolve(this.us(i))},t.prototype.getAllMutationBatchesAffectingQuery=function(e,n){var r=n.path,i=r.length+1,o=r;B.isDocumentKey(o)||(o=o.child(""));var s=new kt(new B(o),0),u=new Ot(et);return this.rs.forEachWhile(function(a){var c=a.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(u=u.add(a.ns)),!0)},s),x.resolve(this.us(u))},t.prototype.us=function(e){var n=this,r=[];return e.forEach(function(i){var o=n.os(i);o!==null&&r.push(o)}),r},t.prototype.removeMutationBatch=function(e,n){var r=this;H(this.hs(n.batchId,"removed")===0),this._n.shift();var i=this.rs;return x.forEach(n.mutations,function(o){var s=new kt(o.key,n.batchId);return i=i.delete(s),r.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(function(){r.rs=i})},t.prototype.Gt=function(e){},t.prototype.containsKey=function(e,n){var r=new kt(n,0),i=this.rs.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))},t.prototype.performConsistencyCheck=function(e){return this._n.length,x.resolve()},t.prototype.hs=function(e,n){return this.cs(e)},t.prototype.cs=function(e){return this._n.length===0?0:e-this._n[0].batchId},t.prototype.os=function(e){var n=this.cs(e);return n<0||n>=this._n.length?null:this._n[n]},t}(),e_=function(){function t(e,n){this.Ut=e,this.ls=n,this.docs=new Xt(B.comparator),this.size=0}return t.prototype.addEntry=function(e,n,r){var i=n.key,o=this.docs.get(i),s=o?o.size:0,u=this.ls(n);return this.docs=this.docs.insert(i,{document:n.clone(),size:u,readTime:r}),this.size+=u-s,this.Ut.addToCollectionParentIndex(e,i.path.popLast())},t.prototype.removeEntry=function(e){var n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)},t.prototype.getEntry=function(e,n){var r=this.docs.get(n);return x.resolve(r?r.document.clone():Yt.newInvalidDocument(n))},t.prototype.getEntries=function(e,n){var r=this,i=ke();return n.forEach(function(o){var s=r.docs.get(o);i=i.insert(o,s?s.document.clone():Yt.newInvalidDocument(o))}),x.resolve(i)},t.prototype.getDocumentsMatchingQuery=function(e,n,r){for(var i=ke(),o=new B(n.path.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),a=u.key,c=u.value,l=c.document,f=c.readTime;if(!n.path.isPrefixOf(a.path))break;f.compareTo(r)<=0||io(n,l)&&(i=i.insert(l.key,l.clone()))}return x.resolve(i)},t.prototype.fs=function(e,n){return x.forEach(this.docs,function(r){return n(r)})},t.prototype.newChangeBuffer=function(e){return new n_(this)},t.prototype.getSize=function(e){return x.resolve(this.size)},t}(),n_=function(t){function e(n){var r=this;return(r=t.call(this)||this).Ie=n,r}return $(e,t),e.prototype.applyChanges=function(n){var r=this,i=[];return this.changes.forEach(function(o,s){s.document.isValidDocument()?i.push(r.Ie.addEntry(n,s.document,r.getReadTime(o))):r.Ie.removeEntry(o)}),x.waitFor(i)},e.prototype.getFromCache=function(n,r){return this.Ie.getEntry(n,r)},e.prototype.getAllFromCache=function(n,r){return this.Ie.getEntries(n,r)},e}(sg),r_=function(){function t(e){this.persistence=e,this.ds=new ri(function(n){return eo(n)},Ws),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.ws=0,this._s=new Oc,this.targetCount=0,this.ys=hs.Jt()}return t.prototype.forEachTarget=function(e,n){return this.ds.forEach(function(r,i){return n(i)}),x.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(e){return x.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(e){return x.resolve(this.ws)},t.prototype.allocateTargetId=function(e){return this.highestTargetId=this.ys.next(),x.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ws&&(this.ws=n),x.resolve()},t.prototype.te=function(e){this.ds.set(e.target,e);var n=e.targetId;n>this.highestTargetId&&(this.ys=new hs(n),this.highestTargetId=n),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)},t.prototype.addTargetData=function(e,n){return this.te(n),this.targetCount+=1,x.resolve()},t.prototype.updateTargetData=function(e,n){return this.te(n),x.resolve()},t.prototype.removeTargetData=function(e,n){return this.ds.delete(n.target),this._s.Zn(n.targetId),this.targetCount-=1,x.resolve()},t.prototype.removeTargets=function(e,n,r){var i=this,o=0,s=[];return this.ds.forEach(function(u,a){a.sequenceNumber<=n&&r.get(a.targetId)===null&&(i.ds.delete(u),s.push(i.removeMatchingKeysForTargetId(e,a.targetId)),o++)}),x.waitFor(s).next(function(){return o})},t.prototype.getTargetCount=function(e){return x.resolve(this.targetCount)},t.prototype.getTargetData=function(e,n){var r=this.ds.get(n)||null;return x.resolve(r)},t.prototype.addMatchingKeys=function(e,n,r){return this._s.Jn(n,r),x.resolve()},t.prototype.removeMatchingKeys=function(e,n,r){this._s.Xn(n,r);var i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(function(s){o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)},t.prototype.removeMatchingKeysForTargetId=function(e,n){return this._s.Zn(n),x.resolve()},t.prototype.getMatchingKeysForTargetId=function(e,n){var r=this._s.es(n);return x.resolve(r)},t.prototype.containsKey=function(e,n){return x.resolve(this._s.containsKey(n))},t}(),i_=function(){function t(e,n){var r=this;this.gs={},this.Ne=new ye(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.qe=new r_(this),this.Ut=new Pb,this.Ue=function(i,o){return new e_(i,function(s){return r.referenceDelegate.ps(s)})}(this.Ut),this.R=new Zp(n),this.Ke=new Zb(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(e){var n=this.gs[e.toKey()];return n||(n=new t_(this.Ut,this.referenceDelegate),this.gs[e.toKey()]=n),n},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(e,n,r){var i=this;D("MemoryPersistence","Starting transaction:",e);var o=new o_(this.Ne.next());return this.referenceDelegate.Es(),r(o).next(function(s){return i.referenceDelegate.Ts(o).next(function(){return s})}).toPromise().then(function(s){return o.raiseOnCommittedEvent(),s})},t.prototype.Is=function(e,n){return x.or(Object.values(this.gs).map(function(r){return function(){return r.containsKey(e,n)}}))},t}(),o_=function(t){function e(n){var r=this;return(r=t.call(this)||this).currentSequenceNumber=n,r}return $(e,t),e}(Xp),s_=function(){function t(e){this.persistence=e,this.As=new Oc,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw j()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(e,n,r){return this.As.addReference(r,n),this.vs.delete(r.toString()),x.resolve()},t.prototype.removeReference=function(e,n,r){return this.As.removeReference(r,n),this.vs.add(r.toString()),x.resolve()},t.prototype.markPotentiallyOrphaned=function(e,n){return this.vs.add(n.toString()),x.resolve()},t.prototype.removeTarget=function(e,n){var r=this;this.As.Zn(n.targetId).forEach(function(o){return r.vs.add(o.toString())});var i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(function(o){o.forEach(function(s){return r.vs.add(s.toString())})}).next(function(){return i.removeTargetData(e,n)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(e){var n=this,r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.vs,function(i){var o=B.fromPath(i);return n.Ps(e,o).next(function(s){s||r.removeEntry(o)})}).next(function(){return n.Rs=null,r.apply(e)})},t.prototype.updateLimboDocument=function(e,n){var r=this;return this.Ps(e,n).next(function(i){i?r.vs.delete(n.toString()):r.vs.add(n.toString())})},t.prototype.ps=function(e){return 0},t.prototype.Ps=function(e,n){var r=this;return x.or([function(){return x.resolve(r.As.containsKey(n))},function(){return r.persistence.getTargetCache().containsKey(e,n)},function(){return r.persistence.Is(e,n)}])},t}(),Lt=function(){function t(e){this.uid=e}return t.prototype.isAuthenticated=function(){return this.uid!=null},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(e){return e.uid===this.uid},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(t,e){return"firestore_clients_"+t+"_"+e}function Uf(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Ru(t,e){return"firestore_targets_"+t+"_"+e}Lt.UNAUTHENTICATED=new Lt(null),Lt.GOOGLE_CREDENTIALS=new Lt("google-credentials-uid"),Lt.FIRST_PARTY=new Lt("first-party-uid"),Lt.MOCK_USER=new Lt("mock-user");var Vf=function(){function t(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s=typeof o=="object"&&["pending","acknowledged","rejected"].indexOf(o.state)!==-1&&(o.error===void 0||typeof o.error=="object");return s&&o.error&&(s=typeof o.error.message=="string"&&typeof o.error.code=="string")&&(i=new A(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Ct("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},t}(),ku=function(){function t(e,n,r){this.targetId=e,this.state=n,this.error=r}return t.Vs=function(e,n){var r,i=JSON.parse(n),o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string")&&(r=new A(i.error.code,i.error.message)),o?new t(e,i.state,r):(Ct("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},t}(),jf=function(){function t(e,n){this.clientId=e,this.activeTargetIds=n}return t.Vs=function(e,n){for(var r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Xs(),s=0;i&&s<r.activeTargetIds.length;++s)i=Ep(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Ct("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),u_=function(){function t(e,n){this.clientId=e,this.onlineState=n}return t.Vs=function(e){var n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Ct("SharedClientState","Failed to parse online state: "+e),null)},t}(),ya=function(){function t(){this.activeTargetIds=Xs()}return t.prototype.Ds=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},t.prototype.Cs=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},t.prototype.Ss=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},t}(),Pu=function(){function t(e,n,r,i,o){this.window=e,this.Se=n,this.persistenceKey=r,this.Ns=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Xt(et),this.started=!1,this.$s=[];var s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Os=Ff(this.persistenceKey,this.Ns),this.Ms=function(u){return"firestore_sequence_number_"+u}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new ya),this.Ls=new RegExp("^firestore_clients_"+s+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+s+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+s+"_(\\d+)$"),this.Us=function(u){return"firestore_online_state_"+u}(this.persistenceKey),this.Ks=function(u){return"firestore_bundle_loaded_"+u}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(e){return!(!e||!e.localStorage)},t.prototype.start=function(){return I(this,void 0,void 0,function(){var e,n,r,i,o,s,u,a,c,l,f,h=this;return E(this,function(d){switch(d.label){case 0:return[4,this.syncEngine.fn()];case 1:for(e=d.sent(),n=0,r=e;n<r.length;n++)(i=r[n])!==this.Ns&&(o=this.getItem(Ff(this.persistenceKey,i)))&&(s=jf.Vs(i,o))&&(this.Fs=this.Fs.insert(s.clientId,s));for(this.Qs(),(u=this.storage.getItem(this.Us))&&(a=this.js(u))&&this.Ws(a),c=0,l=this.$s;c<l.length;c++)f=l[c],this.ks(f);return this.$s=[],this.window.addEventListener("pagehide",function(){return h.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(e){this.setItem(this.Ms,JSON.stringify(e))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},t.prototype.isActiveQueryTarget=function(e){var n=!1;return this.Fs.forEach(function(r,i){i.activeTargetIds.has(e)&&(n=!0)}),n},t.prototype.addPendingMutation=function(e){this.zs(e,"pending")},t.prototype.updateMutationState=function(e,n,r){this.zs(e,n,r),this.Hs(e)},t.prototype.addLocalQueryTarget=function(e){var n="not-current";if(this.isActiveQueryTarget(e)){var r=this.storage.getItem(Ru(this.persistenceKey,e));if(r){var i=ku.Vs(e,r);i&&(n=i.state)}}return this.Js.Ds(e),this.Qs(),n},t.prototype.removeLocalQueryTarget=function(e){this.Js.Cs(e),this.Qs()},t.prototype.isLocalQueryTarget=function(e){return this.Js.activeTargetIds.has(e)},t.prototype.clearQueryState=function(e){this.removeItem(Ru(this.persistenceKey,e))},t.prototype.updateQueryState=function(e,n,r){this.Ys(e,n,r)},t.prototype.handleUserChange=function(e,n,r){var i=this;n.forEach(function(o){i.Hs(o)}),this.currentUser=e,r.forEach(function(o){i.addPendingMutation(o)})},t.prototype.setOnlineState=function(e){this.Xs(e)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(e){var n=this.storage.getItem(e);return D("SharedClientState","READ",e,n),n},t.prototype.setItem=function(e,n){D("SharedClientState","SET",e,n),this.storage.setItem(e,n)},t.prototype.removeItem=function(e){D("SharedClientState","REMOVE",e),this.storage.removeItem(e)},t.prototype.ks=function(e){var n=this,r=e;if(r.storageArea===this.storage){if(D("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Os)return void Ct("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return I(n,void 0,void 0,function(){var i,o,s,u,a,c;return E(this,function(l){if(this.started){if(r.key!==null){if(this.Ls.test(r.key)){if(r.newValue==null)return i=this.ti(r.key),[2,this.ei(i,null)];if(o=this.ni(r.key,r.newValue))return[2,this.ei(o.clientId,o)]}else if(this.Bs.test(r.key)){if(r.newValue!==null&&(s=this.si(r.key,r.newValue)))return[2,this.ii(s)]}else if(this.qs.test(r.key)){if(r.newValue!==null&&(u=this.ri(r.key,r.newValue)))return[2,this.oi(u)]}else if(r.key===this.Us){if(r.newValue!==null&&(a=this.js(r.newValue)))return[2,this.Ws(a)]}else if(r.key===this.Ms)(c=function(f){var h=ye.o;if(f!=null)try{var d=JSON.parse(f);H(typeof d=="number"),h=d}catch(g){Ct("SharedClientState","Failed to read sequence number from WebStorage",g)}return h}(r.newValue))!==ye.o&&this.sequenceNumberHandler(c);else if(r.key===this.Ks)return[2,this.syncEngine.ci()]}}else this.$s.push(r);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(e,n,r){var i=new Vf(this.currentUser,e,n,r),o=Uf(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Ss())},t.prototype.Hs=function(e){var n=Uf(this.persistenceKey,this.currentUser,e);this.removeItem(n)},t.prototype.Xs=function(e){var n={clientId:this.Ns,onlineState:e};this.storage.setItem(this.Us,JSON.stringify(n))},t.prototype.Ys=function(e,n,r){var i=Ru(this.persistenceKey,e),o=new ku(e,n,r);this.setItem(i,o.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(e){var n=this.Ls.exec(e);return n?n[1]:null},t.prototype.ni=function(e,n){var r=this.ti(e);return jf.Vs(r,n)},t.prototype.si=function(e,n){var r=this.Bs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Vf.Vs(new Lt(o),i,n)},t.prototype.ri=function(e,n){var r=this.qs.exec(e),i=Number(r[1]);return ku.Vs(i,n)},t.prototype.js=function(e){return u_.Vs(e)},t.prototype.ii=function(e){return I(this,void 0,void 0,function(){return E(this,function(n){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(D("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},t.prototype.oi=function(e){return this.syncEngine.ai(e.targetId,e.state,e.error)},t.prototype.ei=function(e,n){var r=this,i=n?this.Fs.insert(e,n):this.Fs.remove(e),o=this.Gs(this.Fs),s=this.Gs(i),u=[],a=[];return s.forEach(function(c){o.has(c)||u.push(c)}),o.forEach(function(c){s.has(c)||a.push(c)}),this.syncEngine.hi(u,a).then(function(){r.Fs=i})},t.prototype.Ws=function(e){this.Fs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)},t.prototype.Gs=function(e){var n=Xs();return e.forEach(function(r,i){n=n.unionWith(i.activeTargetIds)}),n},t}(),pg=function(){function t(){this.li=new ya,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(e){},t.prototype.updateMutationState=function(e,n,r){},t.prototype.addLocalQueryTarget=function(e){return this.li.Ds(e),this.fi[e]||"not-current"},t.prototype.updateQueryState=function(e,n,r){this.fi[e]=n},t.prototype.removeLocalQueryTarget=function(e){this.li.Cs(e)},t.prototype.isLocalQueryTarget=function(e){return this.li.activeTargetIds.has(e)},t.prototype.clearQueryState=function(e){delete this.fi[e]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(e){return this.li.activeTargetIds.has(e)},t.prototype.start=function(){return this.li=new ya,Promise.resolve()},t.prototype.handleUserChange=function(e,n,r){},t.prototype.setOnlineState=function(e){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(e){},t.prototype.notifyBundleLoaded=function(){},t}(),a_=function(){function t(){}return t.prototype.di=function(e){},t.prototype.shutdown=function(){},t}(),Bf=function(){function t(){var e=this;this.wi=function(){return e._i()},this.mi=function(){return e.yi()},this.gi=[],this.pi()}return t.prototype.di=function(e){this.gi.push(e)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){D("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,n=this.gi;e<n.length;e++)(0,n[e])(0)},t.prototype.yi=function(){D("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,n=this.gi;e<n.length;e++)(0,n[e])(1)},t.yt=function(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0},t}(),c_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},l_=function(){function t(e){this.Ei=e.Ei,this.Ti=e.Ti}return t.prototype.Ii=function(e){this.Ai=e},t.prototype.Ri=function(e){this.bi=e},t.prototype.onMessage=function(e){this.vi=e},t.prototype.close=function(){this.Ti()},t.prototype.send=function(e){this.Ei(e)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(e){this.bi(e)},t.prototype.Si=function(e){this.vi(e)},t}(),f_=function(t){function e(n){var r=this;return(r=t.call(this,n)||this).forceLongPolling=n.forceLongPolling,r.autoDetectLongPolling=n.autoDetectLongPolling,r.useFetchStreams=n.useFetchStreams,r}return $(e,t),e.prototype.Fi=function(n,r,i,o){return new Promise(function(s,u){var a=new qw;a.listenOnce(Vw.COMPLETE,function(){try{switch(a.getLastErrorCode()){case Du.NO_ERROR:var l=a.getResponseJson();D("Connection","XHR received:",JSON.stringify(l)),s(l);break;case Du.TIMEOUT:D("Connection",'RPC "'+n+'" timed out'),u(new A(m.DEADLINE_EXCEEDED,"Request time out"));break;case Du.HTTP_ERROR:var f=a.getStatus();if(D("Connection",'RPC "'+n+'" failed with status:',f,"response text:",a.getResponseText()),f>0){var h=a.getResponseJson().error;if(h&&h.status&&h.message){var d=function(g){var y=g.toLowerCase().replace(/_/g,"-");return Object.values(m).indexOf(y)>=0?y:m.UNKNOWN}(h.status);u(new A(d,h.message))}else u(new A(m.UNKNOWN,"Server responded with status "+a.getStatus()))}else u(new A(m.UNAVAILABLE,"Connection failed."));break;default:j()}}finally{D("Connection",'RPC "'+n+'" completed.')}});var c=JSON.stringify(o);a.send(r,"POST",c,i,15)})},e.prototype.Oi=function(n,r){var i=[this.Di,"/","google.firestore.v1.Firestore","/",n,"/channel"],o=Fw(),s=Uw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new Bw({})),this.ki(u.initMessageHeaders,r),$m()||Gm()||Wm()||Qm()||Ym()||Hm()||(u.httpHeadersOverwriteParam="$httpHeaders");var a=i.join("");D("Connection","Creating WebChannel: "+a,u);var c=o.createWebChannel(a,u),l=!1,f=!1,h=new l_({Ei:function(g){f?D("Connection","Not sending because WebChannel is closed:",g):(l||(D("Connection","Opening WebChannel transport."),c.open(),l=!0),D("Connection","WebChannel sending:",g),c.send(g))},Ti:function(){return c.close()}}),d=function(g,y,w){g.listen(y,function(_){try{w(_)}catch(P){setTimeout(function(){throw P},0)}})};return d(c,Ao.EventType.OPEN,function(){f||D("Connection","WebChannel transport opened.")}),d(c,Ao.EventType.CLOSE,function(){f||(f=!0,D("Connection","WebChannel transport closed"),h.Vi())}),d(c,Ao.EventType.ERROR,function(g){f||(f=!0,is("Connection","WebChannel transport errored:",g),h.Vi(new A(m.UNAVAILABLE,"The operation could not be completed")))}),d(c,Ao.EventType.MESSAGE,function(g){var y;if(!f){var w=g.data[0];H(!!w);var _=w,P=_.error||((y=_[0])===null||y===void 0?void 0:y.error);if(P){D("Connection","WebChannel received error:",P);var T=P.status,U=function(Z){var lt=St[Z];if(lt!==void 0)return Up(lt)}(T),z=P.message;U===void 0&&(U=m.INTERNAL,z="Unknown error status: "+T+" with message "+P.message),f=!0,h.Vi(new A(U,z)),c.close()}else D("Connection","WebChannel received:",w),h.Si(w)}}),d(s,jw.STAT_EVENT,function(g){g.stat===rf.PROXY?D("Connection","Detected buffering proxy"):g.stat===rf.NOPROXY&&D("Connection","Detected no buffering proxy")}),setTimeout(function(){h.Pi()},0),h},e}(function(){function t(e){this.databaseInfo=e,this.databaseId=e.databaseId;var n=e.ssl?"https":"http";this.Di=n+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(e,n,r,i){var o=this.xi(e,n);D("RestConnection","Sending: ",o,r);var s={};return this.ki(s,i),this.Fi(e,o,s,r).then(function(u){return D("RestConnection","Received: ",u),u},function(u){throw is("RestConnection",e+" failed with error: ",u,"url: ",o,"request:",r),u})},t.prototype.$i=function(e,n,r,i){return this.Ni(e,n,r,i)},t.prototype.ki=function(e,n){if(e["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n)for(var r in n.authHeaders)n.authHeaders.hasOwnProperty(r)&&(e[r]=n.authHeaders[r])},t.prototype.xi=function(e,n){var r=c_[e];return this.Di+"/v1/"+n+":"+r},t}());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(){return typeof window<"u"?window:null}function Bo(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(t){return new vb(t,!0)}var Rc=function(){function t(e,n,r,i,o){r===void 0&&(r=1e3),i===void 0&&(i=1.5),o===void 0&&(o=6e4),this.Se=e,this.timerId=n,this.Mi=r,this.Li=i,this.Bi=o,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(e){var n=this;this.cancel();var r=Math.floor(this.qi+this.Wi()),i=Math.max(0,Date.now()-this.Ki),o=Math.max(0,r-i);o>0&&D("ExponentialBackoff","Backing off for "+o+" ms (base delay: "+this.qi+" ms, delay with jitter: "+r+" ms, last attempt: "+i+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,o,function(){return n.Ki=Date.now(),e()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){this.Ui!==null&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){this.Ui!==null&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),yg=function(){function t(e,n,r,i,o,s){this.Se=e,this.zi=r,this.Hi=i,this.Ji=o,this.listener=s,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Rc(e,n)}return t.prototype.tr=function(){return this.state===1||this.state===2||this.state===4},t.prototype.er=function(){return this.state===2},t.prototype.start=function(){this.state!==3?this.auth():this.nr()},t.prototype.stop=function(){return I(this,void 0,void 0,function(){return E(this,function(e){switch(e.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var e=this;this.er()&&this.Xi===null&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return e.rr()}))},t.prototype.cr=function(e){this.ur(),this.stream.send(e)},t.prototype.rr=function(){return I(this,void 0,void 0,function(){return E(this,function(e){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(e,n){return I(this,void 0,void 0,function(){return E(this,function(r){switch(r.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,e!==3?this.Zi.reset():n&&n.code===m.RESOURCE_EXHAUSTED?(Ct(n.toString()),Ct("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):n&&n.code===m.UNAUTHENTICATED&&this.Ji.invalidateToken(),this.stream!==null&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(n)];case 1:return r.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var e=this;this.state=1;var n=this.hr(this.Yi),r=this.Yi;this.Ji.getToken().then(function(i){e.Yi===r&&e.lr(i)},function(i){n(function(){var o=new A(m.UNKNOWN,"Fetching auth token failed: "+i.message);return e.dr(o)})})},t.prototype.lr=function(e){var n=this,r=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii(function(){r(function(){return n.state=2,n.listener.Ii()})}),this.stream.Ri(function(i){r(function(){return n.dr(i)})}),this.stream.onMessage(function(i){r(function(){return n.onMessage(i)})})},t.prototype.nr=function(){var e=this;this.state=4,this.Zi.ji(function(){return I(e,void 0,void 0,function(){return E(this,function(n){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(e){return D("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},t.prototype.hr=function(e){var n=this;return function(r){n.Se.enqueueAndForget(function(){return n.Yi===e?r():(D("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),h_=function(t){function e(n,r,i,o,s){var u=this;return(u=t.call(this,n,"listen_stream_connection_backoff","listen_stream_idle",r,i,s)||this).R=o,u}return $(e,t),e.prototype.wr=function(n){return this.Hi.Oi("Listen",n)},e.prototype.onMessage=function(n){this.Zi.reset();var r=function(o,s){var u;if("targetChange"in s){s.targetChange;var a=function(w){return w==="NO_CHANGE"?0:w==="ADD"?1:w==="REMOVE"?2:w==="CURRENT"?3:w==="RESET"?4:j()}(s.targetChange.targetChangeType||"NO_CHANGE"),c=s.targetChange.targetIds||[],l=function(w,_){return w.I?(H(_===void 0||typeof _=="string"),ae.fromBase64String(_||"")):(H(_===void 0||_ instanceof Uint8Array),ae.fromUint8Array(_||new Uint8Array))}(o,s.targetChange.resumeToken),f=(h=s.targetChange.cause)&&function(w){var _=w.code===void 0?m.UNKNOWN:Up(w.code);return new A(_,w.message||"")}(h);u=new jp(a,c,l,f||null)}else if("documentChange"in s){s.documentChange,(a=s.documentChange).document,a.document.name,a.document.updateTime,c=tn(o,a.document.name),l=ie(a.document.updateTime);var h=new ge({mapValue:{fields:a.document.fields}}),d=(f=Yt.newFoundDocument(c,l,h),a.targetIds||[]),g=a.removedTargetIds||[];u=new jo(d,g,f.key,f)}else if("documentDelete"in s)s.documentDelete,(a=s.documentDelete).document,c=tn(o,a.document),l=a.readTime?ie(a.readTime):J.min(),h=Yt.newNoDocument(c,l),f=a.removedTargetIds||[],u=new jo([],f,h.key,h);else if("documentRemove"in s)s.documentRemove,(a=s.documentRemove).document,c=tn(o,a.document),l=a.removedTargetIds||[],u=new jo([],l,c,null);else{if(!("filter"in s))return j();s.filter;var y=s.filter;y.targetId,a=y.count||0,c=new ub(a),l=y.targetId,u=new Vp(l,c)}return u}(this.R,n),i=function(o){if(!("targetChange"in o))return J.min();var s=o.targetChange;return s.targetIds&&s.targetIds.length?J.min():s.readTime?ie(s.readTime):J.min()}(n);return this.listener._r(r,i)},e.prototype.mr=function(n){var r={};r.database=ji(this.R),r.addTarget=function(o,s){var u,a=s.target;return(u=us(a)?{documents:zp(o,a)}:{query:Hp(o,a)}).targetId=s.targetId,s.resumeToken.approximateByteSize()>0?u.resumeToken=Bp(o,s.resumeToken):s.snapshotVersion.compareTo(J.min())>0&&(u.readTime=Ui(o,s.snapshotVersion.toTimestamp())),u}(this.R,n);var i=function(o,s){var u=function(a,c){switch(c){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return j()}}(0,s.purpose);return u==null?null:{"goog-listen-tags":u}}(this.R,n);i&&(r.labels=i),this.cr(r)},e.prototype.yr=function(n){var r={};r.database=ji(this.R),r.removeTarget=n,this.cr(r)},e}(yg),d_=function(t){function e(n,r,i,o,s){var u=this;return(u=t.call(this,n,"write_stream_connection_backoff","write_stream_idle",r,i,s)||this).R=o,u.gr=!1,u}return $(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(n){return this.Hi.Oi("Write",n)},e.prototype.onMessage=function(n){if(H(!!n.streamToken),this.lastStreamToken=n.streamToken,this.gr){this.Zi.reset();var r=function(o,s){return o&&o.length>0?(H(s!==void 0),o.map(function(u){return function(a,c){var l=a.updateTime?ie(a.updateTime):ie(c);return l.isEqual(J.min())&&(l=ie(c)),new ib(l,a.transformResults||[])}(u,s)})):[]}(n.writeResults,n.commitTime),i=ie(n.commitTime);return this.listener.Tr(i,r)}return H(!n.writeResults||n.writeResults.length===0),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var n={};n.database=ji(this.R),this.cr(n)},e.prototype.Er=function(n){var r=this,i={streamToken:this.lastStreamToken,writes:n.map(function(o){return ls(r.R,o)})};this.cr(i)},e}(yg),p_=function(t){function e(n,r,i){var o=this;return(o=t.call(this)||this).credentials=n,o.Hi=r,o.R=i,o.Rr=!1,o}return $(e,t),e.prototype.br=function(){if(this.Rr)throw new A(m.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(n,r,i){var o=this;return this.br(),this.credentials.getToken().then(function(s){return o.Hi.Ni(n,r,i,s)}).catch(function(s){throw s.name==="FirebaseError"?(s.code===m.UNAUTHENTICATED&&o.credentials.invalidateToken(),s):new A(m.UNKNOWN,s.toString())})},e.prototype.$i=function(n,r,i){var o=this;return this.br(),this.credentials.getToken().then(function(s){return o.Hi.$i(n,r,i,s)}).catch(function(s){throw s.name==="FirebaseError"?(s.code===m.UNAUTHENTICATED&&o.credentials.invalidateToken(),s):new A(m.UNKNOWN,s.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),g_=function(){function t(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var e=this;this.vr===0&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return e.Pr=null,e.Cr("Backend didn't respond within 10 seconds."),e.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(e){this.state==="Online"?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+e.toString()),this.Dr("Offline")))},t.prototype.set=function(e){this.kr(),this.vr=0,e==="Online"&&(this.Vr=!1),this.Dr(e)},t.prototype.Dr=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},t.prototype.Cr=function(e){var n="Could not reach Cloud Firestore backend. "+e+`
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Vr?(Ct(n),this.Vr=!1):D("OnlineStateTracker",n)},t.prototype.kr=function(){this.Pr!==null&&(this.Pr.cancel(),this.Pr=null)},t}(),y_=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(s){n.enqueueAndForget(function(){return I(o,void 0,void 0,function(){return E(this,function(u){switch(u.label){case 0:return xn(this)?(D("RemoteStore","Restarting streams for network reachability change."),[4,function(a){return I(this,void 0,void 0,function(){var c;return E(this,function(l){switch(l.label){case 0:return(c=L(a)).Or.add(4),[4,ii(c)];case 1:return l.sent(),c.Br.set("Unknown"),c.Or.delete(4),[4,ao(c)];case 2:return l.sent(),[2]}})})}(this)]):[3,2];case 1:u.sent(),u.label=2;case 2:return[2]}})})})}),this.Br=new g_(n,r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(t){return I(this,void 0,void 0,function(){var e,n;return E(this,function(r){switch(r.label){case 0:if(!xn(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function ii(t){return I(this,void 0,void 0,function(){var e,n;return E(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function tu(t,e){var n=L(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Lc(n)?Pc(n):si(n).er()&&kc(n,e))}function Bi(t,e){var n=L(t),r=si(n);n.$r.delete(e),r.er()&&vg(n,e),n.$r.size===0&&(r.er()?r.ir():xn(n)&&n.Br.set("Unknown"))}function kc(t,e){t.qr.U(e.targetId),si(t).mr(e)}function vg(t,e){t.qr.U(e),si(t).yr(e)}function Pc(t){t.qr=new pb({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),si(t).start(),t.Br.Sr()}function Lc(t){return xn(t)&&!si(t).tr()&&t.$r.size>0}function xn(t){return L(t).Or.size===0}function mg(t){t.qr=void 0}function v_(t){return I(this,void 0,void 0,function(){return E(this,function(e){return t.$r.forEach(function(n,r){kc(t,n)}),[2]})})}function m_(t,e){return I(this,void 0,void 0,function(){return E(this,function(n){return mg(t),Lc(t)?(t.Br.Nr(e),Pc(t)):t.Br.set("Unknown"),[2]})})}function w_(t,e,n){return I(this,void 0,void 0,function(){var r,i,o;return E(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof jp&&e.state===2&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(u,a){return I(this,void 0,void 0,function(){var c,l,f,h;return E(this,function(d){switch(d.label){case 0:c=a.cause,l=0,f=a.targetIds,d.label=1;case 1:return l<f.length?(h=f[l],u.$r.has(h)?[4,u.remoteSyncer.rejectListen(h,c)]:[3,3]):[3,5];case 2:d.sent(),u.$r.delete(h),u.qr.removeTarget(h),d.label=3;case 3:d.label=4;case 4:return l++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),D("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,gs(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof jo?t.qr.X(e):e instanceof Vp?t.qr.rt(e):t.qr.et(e),n.isEqual(J.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,fg(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(u,a){var c=u.qr.ut(a);return c.targetChanges.forEach(function(l,f){if(l.resumeToken.approximateByteSize()>0){var h=u.$r.get(f);h&&u.$r.set(f,h.withResumeToken(l.resumeToken,a))}}),c.targetMismatches.forEach(function(l){var f=u.$r.get(l);if(f){u.$r.set(l,f.withResumeToken(ae.EMPTY_BYTE_STRING,f.snapshotVersion)),vg(u,l);var h=new Js(f.target,l,1,f.sequenceNumber);kc(u,h)}}),u.remoteSyncer.applyRemoteEvent(c)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return D("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,gs(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function gs(t,e,n){return I(this,void 0,void 0,function(){var r=this;return E(this,function(i){switch(i.label){case 0:if(!cr(e))throw e;return t.Or.add(1),[4,ii(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return fg(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return I(r,void 0,void 0,function(){return E(this,function(o){switch(o.label){case 0:return D("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return o.sent(),t.Or.delete(1),[4,ao(t)];case 2:return o.sent(),[2]}})})}),[2]}})})}function wg(t,e){return e().catch(function(n){return gs(t,n,e)})}function oi(t){return I(this,void 0,void 0,function(){var e,n,r,i,o;return E(this,function(s){switch(s.label){case 0:e=L(t),n=Sn(e),r=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,s.label=1;case 1:if(!function(u){return xn(u)&&u.Fr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Xb(e.localStore,r)];case 3:return(i=s.sent())===null?(e.Fr.length===0&&n.ir(),[3,7]):(r=i.batchId,function(u,a){u.Fr.push(a);var c=Sn(u);c.er()&&c.pr&&c.Er(a.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,gs(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return bg(e)&&_g(e),[2]}})})}function bg(t){return xn(t)&&!Sn(t).tr()&&t.Fr.length>0}function _g(t){Sn(t).start()}function b_(t){return I(this,void 0,void 0,function(){return E(this,function(e){return Sn(t).Ar(),[2]})})}function __(t){return I(this,void 0,void 0,function(){var e,n,r,i;return E(this,function(o){for(e=Sn(t),n=0,r=t.Fr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]})})}function E_(t,e,n){return I(this,void 0,void 0,function(){var r,i;return E(this,function(o){switch(o.label){case 0:return r=t.Fr.shift(),i=Rb.from(r,e,n),[4,wg(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,oi(t)];case 2:return o.sent(),[2]}})})}function I_(t,e){return I(this,void 0,void 0,function(){return E(this,function(n){switch(n.label){case 0:return e&&Sn(t).pr?[4,function(r,i){return I(this,void 0,void 0,function(){var o,s;return E(this,function(u){switch(u.label){case 0:return Fp(s=i.code)&&s!==m.ABORTED?(o=r.Fr.shift(),Sn(r).sr(),[4,wg(r,function(){return r.remoteSyncer.rejectFailedWrite(o.batchId,i)})]):[3,3];case 1:return u.sent(),[4,oi(r)];case 2:u.sent(),u.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return bg(t)&&_g(t),[2]}})})}function va(t,e){return I(this,void 0,void 0,function(){var n;return E(this,function(r){switch(r.label){case 0:return n=L(t),e?(n.Or.delete(2),[4,ao(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,ii(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function si(t){var e=this;return t.Ur||(t.Ur=function(n,r,i){var o=L(n);return o.br(),new h_(r,o.Hi,o.credentials,o.R,i)}(t.datastore,t.asyncQueue,{Ii:v_.bind(null,t),Ri:m_.bind(null,t),_r:w_.bind(null,t)}),t.Mr.push(function(n){return I(e,void 0,void 0,function(){return E(this,function(r){switch(r.label){case 0:return n?(t.Ur.sr(),Lc(t)?Pc(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:r.sent(),mg(t),r.label=3;case 3:return[2]}})})})),t.Ur}function Sn(t){var e=this;return t.Kr||(t.Kr=function(n,r,i){var o=L(n);return o.br(),new d_(r,o.Hi,o.credentials,o.R,i)}(t.datastore,t.asyncQueue,{Ii:b_.bind(null,t),Ri:I_.bind(null,t),Ir:__.bind(null,t),Tr:E_.bind(null,t)}),t.Mr.push(function(n){return I(e,void 0,void 0,function(){return E(this,function(r){switch(r.label){case 0:return n?(t.Kr.sr(),[4,oi(t)]):[3,2];case 1:return r.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:r.sent(),t.Fr.length>0&&(D("RemoteStore","Stopping write stream with "+t.Fr.length+" pending writes"),t.Fr=[]),r.label=4;case 4:return[2]}})})})),t.Kr}var T_=function(){function t(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ce,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(s){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(e){var n=this;this.timerHandle=setTimeout(function(){return n.handleDelayElapsed()},e)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new A(m.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},t.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return e.timerHandle!==null?(e.clearTimeout(),e.op().then(function(n){return e.deferred.resolve(n)})):Promise.resolve()})},t.prototype.clearTimeout=function(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function ui(t,e){if(Ct("AsyncQueue",e+": "+t),cr(t))return new A(m.UNAVAILABLE,e+": "+t);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Eg=function(){function t(e){this.comparator=e?function(n,r){return e(n,r)||B.comparator(n.key,r.key)}:function(n,r){return B.comparator(n.key,r.key)},this.keyedMap=da(),this.sortedSet=new Xt(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(e){return this.keyedMap.get(e)!=null},t.prototype.get=function(e){return this.keyedMap.get(e)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(e){var n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(e){this.sortedSet.inorderTraversal(function(n,r){return e(n),!1})},t.prototype.add=function(e){var n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))},t.prototype.delete=function(e){var n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this},t.prototype.isEqual=function(e){if(!(e instanceof t)||this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var e=[];return this.forEach(function(n){e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),qf=function(){function t(){this.Qr=new Xt(B.comparator)}return t.prototype.track=function(e){var n=e.doc.key,r=this.Qr.get(n);r?e.type!==0&&r.type===3?this.Qr=this.Qr.insert(n,e):e.type===3&&r.type!==1?this.Qr=this.Qr.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Qr=this.Qr.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Qr=this.Qr.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Qr=this.Qr.remove(n):e.type===1&&r.type===2?this.Qr=this.Qr.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Qr=this.Qr.insert(n,{type:2,doc:e.doc}):j():this.Qr=this.Qr.insert(n,e)},t.prototype.jr=function(){var e=[];return this.Qr.inorderTraversal(function(n,r){e.push(r)}),e},t}(),ys=function(){function t(e,n,r,i,o,s,u,a){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=u,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(s){o.push({type:0,doc:s})}),new t(e,n,Eg.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ro(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0},t}(),S_=function(){this.Wr=void 0,this.listeners=[]},A_=function(){this.queries=new ri(function(t){return Cp(t)},ro),this.onlineState="Unknown",this.Gr=new Set};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(t,e){return I(this,void 0,void 0,function(){var n,r,i,o,s,u,a;return E(this,function(c){switch(c.label){case 0:if(n=L(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new S_),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return u=c.sent(),a=ui(u,"Initialization of query '"+fa(e.query)+"' failed"),[2,void e.onError(a)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Uc(n),[2]}})})}function Fc(t,e){return I(this,void 0,void 0,function(){var n,r,i,o,s;return E(this,function(u){return n=L(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=o.listeners.length===0),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function C_(t,e){for(var n=L(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=s.query,a=n.queries.get(u);if(a){for(var c=0,l=a.listeners;c<l.length;c++)l[c].Hr(s)&&(r=!0);a.Wr=s}}r&&Uc(n)}function N_(t,e,n){var r=L(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Uc(t){t.Gr.forEach(function(e){e.next()})}var Vc=function(){function t(e,n,r){this.query=e,this.Jr=n,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=r||{}}return t.prototype.Hr=function(e){if(!this.options.includeMetadataChanges){for(var n=[],r=0,i=e.docChanges;r<i.length;r++){var o=i[r];o.type!==3&&n.push(o)}e=new ys(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var s=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),s=!0):this.eo(e,this.onlineState)&&(this.no(e),s=!0),this.Xr=e,s},t.prototype.onError=function(e){this.Jr.error(e)},t.prototype.zr=function(e){this.onlineState=e;var n=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),n=!0),n},t.prototype.eo=function(e,n){if(!e.fromCache)return!0;var r=n!=="Offline";return!(this.options.so&&r||e.docs.isEmpty()&&n!=="Offline")},t.prototype.Zr=function(e){if(e.docChanges.length>0)return!0;var n=this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0},t.prototype.no=function(e){e=ys.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ig=function(t){this.key=t},Tg=function(t){this.key=t},Sg=function(){function t(e,n){this.query=e,this.uo=n,this.ao=null,this.current=!1,this.ho=dt(),this.mutatedKeys=dt(),this.lo=Np(e),this.fo=new Eg(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(e,n){var r=this,i=n?n.mo:new qf,o=n?n.fo:this.fo,s=n?n.mutatedKeys:this.mutatedKeys,u=o,a=!1,c=Uo(this.query)&&o.size===this.query.limit?o.last():null,l=cs(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(function(h,d){var g=o.get(h),y=io(r.query,d)?d:null,w=!!g&&r.mutatedKeys.has(g.key),_=!!y&&(y.hasLocalMutations||r.mutatedKeys.has(y.key)&&y.hasCommittedMutations),P=!1;g&&y?g.data.isEqual(y.data)?w!==_&&(i.track({type:3,doc:y}),P=!0):r.yo(g,y)||(i.track({type:2,doc:y}),P=!0,(c&&r.lo(y,c)>0||l&&r.lo(y,l)<0)&&(a=!0)):!g&&y?(i.track({type:0,doc:y}),P=!0):g&&!y&&(i.track({type:1,doc:g}),P=!0,(c||l)&&(a=!0)),P&&(y?(u=u.add(y),s=_?s.add(h):s.delete(h)):(u=u.delete(h),s=s.delete(h)))}),Uo(this.query)||cs(this.query))for(;u.size>this.query.limit;){var f=Uo(this.query)?u.last():u.first();u=u.delete(f.key),s=s.delete(f.key),i.track({type:1,doc:f})}return{fo:u,mo:i,Nn:a,mutatedKeys:s}},t.prototype.yo=function(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations},t.prototype.applyChanges=function(e,n,r){var i=this,o=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;var s=e.mo.jr();s.sort(function(l,f){return function(h,d){var g=function(y){switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return j()}};return g(h)-g(d)}(l.type,f.type)||i.lo(l.doc,f.doc)}),this.po(r);var u=n?this.Eo():[],a=this.ho.size===0&&this.current?1:0,c=a!==this.ao;return this.ao=a,s.length!==0||c?{snapshot:new ys(this.query,e.fo,o,s,e.mutatedKeys,a===0,c,!1),To:u}:{To:u}},t.prototype.zr=function(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({fo:this.fo,mo:new qf,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(e){return!this.uo.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations},t.prototype.po=function(e){var n=this;e&&(e.addedDocuments.forEach(function(r){return n.uo=n.uo.add(r)}),e.modifiedDocuments.forEach(function(r){}),e.removedDocuments.forEach(function(r){return n.uo=n.uo.delete(r)}),this.current=e.current)},t.prototype.Eo=function(){var e=this;if(!this.current)return[];var n=this.ho;this.ho=dt(),this.fo.forEach(function(i){e.Io(i.key)&&(e.ho=e.ho.add(i.key))});var r=[];return n.forEach(function(i){e.ho.has(i)||r.push(new Tg(i))}),this.ho.forEach(function(i){n.has(i)||r.push(new Ig(i))}),r},t.prototype.Ao=function(e){this.uo=e.Bn,this.ho=dt();var n=this._o(e.documents);return this.applyChanges(n,!0)},t.prototype.Ro=function(){return ys.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,this.ao===0)},t}(),x_=function(t,e,n){this.query=t,this.targetId=e,this.view=n},D_=function(t){this.key=t,this.bo=!1},O_=function(){function t(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.vo={},this.Po=new ri(function(u){return Cp(u)},ro),this.Vo=new Map,this.So=new Set,this.Do=new Xt(B.comparator),this.Co=new Map,this.No=new Oc,this.xo={},this.ko=new Map,this.Fo=hs.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return this.$o===!0},enumerable:!1,configurable:!0}),t}();function R_(t,e){return I(this,void 0,void 0,function(){var n,r,i,o,s,u;return E(this,function(a){switch(a.label){case 0:return n=$c(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,ds(n.localStore,Ge(e))];case 2:return s=a.sent(),u=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,jc(n,e,r,u==="current")];case 3:i=a.sent(),n.isPrimaryClient&&tu(n.remoteStore,s),a.label=4;case 4:return[2,i]}})})}function jc(t,e,n,r){return I(this,void 0,void 0,function(){var i,o,s,u,a,c;return E(this,function(l){switch(l.label){case 0:return t.Oo=function(f,h,d){return function(g,y,w,_){return I(this,void 0,void 0,function(){var P,T,U;return E(this,function(z){switch(z.label){case 0:return P=y.view._o(w),P.Nn?[4,ps(g.localStore,y.query,!1).then(function(Z){var lt=Z.documents;return y.view._o(lt,P)})]:[3,2];case 1:P=z.sent(),z.label=2;case 2:return T=_&&_.targetChanges.get(y.targetId),U=y.view.applyChanges(P,g.isPrimaryClient,T),[2,(ma(g,y.targetId,U.To),U.snapshot)]}})})}(t,f,h,d)},[4,ps(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Sg(e,i.Bn),s=o._o(i.documents),u=Tc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline"),a=o.applyChanges(s,t.isPrimaryClient,u),ma(t,n,a.To),c=new x_(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),a.snapshot)]}})})}function k_(t,e){return I(this,void 0,void 0,function(){var n,r,i;return E(this,function(o){switch(o.label){case 0:return n=L(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(s){return!ro(s,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Hr(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Bi(n.remoteStore,r.targetId),Gr(n,r.targetId)}).catch(lr)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Gr(n,r.targetId),[4,Hr(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function P_(t,e,n){return I(this,void 0,void 0,function(){var r,i,o,s;return E(this,function(u){switch(u.label){case 0:r=zc(t),u.label=1;case 1:return u.trys.push([1,5,,6]),[4,function(a,c){var l,f=L(a),h=ue.now(),d=c.reduce(function(g,y){return g.add(y.key)},dt());return f.persistence.runTransaction("Locally write mutations","readwrite",function(g){return f.Mn.pn(g,d).next(function(y){l=y;for(var w=[],_=0,P=c;_<P.length;_++){var T=P[_],U=sb(T,l.get(T.key));U!=null&&w.push(new Nn(T.key,U,Ip(U.value.mapValue),Gt.exists(!0)))}return f._n.addMutationBatch(g,h,w,c)})}).then(function(g){return g.applyToLocalDocumentSet(l),{batchId:g.batchId,changes:l}})}(r.localStore,e)];case 2:return i=u.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(a,c,l){var f=a.xo[a.currentUser.toKey()];f||(f=new Xt(et)),f=f.insert(c,l),a.xo[a.currentUser.toKey()]=f}(r,i.batchId,n),[4,Dn(r,i.changes)];case 3:return u.sent(),[4,oi(r.remoteStore)];case 4:return u.sent(),[3,6];case 5:return o=u.sent(),s=ui(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function Ag(t,e){return I(this,void 0,void 0,function(){var n,r;return E(this,function(i){switch(i.label){case 0:n=L(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Qb(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(o,s){var u=n.Co.get(s);u&&(H(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?u.bo=!0:o.modifiedDocuments.size>0?H(u.bo):o.removedDocuments.size>0&&(H(u.bo),u.bo=!1))}),[4,Dn(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,lr(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Kf(t,e,n){var r=L(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){var i=[];r.Po.forEach(function(o,s){var u=s.view.zr(e);u.snapshot&&i.push(u.snapshot)}),function(o,s){var u=L(o);u.onlineState=s;var a=!1;u.queries.forEach(function(c,l){for(var f=0,h=l.listeners;f<h.length;f++)h[f].zr(s)&&(a=!0)}),a&&Uc(u)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function L_(t,e,n){return I(this,void 0,void 0,function(){var r,i,o,s,u,a;return E(this,function(c){switch(c.label){case 0:return(r=L(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Xt(B.comparator)).insert(o,Yt.newNoDocument(o,J.min())),u=dt().add(o),a=new Ic(J.min(),new Map,new Ot(et),s,u),[4,Ag(r,a)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Kc(r),[3,4];case 2:return[4,Hr(r.localStore,e,!1).then(function(){return Gr(r,e,n)}).catch(lr)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function M_(t,e){return I(this,void 0,void 0,function(){var n,r,i;return E(this,function(o){switch(o.label){case 0:n=L(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Wb(n.localStore,e)];case 2:return i=o.sent(),qc(n,r,null),Bc(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Dn(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,lr(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function F_(t,e,n){return I(this,void 0,void 0,function(){var r,i;return E(this,function(o){switch(o.label){case 0:r=L(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(s,u){var a=L(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",function(c){var l;return a._n.lookupMutationBatch(c,u).next(function(f){return H(f!==null),l=f.keys(),a._n.removeMutationBatch(c,f)}).next(function(){return a._n.performConsistencyCheck(c)}).next(function(){return a.Mn.pn(c,l)})})}(r.localStore,e)];case 2:return i=o.sent(),qc(r,e,n),Bc(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Dn(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,lr(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function U_(t,e){return I(this,void 0,void 0,function(){var n,r,i,o,s;return E(this,function(u){switch(u.label){case 0:xn((n=L(t)).remoteStore)||D("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,function(a){var c=L(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(l){return c._n.getHighestUnacknowledgedBatchId(l)})}(n.localStore)];case 2:return(r=u.sent())===-1?[2,void e.resolve()]:((i=n.ko.get(r)||[]).push(e),n.ko.set(r,i),[3,4]);case 3:return o=u.sent(),s=ui(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Bc(t,e){(t.ko.get(e)||[]).forEach(function(n){n.resolve()}),t.ko.delete(e)}function qc(t,e,n){var r=L(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Gr(t,e,n){n===void 0&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(s){t.No.containsKey(s)||Cg(t,s)})}function Cg(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);n!==null&&(Bi(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Kc(t))}function ma(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Ig?(t.No.addReference(o.key,e),V_(t,o)):o instanceof Tg?(D("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Cg(t,o.key)):j()}}function V_(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(D("SyncEngine","New document in limbo: "+n),t.So.add(r),Kc(t))}function Kc(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new B(ot.fromString(e)),r=t.Fo.next();t.Co.set(r,new D_(n)),t.Do=t.Do.insert(n,r),tu(t.remoteStore,new Js(Ge(no(n.path)),r,2,ye.o))}}function Dn(t,e,n){return I(this,void 0,void 0,function(){var r,i,o,s;return E(this,function(u){switch(u.label){case 0:return r=L(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(a,c){s.push(r.Oo(c,e,n).then(function(l){if(l){r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l.fromCache?"not-current":"current"),i.push(l);var f=Hb.Pn(c.targetId,l);o.push(f)}}))}),[4,Promise.all(s)]);case 1:return u.sent(),r.vo._r(i),[4,function(a,c){return I(this,void 0,void 0,function(){var l,f,h,d,g,y,w,_,P;return E(this,function(T){switch(T.label){case 0:l=L(a),T.label=1;case 1:return T.trys.push([1,3,,4]),[4,l.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(U){return x.forEach(c,function(z){return x.forEach(z.bn,function(Z){return l.persistence.referenceDelegate.addReference(U,z.targetId,Z)}).next(function(){return x.forEach(z.vn,function(Z){return l.persistence.referenceDelegate.removeReference(U,z.targetId,Z)})})})})];case 2:return T.sent(),[3,4];case 3:if(!cr(f=T.sent()))throw f;return D("LocalStore","Failed to update sequence numbers: "+f),[3,4];case 4:for(h=0,d=c;h<d.length;h++)g=d[h],y=g.targetId,g.fromCache||(w=l.kn.get(y),_=w.snapshotVersion,P=w.withLastLimboFreeSnapshotVersion(_),l.kn=l.kn.insert(y,P));return[2]}})})}(r.localStore,o)];case 2:u.sent(),u.label=3;case 3:return[2]}})})}function j_(t,e){return I(this,void 0,void 0,function(){var n,r;return E(this,function(i){switch(i.label){case 0:return(n=L(t)).currentUser.isEqual(e)?[3,3]:(D("SyncEngine","User change. New user:",e.toKey()),[4,lg(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(o,s){o.ko.forEach(function(u){u.forEach(function(a){a.reject(new A(m.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ko.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Dn(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function B_(t,e){var n=L(t),r=n.Co.get(e);if(r&&r.bo)return dt().add(r.key);var i=dt(),o=n.Vo.get(e);if(!o)return i;for(var s=0,u=o;s<u.length;s++){var a=u[s],c=n.Po.get(a);i=i.unionWith(c.view.wo)}return i}function q_(t,e){return I(this,void 0,void 0,function(){var n,r,i;return E(this,function(o){switch(o.label){case 0:return[4,ps((n=L(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&ma(n,e.targetId,i.To),i)]}})})}function K_(t){return I(this,void 0,void 0,function(){var e;return E(this,function(n){return[2,dg((e=L(t)).localStore).then(function(r){return Dn(e,r)})]})})}function $_(t,e,n,r){return I(this,void 0,void 0,function(){var i,o;return E(this,function(s){switch(s.label){case 0:return[4,function(u,a){var c=L(u),l=L(c._n);return c.persistence.runTransaction("Lookup mutation documents","readonly",function(f){return l.jt(f,a).next(function(h){return h?c.Mn.pn(f,h):x.resolve(null)})})}((i=L(t)).localStore,e)];case 1:return(o=s.sent())===null?[3,6]:n!=="pending"?[3,3]:[4,oi(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:n==="acknowledged"||n==="rejected"?(qc(i,e,r||null),Bc(i,e),function(u,a){L(L(u)._n).Gt(a)}(i.localStore,e)):j(),s.label=4;case 4:return[4,Dn(i,o)];case 5:return s.sent(),[3,7];case 6:D("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function z_(t,e){return I(this,void 0,void 0,function(){var n,r,i,o,s,u,a,c;return E(this,function(l){switch(l.label){case 0:return $c(n=L(t)),zc(n),e!==!0||n.$o===!0?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,$f(n,r.toArray())]);case 1:return i=l.sent(),n.$o=!0,[4,va(n.remoteStore,!0)];case 2:for(l.sent(),o=0,s=i;o<s.length;o++)u=s[o],tu(n.remoteStore,u);return[3,7];case 3:return e!==!1||n.$o===!1?[3,7]:(a=[],c=Promise.resolve(),n.Vo.forEach(function(f,h){n.sharedClientState.isLocalQueryTarget(h)?a.push(h):c=c.then(function(){return Gr(n,h),Hr(n.localStore,h,!0)}),Bi(n.remoteStore,h)}),[4,c]);case 4:return l.sent(),[4,$f(n,a)];case 5:return l.sent(),function(f){var h=L(f);h.Co.forEach(function(d,g){Bi(h.remoteStore,g)}),h.No.ts(),h.Co=new Map,h.Do=new Xt(B.comparator)}(n),n.$o=!1,[4,va(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}})})}function $f(t,e,n){return I(this,void 0,void 0,function(){var r,i,o,s,u,a,c,l,f,h,d,g,y,w;return E(this,function(_){switch(_.label){case 0:r=L(t),i=[],o=[],s=0,u=e,_.label=1;case 1:return s<u.length?(a=u[s],c=void 0,(l=r.Vo.get(a))&&l.length!==0?[4,ds(r.localStore,Ge(l[0]))]:[3,7]):[3,13];case 2:c=_.sent(),f=0,h=l,_.label=3;case 3:return f<h.length?(d=h[f],g=r.Po.get(d),[4,q_(r,g)]):[3,6];case 4:(y=_.sent()).snapshot&&o.push(y.snapshot),_.label=5;case 5:return f++,[3,3];case 6:return[3,11];case 7:return[4,hg(r.localStore,a)];case 8:return w=_.sent(),[4,ds(r.localStore,w)];case 9:return c=_.sent(),[4,jc(r,Ng(w),a,!1)];case 10:_.sent(),_.label=11;case 11:i.push(c),_.label=12;case 12:return s++,[3,1];case 13:return[2,(r.vo._r(o),i)]}})})}function Ng(t){return Sp(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function H_(t){var e=L(t);return L(L(e.localStore).persistence).fn()}function G_(t,e,n,r){return I(this,void 0,void 0,function(){var i,o,s;return E(this,function(u){switch(u.label){case 0:return(i=L(t)).$o?(D("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,dg(i.localStore)];case 3:return o=u.sent(),s=Ic.createSynthesizedRemoteEventForCurrentChange(e,n==="current"),[4,Dn(i,o,s)];case 4:return u.sent(),[3,8];case 5:return[4,Hr(i.localStore,e,!0)];case 6:return u.sent(),Gr(i,e,r),[3,8];case 7:j(),u.label=8;case 8:return[2]}})})}function W_(t,e,n){return I(this,void 0,void 0,function(){var r,i,o,s,u,a,c,l,f,h;return E(this,function(d){switch(d.label){case 0:if(!(r=$c(t)).$o)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(D("SyncEngine","Adding an already active target "+s),[3,5]):[4,hg(r.localStore,s)]):[3,6];case 2:return u=d.sent(),[4,ds(r.localStore,u)];case 3:return a=d.sent(),[4,jc(r,Ng(u),a.targetId,!1)];case 4:d.sent(),tu(r.remoteStore,a),d.label=5;case 5:return i++,[3,1];case 6:c=function(g){return E(this,function(y){switch(y.label){case 0:return r.Vo.has(g)?[4,Hr(r.localStore,g,!1).then(function(){Bi(r.remoteStore,g),Gr(r,g)}).catch(lr)]:[3,2];case 1:y.sent(),y.label=2;case 2:return[2]}})},l=0,f=n,d.label=7;case 7:return l<f.length?(h=f[l],[5,c(h)]):[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function $c(t){var e=L(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ag.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=B_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=L_.bind(null,e),e.vo._r=C_.bind(null,e.eventManager),e.vo.Mo=N_.bind(null,e.eventManager),e}function zc(t){var e=L(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=M_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F_.bind(null,e),e}var xg=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(e){return I(this,void 0,void 0,function(){return E(this,function(n){switch(n.label){case 0:return this.R=Zs(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return n.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Ko(e),[2]}})})},t.prototype.Uo=function(e){return null},t.prototype.Ko=function(e){return cg(this.persistence,new ag,e.initialUser,this.R)},t.prototype.qo=function(e){return new i_(s_.bs,this.R)},t.prototype.Bo=function(e){return new pg},t.prototype.terminate=function(){return I(this,void 0,void 0,function(){return E(this,function(e){switch(e.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return e.sent(),[4,this.persistence.shutdown()];case 2:return e.sent(),[2]}})})},t}(),Dg=function(t){function e(n,r,i){var o=this;return(o=t.call(this)||this).Qo=n,o.cacheSizeBytes=r,o.forceOwnership=i,o.synchronizeTabs=!1,o}return $(e,t),e.prototype.initialize=function(n){return I(this,void 0,void 0,function(){var r=this;return E(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,n)];case 1:return i.sent(),[4,Jb(this.localStore)];case 2:return i.sent(),[4,this.Qo.initialize(this,n)];case 3:return i.sent(),[4,zc(this.Qo.syncEngine)];case 4:return i.sent(),[4,oi(this.Qo.remoteStore)];case 5:return i.sent(),[4,this.persistence.He(function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()})];case 6:return i.sent(),[2]}})})},e.prototype.Ko=function(n){return cg(this.persistence,new ag,n.initialUser,this.R)},e.prototype.Uo=function(n){var r=this.persistence.referenceDelegate.garbageCollector;return new Vb(r,n.asyncQueue)},e.prototype.qo=function(n){var r=Dc(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Be.withCacheSize(this.cacheSizeBytes):Be.DEFAULT;return new zb(this.synchronizeTabs,r,n.clientId,i,n.asyncQueue,gg(),Bo(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(n){return new pg},e}(xg),Q_=function(t){function e(n,r){var i=this;return(i=t.call(this,n,r,!1)||this).Qo=n,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return $(e,t),e.prototype.initialize=function(n){return I(this,void 0,void 0,function(){var r,i=this;return E(this,function(o){switch(o.label){case 0:return[4,t.prototype.initialize.call(this,n)];case 1:return o.sent(),r=this.Qo.syncEngine,this.sharedClientState instanceof Pu?(this.sharedClientState.syncEngine={ui:$_.bind(null,r),ai:G_.bind(null,r),hi:W_.bind(null,r),fn:H_.bind(null,r),ci:K_.bind(null,r)},[4,this.sharedClientState.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.He(function(s){return I(i,void 0,void 0,function(){return E(this,function(u){switch(u.label){case 0:return[4,z_(this.Qo.syncEngine,s)];case 1:return u.sent(),this.gcScheduler&&(s&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):s||this.gcScheduler.stop()),[2]}})})})];case 4:return o.sent(),[2]}})})},e.prototype.Bo=function(n){var r=gg();if(!Pu.yt(r))throw new A(m.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var i=Dc(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey);return new Pu(r,n.asyncQueue,i,n.clientId,n.initialUser)},e}(Dg),wa=function(){function t(){}return t.prototype.initialize=function(e,n){return I(this,void 0,void 0,function(){var r=this;return E(this,function(i){switch(i.label){case 0:return this.localStore?[3,2]:(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(o){return Kf(r.syncEngine,o,1)},this.remoteStore.remoteSyncer.handleCredentialChange=j_.bind(null,this.syncEngine),[4,va(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:i.sent(),i.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(e){return new A_},t.prototype.createDatastore=function(e){var n,r=Zs(e.databaseInfo.databaseId),i=(n=e.databaseInfo,new f_(n));return function(o,s,u){return new p_(o,s,u)}(e.credentials,i,r)},t.prototype.createRemoteStore=function(e){var n,r,i,o,s,u=this;return n=this.localStore,r=this.datastore,i=e.asyncQueue,o=function(a){return Kf(u.syncEngine,a,0)},s=Bf.yt()?new Bf:new a_,new y_(n,r,i,o,s)},t.prototype.createSyncEngine=function(e,n){return function(r,i,o,s,u,a,c){var l=new O_(r,i,o,s,u,a);return c&&(l.$o=!0),l}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)},t.prototype.terminate=function(){return function(e){return I(this,void 0,void 0,function(){var n;return E(this,function(r){switch(r.label){case 0:return n=L(e),D("RemoteStore","RemoteStore shutting down."),n.Or.add(5),[4,ii(n)];case 1:return r.sent(),n.Lr.shutdown(),n.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eu=function(){function t(e){this.observer=e,this.muted=!1}return t.prototype.next=function(e){this.observer.next&&this.jo(this.observer.next,e)},t.prototype.error=function(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(e,n){var r=this;this.muted||setTimeout(function(){r.muted||e(n)},0)},t}(),Y_=function(){function t(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(e){return I(this,void 0,void 0,function(){var n,r=this;return E(this,function(i){switch(i.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new A(m.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(o,s){return I(this,void 0,void 0,function(){var u,a,c,l,f,h;return E(this,function(d){switch(d.label){case 0:return u=L(o),a=ji(u.R)+"/documents",c={documents:s.map(function(g){return Vi(u.R,g)})},[4,u.$i("BatchGetDocuments",a,c)];case 1:return l=d.sent(),f=new Map,l.forEach(function(g){var y=function(w,_){return"found"in _?function(P,T){H(!!T.found),T.found.name,T.found.updateTime;var U=tn(P,T.found.name),z=ie(T.found.updateTime),Z=new ge({mapValue:{fields:T.found.fields}});return Yt.newFoundDocument(U,z,Z)}(w,_):"missing"in _?function(P,T){H(!!T.missing),H(!!T.readTime);var U=tn(P,T.missing),z=ie(T.readTime);return Yt.newNoDocument(U,z)}(w,_):j()}(u.R,g);f.set(y.key.toString(),y)}),h=[],[2,(s.forEach(function(g){var y=f.get(g.toString());H(!!y),h.push(y)}),h)]}})})}(this.datastore,e)];case 1:return[2,((n=i.sent()).forEach(function(o){return r.recordVersion(o)}),n)]}})})},t.prototype.set=function(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())},t.prototype.update=function(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())},t.prototype.delete=function(e){this.write(new uo(e,this.precondition(e))),this.writtenDocs.add(e.toString())},t.prototype.commit=function(){return I(this,void 0,void 0,function(){var e,n=this;return E(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach(function(i){e.delete(i.key.toString())}),e.forEach(function(i,o){var s=B.fromPath(o);n.mutations.push(new Ec(s,n.precondition(s)))}),[4,function(i,o){return I(this,void 0,void 0,function(){var s,u,a;return E(this,function(c){switch(c.label){case 0:return s=L(i),u=ji(s.R)+"/documents",a={writes:o.map(function(l){return ls(s.R,l)})},[4,s.Ni("Commit",u,a)];case 1:return c.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return r.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(e){var n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw j();n=J.min()}var r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new A(m.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)},t.prototype.precondition=function(e){var n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?Gt.updateTime(n):Gt.none()},t.prototype.preconditionForUpdate=function(e){var n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(J.min()))throw new A(m.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gt.updateTime(n)}return Gt.exists(!0)},t.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations.push(e)},t.prototype.ensureCommitNotCalled=function(){},t}(),X_=function(){function t(e,n,r,i){this.asyncQueue=e,this.datastore=n,this.updateFunction=r,this.deferred=i,this.ec=5,this.Zi=new Rc(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var e=this;this.Zi.ji(function(){return I(e,void 0,void 0,function(){var n,r,i=this;return E(this,function(o){return n=new Y_(this.datastore),(r=this.sc(n))&&r.then(function(s){i.asyncQueue.enqueueAndForget(function(){return n.commit().then(function(){i.deferred.resolve(s)}).catch(function(u){i.ic(u)})})}).catch(function(s){i.ic(s)}),[2]})})})},t.prototype.sc=function(e){try{var n=this.updateFunction(e);return!ar(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}},t.prototype.ic=function(e){var n=this;this.ec>0&&this.rc(e)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return n.nc(),Promise.resolve()})):this.deferred.reject(e)},t.prototype.rc=function(e){if(e.name==="FirebaseError"){var n=e.code;return n==="aborted"||n==="failed-precondition"||!Fp(n)}return!1},t}(),J_=function(){function t(e,n,r){var i=this;this.credentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=Lt.UNAUTHENTICATED,this.clientId=vp.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(n,function(o){return I(i,void 0,void 0,function(){return E(this,function(s){switch(s.label){case 0:return D("FirestoreClient","Received user=",o.uid),[4,this.credentialListener(o)];case 1:return s.sent(),this.user=o,[2]}})})})}return t.prototype.getConfiguration=function(){return I(this,void 0,void 0,function(){return E(this,function(e){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(e){this.credentialListener=e},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new A(m.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var e=this;this.asyncQueue.enterRestrictedMode();var n=new ce;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return I(e,void 0,void 0,function(){var r,i;return E(this,function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:o.sent(),o.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:o.sent(),o.label=4;case 4:return this.credentials.removeChangeListener(),n.resolve(),[3,6];case 5:return r=o.sent(),i=ui(r,"Failed to shutdown persistence"),n.reject(i),[3,6];case 6:return[2]}})})}),n.promise},t}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(t,e){return I(this,void 0,void 0,function(){var n,r,i=this;return E(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),D("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(s){return I(i,void 0,void 0,function(){return E(this,function(u){switch(u.label){case 0:return r.isEqual(s)?[3,2]:[4,lg(e.localStore,s)];case 1:u.sent(),r=s,u.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Rg(t,e){return I(this,void 0,void 0,function(){var n,r;return E(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Hc(t)];case 1:return n=i.sent(),D("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(o){return function(s,u){return I(this,void 0,void 0,function(){var a,c;return E(this,function(l){switch(l.label){case 0:return(a=L(s)).asyncQueue.verifyOperationInProgress(),D("RemoteStore","RemoteStore received new credentials"),c=xn(a),a.Or.add(3),[4,ii(a)];case 1:return l.sent(),c&&a.Br.set("Unknown"),[4,a.remoteSyncer.handleCredentialChange(u)];case 2:return l.sent(),a.Or.delete(3),[4,ao(a)];case 3:return l.sent(),[2]}})})}(e.remoteStore,o)}),t.onlineComponents=e,[2]}})})}function Hc(t){return I(this,void 0,void 0,function(){return E(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(D("FirestoreClient","Using default OfflineComponentProvider"),[4,Og(t,new xg)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function nu(t){return I(this,void 0,void 0,function(){return E(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(D("FirestoreClient","Using default OnlineComponentProvider"),[4,Rg(t,new wa)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function zf(t){return Hc(t).then(function(e){return e.persistence})}function kg(t){return Hc(t).then(function(e){return e.localStore})}function Hf(t){return nu(t).then(function(e){return e.remoteStore})}function Pg(t){return nu(t).then(function(e){return e.syncEngine})}function Wr(t){return I(this,void 0,void 0,function(){var e,n;return E(this,function(r){switch(r.label){case 0:return[4,nu(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=R_.bind(null,e.syncEngine),n.onUnlisten=k_.bind(null,e.syncEngine),n)]}})})}function Gf(t,e,n){var r=this;n===void 0&&(n={});var i=new ce;return t.asyncQueue.enqueueAndForget(function(){return I(r,void 0,void 0,function(){var o;return E(this,function(s){switch(s.label){case 0:return o=function(u,a,c,l,f){var h=new eu({next:function(g){a.enqueueAndForget(function(){return Fc(u,d)});var y=g.docs.has(c);!y&&g.fromCache?f.reject(new A(m.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&l&&l.source==="server"?f.reject(new A(m.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(g)},error:function(g){return f.reject(g)}}),d=new Vc(no(c.path),h,{includeMetadataChanges:!0,so:!0});return Mc(u,d)},[4,Wr(t)];case 1:return[2,o.apply(void 0,[s.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Wf(t,e,n){var r=this;n===void 0&&(n={});var i=new ce;return t.asyncQueue.enqueueAndForget(function(){return I(r,void 0,void 0,function(){var o;return E(this,function(s){switch(s.label){case 0:return o=function(u,a,c,l,f){var h=new eu({next:function(g){a.enqueueAndForget(function(){return Fc(u,d)}),g.fromCache&&l.source==="server"?f.reject(new A(m.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(g)},error:function(g){return f.reject(g)}}),d=new Vc(c,h,{includeMetadataChanges:!0,so:!0});return Mc(u,d)},[4,Wr(t)];case 1:return[2,o.apply(void 0,[s.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Z_=function(t,e,n,r,i,o,s,u){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u},vs=function(){function t(e,n){this.projectId=e,this.database=n||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return this.database==="(default)"},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Qf=new Map,Lg=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Yf=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(e,n){this.changeListener=n,e.enqueueRetryable(function(){return n(Lt.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),tE=function(){function t(e){this.token=e,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(e,n){var r=this;this.changeListener=n,e.enqueueRetryable(function(){return n(r.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),eE=function(){function t(e){var n=this;this.currentUser=Lt.UNAUTHENTICATED,this.oc=new ce,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){n.cc++,n.currentUser=n.ac(),n.oc.resolve(),n.changeListener&&n.asyncQueue.enqueueRetryable(function(){return n.changeListener(n.currentUser)})};var r=function(i){D("FirebaseCredentialsProvider","Auth detected"),n.auth=i,n.auth.addAuthTokenListener(n.uc)};e.onInit(function(i){return r(i)}),setTimeout(function(){if(!n.auth){var i=e.getImmediate({optional:!0});i?r(i):(D("FirebaseCredentialsProvider","Auth not yet detected"),n.oc.resolve())}},0)}return t.prototype.getToken=function(){var e=this,n=this.cc,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(function(i){return e.cc!==n?(D("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):i?(H(typeof i.accessToken=="string"),new Lg(i.accessToken,e.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(e,n){var r=this;this.asyncQueue=e,this.asyncQueue.enqueueRetryable(function(){return I(r,void 0,void 0,function(){return E(this,function(i){switch(i.label){case 0:return[4,this.oc.promise];case 1:return i.sent(),[4,n(this.currentUser)];case 2:return i.sent(),this.changeListener=n,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var e=this.auth&&this.auth.getUid();return H(e===null||typeof e=="string"),new Lt(e)},t}(),nE=function(){function t(e,n,r){this.hc=e,this.lc=n,this.fc=r,this.type="FirstParty",this.user=Lt.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.lc},n=this.hc.auth.getAuthHeaderValueForFirstParty([]);return n&&(e.Authorization=n),this.fc&&(e["X-Goog-Iam-Authorization-Token"]=this.fc),e},enumerable:!1,configurable:!0}),t}(),rE=function(){function t(e,n,r){this.hc=e,this.lc=n,this.fc=r}return t.prototype.getToken=function(){return Promise.resolve(new nE(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(e,n){e.enqueueRetryable(function(){return n(Lt.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(t,e,n){if(!n)throw new A(m.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Wc(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new A(m.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Mg(t,e,n,r){if(e===!0&&r===!0)throw new A(m.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Xf(t){if(!B.isDocumentKey(t))throw new A(m.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Jf(t){if(B.isDocumentKey(t))throw new A(m.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function ru(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";var e=function(n){if(n.constructor){var r=/function\s+([^\s(]+)\s*\(/.exec(n.constructor.toString());if(r&&r.length>1)return r[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return typeof t=="function"?"a function":j()}function ut(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new A(m.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ru(t);throw new A(m.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Zf(t,e){if(e<=0)throw new A(m.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var th=function(){function t(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new A(m.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new A(m.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Mg("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams},t}(),qi=function(){function t(e,n){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new th({}),this._settingsFrozen=!1,e instanceof vs?(this._databaseId=e,this._credentials=new Yf):(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new A(m.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vs(r.options.projectId)}(e),this._credentials=new eE(n))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new A(m.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return this._terminateTask!==void 0},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(e){if(this._settingsFrozen)throw new A(m.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new th(e),e.credentials!==void 0&&(this._credentials=function(n){if(!n)return new Yf;switch(n.type){case"gapi":var r=n.client;return H(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new rE(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new A(m.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return e=this,(n=Qf.get(e))&&(D("ComponentProvider","Removing Datastore"),Qf.delete(e),n.terminate()),Promise.resolve();var e,n},t}(),wt=function(){function t(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new _n(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),me=function(){function t(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),_n=function(t){function e(n,r,i){var o=this;return(o=t.call(this,n,r,no(i))||this)._path=i,o.type="collection",o}return $(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var n=this._path.popLast();return n.isEmpty()?null:new wt(this.firestore,null,new B(n))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(n){return new e(this.firestore,n,this._path)},e}(me);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Nt(t),Gc("collection","path",e),t instanceof qi)return Jf(n=ot.fromString.apply(ot,It([e],r))),new _n(t,null,n);if(!(t instanceof wt||t instanceof _n))throw new A(m.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Jf(n=ot.fromString.apply(ot,It([t.path],r)).child(ot.fromString(e))),new _n(t.firestore,null,n)}function qo(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Nt(t),arguments.length===1&&(e=vp.u()),Gc("doc","path",e),t instanceof qi)return Xf(n=ot.fromString.apply(ot,It([e],r))),new wt(t,null,new B(n));if(!(t instanceof wt||t instanceof _n))throw new A(m.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Xf(n=t._path.child(ot.fromString.apply(ot,It([e],r)))),new wt(t.firestore,t instanceof _n?t.converter:null,new B(n))}function Ug(t,e){return t=Nt(t),e=Nt(e),(t instanceof wt||t instanceof _n)&&(e instanceof wt||e instanceof _n)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Vg(t,e){return t=Nt(t),e=Nt(e),t instanceof me&&e instanceof me&&t.firestore===e.firestore&&ro(t._query,e._query)&&t.converter===e.converter}var iE=function(){function t(){var e=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Rc(this,"async_queue_retry"),this.Ic=function(){var r=Bo();r&&D("AsyncQueue","Visibility state changed to "+r.visibilityState),e.Zi.Gi()};var n=Bo();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(e){this.enqueue(e)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(e){this.Ac(),this.Rc(e)},t.prototype.enterRestrictedMode=function(e){if(!this._c){this._c=!0,this.Ec=e||!1;var n=Bo();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(e){var n=this;if(this.Ac(),this._c)return new Promise(function(){});var r=new ce;return this.Rc(function(){return n._c&&n.Ec?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)}).then(function(){return r.promise})},t.prototype.enqueueRetryable=function(e){var n=this;this.enqueueAndForget(function(){return n.wc.push(e),n.bc()})},t.prototype.bc=function(){return I(this,void 0,void 0,function(){var e,n=this;return E(this,function(r){switch(r.label){case 0:if(this.wc.length===0)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return r.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!cr(e=r.sent()))throw e;return D("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return n.bc()}),r.label=5;case 5:return[2]}})})},t.prototype.Rc=function(e){var n=this,r=this.dc.then(function(){return n.gc=!0,e().catch(function(i){throw n.yc=i,n.gc=!1,Ct("INTERNAL UNHANDLED ERROR: ",function(o){var s=o.message||"";return o.stack&&(s=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),s}(i)),i}).then(function(i){return n.gc=!1,i})});return this.dc=r,r},t.prototype.enqueueAfterDelay=function(e,n,r){var i=this;this.Ac(),this.Tc.indexOf(e)>-1&&(n=0);var o=T_.createAndSchedule(this,e,n,r,function(s){return i.vc(s)});return this.mc.push(o),o},t.prototype.Ac=function(){this.yc&&j()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return I(this,void 0,void 0,function(){var e;return E(this,function(n){switch(n.label){case 0:return[4,e=this.dc];case 1:n.sent(),n.label=2;case 2:if(e!==this.dc)return[3,0];n.label=3;case 3:return[2]}})})},t.prototype.Vc=function(e){for(var n=0,r=this.mc;n<r.length;n++)if(r[n].timerId===e)return!0;return!1},t.prototype.Sc=function(e){var n=this;return this.Pc().then(function(){n.mc.sort(function(s,u){return s.targetTimeMs-u.targetTimeMs});for(var r=0,i=n.mc;r<i.length;r++){var o=i[r];if(o.skipDelay(),e!=="all"&&o.timerId===e)break}return n.Pc()})},t.prototype.Dc=function(e){this.Tc.push(e)},t.prototype.vc=function(e){var n=this.mc.indexOf(e);this.mc.splice(n,1)},t}();function Qr(t){return function(e,n){if(typeof e!="object"||e===null)return!1;for(var r=e,i=0,o=["next","error","complete"];i<o.length;i++){var s=o[i];if(s in r&&typeof r[s]=="function")return!0}return!1}(t)}var oE=-1,Dt=function(t){function e(n,r){var i=this;return(i=t.call(this,n,r)||this).type="firestore",i._queue=new iE,i._persistenceKey="name"in n?n.name:"[DEFAULT]",i}return $(e,t),e.prototype._terminate=function(){return this._firestoreClient||jg(this),this._firestoreClient.terminate()},e}(qi);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(t){return t._firestoreClient||jg(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function jg(t){var e,n=t._freezeSettings(),r=function(i,o,s,u){return new Z_(i,o,s,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new J_(t._credentials,t._queue,r)}function eh(t,e,n){var r=this,i=new ce;return t.asyncQueue.enqueue(function(){return I(r,void 0,void 0,function(){var o;return E(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,Og(t,n)];case 1:return s.sent(),[4,Rg(t,e)];case 2:return s.sent(),i.resolve(),[3,4];case 3:if(!function(u){return u.name==="FirebaseError"?u.code===m.FAILED_PRECONDITION||u.code===m.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||u.code===22||u.code===20||u.code===11}(o=s.sent()))throw o;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),i.reject(o),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function nh(t){if(t._initialized||t._terminated)throw new A(m.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze=function(){function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=0;r<e.length;++r)if(e[r].length===0)throw new A(m.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Le(e)}return t.prototype.isEqual=function(e){return this._internalPath.isEqual(e._internalPath)},t}(),or=function(){function t(e){this._byteString=e}return t.fromBase64String=function(e){try{return new t(ae.fromBase64String(e))}catch(n){throw new A(m.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},t.fromUint8Array=function(e){return new t(ae.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(e){return this._byteString.isEqual(e._byteString)},t}(),fr=function(t){this._methodName=t},iu=function(){function t(e,n){if(!isFinite(e)||e<-90||e>90)throw new A(m.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new A(m.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(e){return et(this._lat,e._lat)||et(this._long,e._long)},t}(),sE=/^__.*__$/,uE=function(){function t(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}return t.prototype.toMutation=function(e,n){return this.fieldMask!==null?new Nn(e,this.data,this.fieldMask,n,this.fieldTransforms):new so(e,this.data,n,this.fieldTransforms)},t}(),Bg=function(){function t(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}return t.prototype.toMutation=function(e,n){return new Nn(e,this.data,this.fieldMask,n,this.fieldTransforms)},t}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw j()}}var Kg=function(){function t(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.R=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Cc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(e){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xc({path:r,Fc:!1});return i.$c(e),i},t.prototype.Oc=function(e){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xc({path:r,Fc:!1});return i.Cc(),i},t.prototype.Mc=function(e){return this.xc({path:void 0,Fc:!0})},t.prototype.Lc=function(e){return ms(e,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(e){return this.fieldMask.find(function(n){return e.isPrefixOf(n)})!==void 0||this.fieldTransforms.find(function(n){return e.isPrefixOf(n.field)})!==void 0},t.prototype.Cc=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.$c(this.path.get(e))},t.prototype.$c=function(e){if(e.length===0)throw this.Lc("Document fields must not be empty");if(qg(this.Nc)&&sE.test(e))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),aE=function(){function t(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.R=r||Zs(e)}return t.prototype.Uc=function(e,n,r,i){return i===void 0&&(i=!1),new Kg({Nc:e,methodName:n,qc:r,path:Le.emptyPath(),Fc:!1,Bc:i},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function hr(t){var e=t._freezeSettings(),n=Zs(t._databaseId);return new aE(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ou(t,e,n,r,i,o){o===void 0&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);Jc("Data must be an object, but it was:",s,r);var u,a,c=Hg(r,s);if(o.merge)u=new Lr(s.fieldMask),a=s.fieldTransforms;else if(o.mergeFields){for(var l=[],f=0,h=o.mergeFields;f<h.length;f++){var d=ba(e,h[f],n);if(!s.contains(d))throw new A(m.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Wg(l,d)||l.push(d)}u=new Lr(l),a=s.fieldTransforms.filter(function(g){return u.covers(g.field)})}else u=null,a=s.fieldTransforms;return new uE(new ge(c),u,a)}var Qc=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return $(e,t),e.prototype._toFieldTransform=function(n){if(n.Nc!==2)throw n.Nc===1?n.Lc(this._methodName+"() can only appear at the top level of your update data"):n.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return n.fieldMask.push(n.path),null},e.prototype.isEqual=function(n){return n instanceof e},e}(fr);function $g(t,e,n){return new Kg({Nc:3,qc:e.settings.qc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var cE=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return $(e,t),e.prototype._toFieldTransform=function(n){return new oo(n.path,new Vr)},e.prototype.isEqual=function(n){return n instanceof e},e}(fr),lE=function(t){function e(n,r){var i=this;return(i=t.call(this,n)||this).Kc=r,i}return $(e,t),e.prototype._toFieldTransform=function(n){var r=$g(this,n,!0),i=this.Kc.map(function(s){return dr(s,r)}),o=new rr(i);return new oo(n.path,o)},e.prototype.isEqual=function(n){return this===n},e}(fr),fE=function(t){function e(n,r){var i=this;return(i=t.call(this,n)||this).Kc=r,i}return $(e,t),e.prototype._toFieldTransform=function(n){var r=$g(this,n,!0),i=this.Kc.map(function(s){return dr(s,r)}),o=new ir(i);return new oo(n.path,o)},e.prototype.isEqual=function(n){return this===n},e}(fr),hE=function(t){function e(n,r){var i=this;return(i=t.call(this,n)||this).Qc=r,i}return $(e,t),e.prototype._toFieldTransform=function(n){var r=new jr(n.R,Op(n.R,this.Qc));return new oo(n.path,r)},e.prototype.isEqual=function(n){return this===n},e}(fr);function Yc(t,e,n,r){var i=t.Uc(1,e,n);Jc("Data must be an object, but it was:",i,r);var o=[],s=ge.empty();ur(r,function(a,c){var l=Zc(e,a,n);c=Nt(c);var f=i.Oc(l);if(c instanceof Qc)o.push(l);else{var h=dr(c,f);h!=null&&(o.push(l),s.set(l,h))}});var u=new Lr(o);return new Bg(s,u,i.fieldTransforms)}function Xc(t,e,n,r,i,o){var s=t.Uc(1,e,n),u=[ba(e,r,n)],a=[i];if(o.length%2!=0)throw new A(m.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)u.push(ba(e,o[c])),a.push(o[c+1]);for(var l=[],f=ge.empty(),h=u.length-1;h>=0;--h)if(!Wg(l,u[h])){var d=u[h],g=a[h];g=Nt(g);var y=s.Oc(d);if(g instanceof Qc)l.push(d);else{var w=dr(g,y);w!=null&&(l.push(d),f.set(d,w))}}var _=new Lr(l);return new Bg(f,_,s.fieldTransforms)}function zg(t,e,n,r){return r===void 0&&(r=!1),dr(n,t.Uc(r?4:3,e))}function dr(t,e){if(Gg(t=Nt(t)))return Jc("Unsupported field value:",e,t),Hg(t,e);if(t instanceof fr)return function(n,r){if(!qg(r.Nc))throw r.Lc(n._methodName+"() can only be used with update() and set()");if(!r.path)throw r.Lc(n._methodName+"() is not currently supported inside arrays");var i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&e.Nc!==4)throw e.Lc("Nested arrays are not supported");return function(n,r){for(var i=[],o=0,s=0,u=n;s<u.length;s++){var a=dr(u[s],r.Mc(o));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),o++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=Nt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Op(r.R,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){var i=ue.fromDate(n);return{timestampValue:Ui(r.R,i)}}if(n instanceof ue)return i=new ue(n.seconds,1e3*Math.floor(n.nanoseconds/1e3)),{timestampValue:Ui(r.R,i)};if(n instanceof iu)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof or)return{bytesValue:Bp(r.R,n._byteString)};if(n instanceof wt){i=r.databaseId;var o=n.firestore._databaseId;if(!o.isEqual(i))throw r.Lc("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:Sc(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Lc("Unsupported field value: "+ru(n))}(t,e)}function Hg(t,e){var n={};return wp(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ur(t,function(r,i){var o=dr(i,e.kc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function Gg(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ue||t instanceof iu||t instanceof or||t instanceof wt||t instanceof fr)}function Jc(t,e,n){if(!Gg(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){var r=ru(n);throw r==="an object"?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}}function ba(t,e,n){if((e=Nt(e))instanceof ze)return e._internalPath;if(typeof e=="string")return Zc(t,e);throw ms("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var dE=new RegExp("[~\\*/\\[\\]]");function Zc(t,e,n){if(e.search(dE)>=0)throw ms("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return new(ze.bind.apply(ze,It([void 0],e.split("."))))()._internalPath}catch{throw ms("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function ms(t,e,n,r,i){var o=r&&!r.isEmpty(),s=i!==void 0,u="Function "+e+"() called with invalid data";n&&(u+=" (via `toFirestore()`)");var a="";return(o||s)&&(a+=" (found",o&&(a+=" in field "+r),s&&(a+=" in document "+i),a+=")"),new A(m.INVALID_ARGUMENT,(u+=". ")+t+a)}function Wg(t,e){return t.some(function(n){return n.isEqual(e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ki=function(){function t(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new wt(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return this._document!==null},t.prototype.data=function(){if(this._document){if(this._converter){var e=new pE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(e){if(this._document){var n=this._document.data.field(ws("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}},t}(),pE=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return $(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Ki);function ws(t,e){return typeof e=="string"?Zc(t,e):e instanceof ze?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hn=function(){function t(e,n){this.hasPendingWrites=e,this.fromCache=n}return t.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},t}(),nn=function(t){function e(n,r,i,o,s,u){var a=this;return(a=t.call(this,n,r,i,o,u)||this)._firestore=n,a._firestoreImpl=n,a.metadata=s,a}return $(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(n){if(n===void 0&&(n={}),this._document){if(this._converter){var r=new _i(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}},e.prototype.get=function(n,r){if(r===void 0&&(r={}),this._document){var i=this._document.data.field(ws("DocumentSnapshot.get",n));if(i!==null)return this._userDataWriter.convertValue(i,r.serverTimestamps)}},e}(Ki),_i=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return $(e,t),e.prototype.data=function(n){return n===void 0&&(n={}),t.prototype.data.call(this,n)},e}(nn),yn=function(){function t(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Hn(i.hasPendingWrites,i.fromCache),this.query=r}return Object.defineProperty(t.prototype,"docs",{get:function(){var e=[];return this.forEach(function(n){return e.push(n)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.size===0},enumerable:!1,configurable:!0}),t.prototype.forEach=function(e,n){var r=this;this._snapshot.docs.forEach(function(i){e.call(n,new _i(r._firestore,r._userDataWriter,i.key,i,new Hn(r._snapshot.mutatedKeys.has(i.key),r._snapshot.fromCache),r.query.converter))})},t.prototype.docChanges=function(e){e===void 0&&(e={});var n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new A(m.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){var o=0;return r._snapshot.docChanges.map(function(u){return{type:"added",doc:new _i(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Hn(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}})}var s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(function(u){return i||u.type!==3}).map(function(u){var a=new _i(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Hn(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),c=-1,l=-1;return u.type!==0&&(c=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),u.type!==1&&(l=(s=s.add(u.doc)).indexOf(u.doc.key)),{type:gE(u.type),doc:a,oldIndex:c,newIndex:l}})}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges},t}();function gE(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return j()}}function Qg(t,e){return t instanceof nn&&e instanceof nn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof yn&&e instanceof yn&&t._firestore===e._firestore&&Vg(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yg(t){if(cs(t)&&t.explicitOrderBy.length===0)throw new A(m.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var co=function(){};function fn(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var yE=function(t){function e(n,r,i){var o=this;return(o=t.call(this)||this).jc=n,o.Wc=r,o.Gc=i,o.type="where",o}return $(e,t),e.prototype._apply=function(n){var r=hr(n.firestore),i=function(o,s,u,a,c,l,f){var h;if(c.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new A(m.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+l+"' queries on FieldPath.documentId().");if(l==="in"||l==="not-in"){uh(f,l);for(var d=[],g=0,y=f;g<y.length;g++){var w=y[g];d.push(sh(a,o,w))}h={arrayValue:{values:d}}}else h=sh(a,o,f)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||uh(f,l),h=zg(u,"where",f,l==="in"||l==="not-in");var _=ve.create(c,l,h);return function(P,T){if(T.g()){var U=bc(P);if(U!==null&&!U.isEqual(T.field))throw new A(m.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+U.toString()+"' and '"+T.field.toString()+"'");var z=wc(P);z!==null&&Jg(P,T.field,z)}var Z=function(lt,Y){for(var vt=0,pt=lt.filters;vt<pt.length;vt++){var Bt=pt[vt];if(Y.indexOf(Bt.op)>=0)return Bt.op}return null}(P,function(lt){switch(lt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(T.op));if(Z!==null)throw Z===T.op?new A(m.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+T.op.toString()+"' filter."):new A(m.INVALID_ARGUMENT,"Invalid query. You cannot use '"+T.op.toString()+"' filters with '"+Z.toString()+"' filters.")}(o,_),_}(n._query,0,r,n.firestore._databaseId,this.jc,this.Wc,this.Gc);return new me(n.firestore,n.converter,function(o,s){var u=o.filters.concat([s]);return new un(o.path,o.collectionGroup,o.explicitOrderBy.slice(),u,o.limit,o.limitType,o.startAt,o.endAt)}(n._query,i))},e}(co),vE=function(t){function e(n,r){var i=this;return(i=t.call(this)||this).jc=n,i.zc=r,i.type="orderBy",i}return $(e,t),e.prototype._apply=function(n){var r=function(i,o,s){if(i.startAt!==null)throw new A(m.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new A(m.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var u=new Nr(o,s);return function(a,c){if(wc(a)===null){var l=bc(a);l!==null&&Jg(a,l,c.field)}}(i,u),u}(n._query,this.jc,this.zc);return new me(n.firestore,n.converter,function(i,o){var s=i.explicitOrderBy.concat([o]);return new un(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(n._query,r))},e}(co),rh=function(t){function e(n,r,i){var o=this;return(o=t.call(this)||this).type=n,o.Hc=r,o.Jc=i,o}return $(e,t),e.prototype._apply=function(n){return new me(n.firestore,n.converter,Ap(n._query,this.Hc,this.Jc))},e}(co),ih=function(t){function e(n,r,i){var o=this;return(o=t.call(this)||this).type=n,o.Yc=r,o.Xc=i,o}return $(e,t),e.prototype._apply=function(n){var r=Xg(n,this.type,this.Yc,this.Xc);return new me(n.firestore,n.converter,function(i,o){return new un(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(n._query,r))},e}(co),oh=function(t){function e(n,r,i){var o=this;return(o=t.call(this)||this).type=n,o.Yc=r,o.Xc=i,o}return $(e,t),e.prototype._apply=function(n){var r=Xg(n,this.type,this.Yc,this.Xc);return new me(n.firestore,n.converter,function(i,o){return new un(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(n._query,r))},e}(co);function Xg(t,e,n,r){if(n[0]=Nt(n[0]),n[0]instanceof Ki)return function(o,s,u,a,c){if(!a)throw new A(m.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+u+"().");for(var l=[],f=0,h=Ur(o);f<h.length;f++){var d=h[f];if(d.field.isKeyField())l.push(ss(s,a.key));else{var g=a.data.field(d.field);if(yc(g))throw new A(m.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){var y=d.field.canonicalString();throw new A(m.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+y+"' (used as the orderBy) does not exist.")}l.push(g)}}return new Fi(l,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=hr(t.firestore);return function(o,s,u,a,c,l){var f=o.explicitOrderBy;if(c.length>f.length)throw new A(m.INVALID_ARGUMENT,"Too many arguments provided to "+a+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var h=[],d=0;d<c.length;d++){var g=c[d];if(f[d].field.isKeyField()){if(typeof g!="string")throw new A(m.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+a+"(), but got a "+typeof g);if(!_c(o)&&g.indexOf("/")!==-1)throw new A(m.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+a+"() must be a plain document ID, but '"+g+"' contains a slash.");var y=o.path.child(ot.fromString(g));if(!B.isDocumentKey(y))throw new A(m.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+a+"() must result in a valid document path, but '"+y+"' is not because it contains an odd number of segments.");var w=new B(y);h.push(ss(s,w))}else{var _=zg(u,a,g);h.push(_)}}return new Fi(h,l)}(t._query,t.firestore._databaseId,i,e,n,r)}function sh(t,e,n){if(typeof(n=Nt(n))=="string"){if(n==="")throw new A(m.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!_c(e)&&n.indexOf("/")!==-1)throw new A(m.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(ot.fromString(n));if(!B.isDocumentKey(r))throw new A(m.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return ss(t,new B(r))}if(n instanceof wt)return ss(t,n._key);throw new A(m.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+ru(n)+".")}function uh(t,e){if(!Array.isArray(t)||t.length===0)throw new A(m.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new A(m.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Jg(t,e,n){if(!n.isEqual(e))throw new A(m.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tl=function(){function t(){}return t.prototype.convertValue=function(e,n){switch(n===void 0&&(n="none"),nr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw j()}},t.prototype.convertObject=function(e,n){var r=this,i={};return ur(e.fields,function(o,s){i[o]=r.convertValue(s,n)}),i},t.prototype.convertGeoPoint=function(e){return new iu(At(e.latitude),At(e.longitude))},t.prototype.convertArray=function(e,n){var r=this;return(e.values||[]).map(function(i){return r.convertValue(i,n)})},t.prototype.convertServerTimestamp=function(e,n){switch(n){case"previous":var r=_p(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Li(e));default:return null}},t.prototype.convertTimestamp=function(e){var n=Tn(e);return new ue(n.seconds,n.nanos)},t.prototype.convertDocumentKey=function(e,n){var r=ot.fromString(e);H(Qp(r));var i=new vs(r.get(1),r.get(3)),o=new B(r.popFirst(5));return i.isEqual(n)||Ct("Document "+o+" contains a document reference within a different database ("+i.projectId+"/"+i.database+") which is not supported. It will be treated as a reference in the current database ("+n.projectId+"/"+n.database+") instead."),o},t}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var mE=function(t){function e(n){var r=this;return(r=t.call(this)||this).firestore=n,r}return $(e,t),e.prototype.convertBytes=function(n){return new or(n)},e.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return new wt(this.firestore,null,r)},e}(tl),wE=function(){function t(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=hr(e)}return t.prototype.set=function(e,n,r){this._verifyNotCommitted();var i=vn(e,this._firestore),o=su(i.converter,n,r),s=ou(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Gt.none())),this},t.prototype.update=function(e,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];this._verifyNotCommitted();var s,u=vn(e,this._firestore);return s=typeof(n=Nt(n))=="string"||n instanceof ze?Xc(this._dataReader,"WriteBatch.update",u._key,n,r,i):Yc(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(s.toMutation(u._key,Gt.exists(!0))),this},t.prototype.delete=function(e){this._verifyNotCommitted();var n=vn(e,this._firestore);return this._mutations=this._mutations.concat(new uo(n._key,Gt.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new A(m.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(t,e){if((t=Nt(t)).firestore!==e)throw new A(m.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xn=function(t){function e(n){var r=this;return(r=t.call(this)||this).firestore=n,r}return $(e,t),e.prototype.convertBytes=function(n){return new or(n)},e.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return new wt(this.firestore,null,r)},e}(tl);function ah(t,e,n){t=ut(t,wt);var r=ut(t.firestore,Dt),i=su(t.converter,e,n);return lo(r,[ou(hr(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Gt.none())])}function ch(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=ut(t,wt);var o=ut(t.firestore,Dt),s=hr(o);return lo(o,[(typeof(e=Nt(e))=="string"||e instanceof ze?Xc(s,"updateDoc",t._key,e,n,r):Yc(s,"updateDoc",t._key,e)).toMutation(t._key,Gt.exists(!0))])}function Zg(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Nt(t);var s={includeMetadataChanges:!1},u=0;typeof i[u]!="object"||Qr(i[u])||(s=i[u],u++);var a,c,l,f={includeMetadataChanges:s.includeMetadataChanges};if(Qr(i[u])){var h=i[u];i[u]=(e=h.next)===null||e===void 0?void 0:e.bind(h),i[u+1]=(n=h.error)===null||n===void 0?void 0:n.bind(h),i[u+2]=(r=h.complete)===null||r===void 0?void 0:r.bind(h)}if(t instanceof wt)c=ut(t.firestore,Dt),l=no(t._key.path),a={next:function(y){i[u]&&i[u](_a(c,t,y))},error:i[u+1],complete:i[u+2]};else{var d=ut(t,me);c=ut(d.firestore,Dt),l=d._query;var g=new Xn(c);a={next:function(y){i[u]&&i[u](new yn(c,g,d,y))},error:i[u+1],complete:i[u+2]},Yg(t._query)}return function(y,w,_,P){var T=this,U=new eu(P),z=new Vc(w,U,_);return y.asyncQueue.enqueueAndForget(function(){return I(T,void 0,void 0,function(){var Z;return E(this,function(lt){switch(lt.label){case 0:return Z=Mc,[4,Wr(y)];case 1:return[2,Z.apply(void 0,[lt.sent(),z])]}})})}),function(){U.Wo(),y.asyncQueue.enqueueAndForget(function(){return I(T,void 0,void 0,function(){var Z;return E(this,function(lt){switch(lt.label){case 0:return Z=Fc,[4,Wr(y)];case 1:return[2,Z.apply(void 0,[lt.sent(),z])]}})})})}}($t(c),l,f,a)}function lo(t,e){return function(n,r){var i=this,o=new ce;return n.asyncQueue.enqueueAndForget(function(){return I(i,void 0,void 0,function(){var s;return E(this,function(u){switch(u.label){case 0:return s=P_,[4,Pg(n)];case 1:return[2,s.apply(void 0,[u.sent(),r,o])]}})})}),o.promise}($t(t),e)}function _a(t,e,n){var r=n.docs.get(e._key),i=new Xn(t);return new nn(t,i,e._key,r,new Hn(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bE=function(t){function e(n,r){var i=this;return(i=t.call(this,n,r)||this)._firestore=n,i}return $(e,t),e.prototype.get=function(n){var r=this,i=vn(n,this._firestore),o=new Xn(this._firestore);return t.prototype.get.call(this,n).then(function(s){return new nn(r._firestore,o,i._key,s._document,new Hn(!1,!1),i.converter)})},e}(function(){function t(e,n){this._firestore=e,this._transaction=n,this._dataReader=hr(e)}return t.prototype.get=function(e){var n=this,r=vn(e,this._firestore),i=new mE(this._firestore);return this._transaction.lookup([r._key]).then(function(o){if(!o||o.length!==1)return j();var s=o[0];if(s.isFoundDocument())return new Ki(n._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Ki(n._firestore,i,r._key,null,r.converter);throw j()})},t.prototype.set=function(e,n,r){var i=vn(e,this._firestore),o=su(i.converter,n,r),s=ou(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this},t.prototype.update=function(e,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s,u=vn(e,this._firestore);return s=typeof(n=Nt(n))=="string"||n instanceof ze?Xc(this._dataReader,"Transaction.update",u._key,n,r,i):Yc(this._dataReader,"Transaction.update",u._key,n),this._transaction.update(u._key,s),this},t.prototype.delete=function(e){var n=vn(e,this._firestore);return this._transaction.delete(n._key),this},t}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(){if(typeof Uint8Array>"u")throw new A(m.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function fh(){if(typeof atob>"u")throw new A(m.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ty=function(){function t(e){this._delegate=e}return t.fromBase64String=function(e){return fh(),new t(or.fromBase64String(e))},t.fromUint8Array=function(e){return lh(),new t(or.fromUint8Array(e))},t.prototype.toBase64=function(){return fh(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return lh(),this._delegate.toUint8Array()},t.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),_E=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(e,n){return function(r,i){nh(r=ut(r,Dt));var o=$t(r),s=r._freezeSettings(),u=new wa;return eh(o,u,new Dg(u,s.cacheSizeBytes,i==null?void 0:i.forceOwnership))}(e._delegate,{forceOwnership:n})},t.prototype.enableMultiTabIndexedDbPersistence=function(e){return function(n){nh(n=ut(n,Dt));var r=$t(n),i=n._freezeSettings(),o=new wa;return eh(r,o,new Q_(o,i.cacheSizeBytes))}(e._delegate)},t.prototype.clearIndexedDbPersistence=function(e){return function(n){var r=this;if(n._initialized&&!n._terminated)throw new A(m.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var i=new ce;return n._queue.enqueueAndForgetEvenWhileRestricted(function(){return I(r,void 0,void 0,function(){var o;return E(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,function(u){return I(this,void 0,void 0,function(){var a;return E(this,function(c){switch(c.label){case 0:return Kr.yt()?(a=u+"main",[4,Kr.delete(a)]):[2,Promise.resolve()];case 1:return c.sent(),[2]}})})}(Dc(n._databaseId,n._persistenceKey))];case 1:return s.sent(),i.resolve(),[3,3];case 2:return o=s.sent(),i.reject(o),[3,3];case 3:return[2]}})})}),i.promise}(e._delegate)},t}(),ey=function(){function t(e,n,r){var i=this;this._delegate=n,this.Zc=r,this.INTERNAL={delete:function(){return i.terminate()}},e instanceof vs||(this.tu=e)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(e){var n=this._delegate._getSettings();e.merge||n.host===e.host||is("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)},t.prototype.useEmulator=function(e,n,r){r===void 0&&(r={}),function(i,o,s,u){var a;u===void 0&&(u={});var c=(i=ut(i,qi))._getSettings();if(c.host!=="firestore.googleapis.com"&&c.host!==o&&is("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},c),{host:o+":"+s,ssl:!1})),u.mockUserToken){var l,f;if(typeof u.mockUserToken=="string")l=u.mockUserToken,f=Lt.MOCK_USER;else{l=Km(u.mockUserToken,(a=i._app)===null||a===void 0?void 0:a.options.projectId);var h=u.mockUserToken.sub||u.mockUserToken.user_id;if(!h)throw new A(m.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Lt(h)}i._credentials=new tE(new Lg(l,f))}}(this._delegate,e,n,r)},t.prototype.enableNetwork=function(){return function(e){var n=this;return e.asyncQueue.enqueue(function(){return I(n,void 0,void 0,function(){var r,i;return E(this,function(o){switch(o.label){case 0:return[4,zf(e)];case 1:return r=o.sent(),[4,Hf(e)];case 2:return i=o.sent(),[2,(r.setNetworkEnabled(!0),function(s){var u=L(s);return u.Or.delete(0),ao(u)}(i))]}})})})}($t(ut(this._delegate,Dt)))},t.prototype.disableNetwork=function(){return function(e){var n=this;return e.asyncQueue.enqueue(function(){return I(n,void 0,void 0,function(){var r,i;return E(this,function(o){switch(o.label){case 0:return[4,zf(e)];case 1:return r=o.sent(),[4,Hf(e)];case 2:return i=o.sent(),[2,(r.setNetworkEnabled(!1),function(s){return I(this,void 0,void 0,function(){var u;return E(this,function(a){switch(a.label){case 0:return(u=L(s)).Or.add(0),[4,ii(u)];case 1:return a.sent(),u.Br.set("Offline"),[2]}})})}(i))]}})})})}($t(ut(this._delegate,Dt)))},t.prototype.enablePersistence=function(e){var n=!1,r=!1;return e&&Mg("synchronizeTabs",n=!!e.synchronizeTabs,"experimentalForceOwningTab",r=!!e.experimentalForceOwningTab),n?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,r)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(e){var n=this,r=new ce;return e.asyncQueue.enqueueAndForget(function(){return I(n,void 0,void 0,function(){var i;return E(this,function(o){switch(o.label){case 0:return i=U_,[4,Pg(e)];case 1:return[2,i.apply(void 0,[o.sent(),r])]}})})}),r.promise}($t(ut(this._delegate,Dt)))},t.prototype.onSnapshotsInSync=function(e){return function(n,r){return function(i,o){var s=this,u=new eu(o);return i.asyncQueue.enqueueAndForget(function(){return I(s,void 0,void 0,function(){var a;return E(this,function(c){switch(c.label){case 0:return a=function(l,f){L(l).Gr.add(f),f.next()},[4,Wr(i)];case 1:return[2,a.apply(void 0,[c.sent(),u])]}})})}),function(){u.Wo(),i.asyncQueue.enqueueAndForget(function(){return I(s,void 0,void 0,function(){var a;return E(this,function(c){switch(c.label){case 0:return a=function(l,f){L(l).Gr.delete(f)},[4,Wr(i)];case 1:return[2,a.apply(void 0,[c.sent(),u])]}})})})}}($t(n=ut(n,Dt)),Qr(r)?r:{next:r})}(this._delegate,e)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new A(m.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(e){try{return new bs(this,Fg(this._delegate,e))}catch(n){throw te(n,"collection()","Firestore.collection()")}},t.prototype.doc=function(e){try{return new Jn(this,qo(this._delegate,e))}catch(n){throw te(n,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(e){try{return new cu(this,function(n,r){if(n=ut(n,qi),Gc("collectionGroup","collection id",r),r.indexOf("/")>=0)throw new A(m.INVALID_ARGUMENT,"Invalid collection ID '"+r+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new me(n,null,function(i){return new un(ot.emptyPath(),i)}(r))}(this._delegate,e))}catch(n){throw te(n,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(e){var n=this;return function(r,i){return function(o,s){var u=this,a=new ce;return o.asyncQueue.enqueueAndForget(function(){return I(u,void 0,void 0,function(){var c;return E(this,function(l){switch(l.label){case 0:return[4,function(f){return nu(f).then(function(h){return h.datastore})}(o)];case 1:return c=l.sent(),new X_(o.asyncQueue,c,s,a).run(),[2]}})})}),a.promise}($t(r),function(o){return i(new bE(r,o))})}(this._delegate,function(r){return e(new ny(n,r))})},t.prototype.batch=function(){var e=this;return $t(this._delegate),new ry(new wE(this._delegate,function(n){return lo(e._delegate,n)}))},t.prototype.loadBundle=function(e){throw new A(m.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(e){throw new A(m.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),uu=function(t){function e(n){var r=this;return(r=t.call(this)||this).firestore=n,r}return $(e,t),e.prototype.convertBytes=function(n){return new ty(new or(n))},e.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return Jn.eu(r,this.firestore,null)},e}(tl);function EE(t){var e;e=t,Re.setLogLevel(e)}var ny=function(){function t(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new uu(e)}return t.prototype.get=function(e){var n=this,r=Gn(e);return this._delegate.get(r).then(function(i){return new $i(n._firestore,new nn(n._firestore._delegate,n._userDataWriter,i._key,i._document,i.metadata,r.converter))})},t.prototype.set=function(e,n,r){var i=Gn(e);return r?(Wc("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this},t.prototype.update=function(e,n,r){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var u=Gn(e);return arguments.length===2?this._delegate.update(u,n):(i=this._delegate).update.apply(i,It([u,n,r],o)),this},t.prototype.delete=function(e){var n=Gn(e);return this._delegate.delete(n),this},t}(),ry=function(){function t(e){this._delegate=e}return t.prototype.set=function(e,n,r){var i=Gn(e);return r?(Wc("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this},t.prototype.update=function(e,n,r){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var u=Gn(e);return arguments.length===2?this._delegate.update(u,n):(i=this._delegate).update.apply(i,It([u,n,r],o)),this},t.prototype.delete=function(e){var n=Gn(e);return this._delegate.delete(n),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),au=function(){function t(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}return t.prototype.fromFirestore=function(e,n){var r=new _i(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new zi(this._firestore,r),n!=null?n:{})},t.prototype.toFirestore=function(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new uu(e),n),i.set(n,o)),o},t}();au.su=new WeakMap;var Jn=function(){function t(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new uu(e)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new A(m.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new wt(n._delegate,r,new B(e)))},t.eu=function(e,n,r){return new t(n,new wt(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new bs(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(e){try{return new bs(this.firestore,Fg(this._delegate,e))}catch(n){throw te(n,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(e){return(e=Nt(e))instanceof wt&&Ug(this._delegate,e)},t.prototype.set=function(e,n){n=Wc("DocumentReference.set",n);try{return n?ah(this._delegate,e,n):ah(this._delegate,e)}catch(r){throw te(r,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];try{return arguments.length===1?ch(this._delegate,e):ch.apply(void 0,It([this._delegate,e,n],r))}catch(o){throw te(o,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return lo(ut((e=this._delegate).firestore,Dt),[new uo(e._key,Gt.none())]);var e},t.prototype.onSnapshot=function(){for(var e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=iy(n),o=oy(n,function(s){return new $i(e.firestore,new nn(e.firestore._delegate,e._userDataWriter,s._key,s._document,s.metadata,e._delegate.converter))});return Zg(this._delegate,i,o)},t.prototype.get=function(e){var n=this;return((e==null?void 0:e.source)==="cache"?function(r){r=ut(r,wt);var i=ut(r.firestore,Dt),o=$t(i),s=new Xn(i);return function(u,a){var c=this,l=new ce;return u.asyncQueue.enqueueAndForget(function(){return I(c,void 0,void 0,function(){var f;return E(this,function(h){switch(h.label){case 0:return f=function(d,g,y){return I(this,void 0,void 0,function(){var w,_;return E(this,function(P){switch(P.label){case 0:return P.trys.push([0,2,,3]),[4,function(T,U){var z=L(T);return z.persistence.runTransaction("read document","readonly",function(Z){return z.Mn.mn(Z,U)})}(d,g)];case 1:return(_=P.sent()).isFoundDocument()?y.resolve(_):_.isNoDocument()?y.resolve(null):y.reject(new A(m.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return w=P.sent(),_=ui(w,"Failed to get document '"+g+" from cache"),y.reject(_),[3,3];case 3:return[2]}})})},[4,kg(u)];case 1:return[2,f.apply(void 0,[h.sent(),a,l])]}})})}),l.promise}(o,r._key).then(function(u){return new nn(i,s,r._key,u,new Hn(u!==null&&u.hasLocalMutations,!0),r.converter)})}(this._delegate):(e==null?void 0:e.source)==="server"?function(r){r=ut(r,wt);var i=ut(r.firestore,Dt);return Gf($t(i),r._key,{source:"server"}).then(function(o){return _a(i,r,o)})}(this._delegate):function(r){r=ut(r,wt);var i=ut(r.firestore,Dt);return Gf($t(i),r._key).then(function(o){return _a(i,r,o)})}(this._delegate)).then(function(r){return new $i(n.firestore,new nn(n.firestore._delegate,n._userDataWriter,r._key,r._document,r.metadata,n._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(au.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function te(t,e,n){return t.message=t.message.replace(e,n),t}function iy(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(typeof r=="object"&&!Qr(r))return r}return{}}function oy(t,e){var n,r,i;return{next:function(o){i.next&&i.next(e(o))},error:(n=(i=Qr(t[0])?t[0]:Qr(t[1])?t[1]:typeof t[0]=="function"?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var $i=function(){function t(e,n){this._firestore=e,this._delegate=n}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Jn(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(e){return this._delegate.data(e)},t.prototype.get=function(e,n){return this._delegate.get(e,n)},t.prototype.isEqual=function(e){return Qg(this._delegate,e._delegate)},t}(),zi=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return $(e,t),e.prototype.data=function(n){return this._delegate.data(n)},e}($i),cu=function(){function t(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new uu(e)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,fn(this._delegate,function(i,o,s){var u=o,a=ws("where",i);return new yE(a,u,s)}(e,n,r)))}catch(i){throw te(i,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,fn(this._delegate,function(r,i){i===void 0&&(i="asc");var o=i,s=ws("orderBy",r);return new vE(s,o)}(e,n)))}catch(r){throw te(r,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,fn(this._delegate,function(n){return Zf("limit",n),new rh("limit",n,"F")}(e)))}catch(n){throw te(n,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,fn(this._delegate,function(n){return Zf("limitToLast",n),new rh("limitToLast",n,"L")}(e)))}catch(n){throw te(n,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,fn(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new ih("startAt",r,!0)}.apply(void 0,e)))}catch(r){throw te(r,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,fn(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new ih("startAfter",r,!1)}.apply(void 0,e)))}catch(r){throw te(r,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,fn(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new oh("endBefore",r,!0)}.apply(void 0,e)))}catch(r){throw te(r,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,fn(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new oh("endAt",r,!1)}.apply(void 0,e)))}catch(r){throw te(r,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(e){return Vg(this._delegate,e._delegate)},t.prototype.get=function(e){var n=this;return((e==null?void 0:e.source)==="cache"?function(r){r=ut(r,me);var i=ut(r.firestore,Dt),o=$t(i),s=new Xn(i);return function(u,a){var c=this,l=new ce;return u.asyncQueue.enqueueAndForget(function(){return I(c,void 0,void 0,function(){var f;return E(this,function(h){switch(h.label){case 0:return f=function(d,g,y){return I(this,void 0,void 0,function(){var w,_,P,T,U;return E(this,function(z){switch(z.label){case 0:return z.trys.push([0,2,,3]),[4,ps(d,g,!0)];case 1:return U=z.sent(),w=new Sg(g,U.Bn),_=w._o(U.documents),P=w.applyChanges(_,!1),y.resolve(P.snapshot),[3,3];case 2:return T=z.sent(),U=ui(T,"Failed to execute query '"+g+" against cache"),y.reject(U),[3,3];case 3:return[2]}})})},[4,kg(u)];case 1:return[2,f.apply(void 0,[h.sent(),a,l])]}})})}),l.promise}(o,r._query).then(function(u){return new yn(i,s,r,u)})}(this._delegate):(e==null?void 0:e.source)==="server"?function(r){r=ut(r,me);var i=ut(r.firestore,Dt),o=$t(i),s=new Xn(i);return Wf(o,r._query,{source:"server"}).then(function(u){return new yn(i,s,r,u)})}(this._delegate):function(r){r=ut(r,me);var i=ut(r.firestore,Dt),o=$t(i),s=new Xn(i);return Yg(r._query),Wf(o,r._query).then(function(u){return new yn(i,s,r,u)})}(this._delegate)).then(function(r){return new Ea(n.firestore,new yn(n.firestore._delegate,n._userDataWriter,n._delegate,r._snapshot))})},t.prototype.onSnapshot=function(){for(var e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=iy(n),o=oy(n,function(s){return new Ea(e.firestore,new yn(e.firestore._delegate,e._userDataWriter,e._delegate,s._snapshot))});return Zg(this._delegate,i,o)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(au.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),IE=function(){function t(e,n){this._firestore=e,this._delegate=n}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new zi(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Ea=function(){function t(e,n){this._firestore=e,this._delegate=n}return Object.defineProperty(t.prototype,"query",{get:function(){return new cu(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map(function(n){return new zi(e._firestore,n)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(e){var n=this;return this._delegate.docChanges(e).map(function(r){return new IE(n._firestore,r)})},t.prototype.forEach=function(e,n){var r=this;this._delegate.forEach(function(i){e.call(n,new zi(r._firestore,i))})},t.prototype.isEqual=function(e){return Qg(this._delegate,e._delegate)},t}(),bs=function(t){function e(n,r){var i=this;return(i=t.call(this,n,r)||this).firestore=n,i._delegate=r,i}return $(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var n=this._delegate.parent;return n?new Jn(this.firestore,n):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(n){try{return new Jn(this.firestore,n===void 0?qo(this._delegate):qo(this._delegate,n))}catch(r){throw te(r,"doc()","CollectionReference.doc()")}},e.prototype.add=function(n){var r=this;return function(i,o){var s=ut(i.firestore,Dt),u=qo(i),a=su(i.converter,o);return lo(s,[ou(hr(i.firestore),"addDoc",u._key,a,i.converter!==null,{}).toMutation(u._key,Gt.exists(!1))]).then(function(){return u})}(this._delegate,n).then(function(i){return new Jn(r.firestore,i)})},e.prototype.isEqual=function(n){return Ug(this._delegate,n._delegate)},e.prototype.withConverter=function(n){return new e(this.firestore,n?this._delegate.withConverter(au.nu(this.firestore,n)):this._delegate.withConverter(null))},e}(cu);function Gn(t){return ut(t,wt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var TE=function(){function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._delegate=new(ze.bind.apply(ze,It([void 0],e)))}return t.documentId=function(){return new t(Le.keyField().canonicalString())},t.prototype.isEqual=function(e){return(e=Nt(e))instanceof ze&&this._delegate._internalPath.isEqual(e._internalPath)},t}(),SE=function(){function t(e){this._delegate=e}return t.serverTimestamp=function(){var e=new cE("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Qc("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return new lE("arrayUnion",i)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return new fE("arrayRemove",i)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(r){return new hE("increment",r)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},t}(),AE={Firestore:ey,GeoPoint:iu,Timestamp:ue,Blob:ty,Transaction:ny,WriteBatch:ry,DocumentReference:Jn,DocumentSnapshot:$i,Query:cu,QueryDocumentSnapshot:zi,QuerySnapshot:Ea,CollectionReference:bs,FieldPath:TE,FieldValue:SE,setLogLevel:EE,CACHE_SIZE_UNLIMITED:oE};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(t){(function(e,n){e.INTERNAL.registerComponent(new Ps("firestore",function(r){var i=r.getProvider("app").getImmediate();return n(i,r.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},AE)))})(t,function(e,n){return new ey(e,new Dt(e,n),new _E)}),t.registerVersion("@firebase/firestore","2.4.1")}CE(Zr);const NE={apiKey:"AIzaSyCtkXEAp8pgNmcqO9tHoDUZfJUJfn0wQlw",authDomain:"chatbot-7eb8f.firebaseapp.com",databaseURL:"https://chatbot-7eb8f-default-rtdb.firebaseio.com",projectId:"chatbot-7eb8f",storageBucket:"chatbot-7eb8f.appspot.com",messagingSenderId:"695825043932",appId:"1:695825043932:web:3dd3a26f34087890c63f19",measurementId:"G-JYNQK5EKMK"};Zr.initializeApp(NE);const Mn=Zr.firestore();const xE=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},DE={setup(){const t=wo(""),e=wo("");let n=wo("minimize"),r=wo("");var i;const o=As({data:localStorage.getItem("visitor_data")!==null?JSON.parse(localStorage.getItem("visitor_data")):"",messages:[]}),s=(g,y)=>(g=Math.ceil(g),y=Math.floor(y),Math.floor(Math.random()*(y-g+1))+g),u=async()=>{if(t.value.trim().length>0&&o.data.visitor_id===void 0){let g=`V${s(1e14,999999999999999)}`,y={visitor_id:g,type:"pending",message:t.value,timestamp:Date.now()};localStorage.setItem("visitor_data",JSON.stringify(y)),o.data=y,Mn.collection("visitors").doc(g).set(y).then(()=>{console.log("Document successfully written!"),a(),t.value=""}).catch(w=>{console.error("Error writing document: ",w)})}},a=()=>{o.data.visitor_id!==void 0&&(o.data.type=="pending"&&o.messages.push({sender:o.data.visitor_id,receiver:null,message:o.data.message,read:0,timestamp:o.data.timestamp}),i=Mn.collection("visitors").where("visitor_id","==",o.data.visitor_id).onSnapshot(g=>{g.docChanges().forEach(y=>{y.type==="modified"&&(o.data=y.doc.data(),localStorage.setItem("visitor_data",JSON.stringify(y.doc.data())),h())})}))},c=()=>{n.value=n.value==""?"minimize":""},l=()=>{if(e.value.trim().length==0||o.data.type!="active"){e.value="";return}const g=Mn.collection("chat_room").doc(o.data.chat_room_id).collection("messages"),y={sender:o.data.visitor_id,receiver:o.data.operator_id,message:e.value,read:0,timestamp:Date.now()};g.add(y),e.value=""},f=()=>{if(o.messages.length>1&&o.data!=""){Mn.collection("chat_room").doc(o.data.chat_room_id).collection("messages").where("read","==",0).where("sender","==",o.data.operator_id).onSnapshot(y=>{y.forEach(w=>{Mn.collection("chat_room").doc(o.data.chat_room_id).collection("messages").doc(w.id).update({read:1})})});let g=r.value;g.scrollTop=g.scrollHeight}},h=()=>{o.data!=""&&o.data.type=="closedbyoperator"&&(localStorage.getItem("messages")===null&&localStorage.setItem("messages",o.data.messages),o.messages=JSON.parse(localStorage.getItem("messages"))),o.data!=""&&o.data.type=="active"&&Mn.collection("chat_room").doc(o.data.chat_room_id).collection("messages").orderBy("timestamp").onSnapshot(g=>{let y=[];g.forEach(w=>{y.push(w.data())}),o.messages=y})},d=()=>{i(),o.data.type=="active"&&Mn.collection("visitors").doc(o.data.visitor_id).update({type:"closedbyvisitor",timestamp:Date.now()}),localStorage.removeItem("visitor_data"),localStorage.removeItem("messages"),o.data="",o.messages=[]};return Ua(()=>{a(),h()}),Gh(()=>{f()}),{inputQuestion:t,StartChat:u,SyncData:a,randomNumber:s,state:o,inputMessage:e,SendMessage:l,fetchMassages:h,toggleBox:c,isBoxOpen:n,scrollBottom:f,endChat:d,hasScrolledToBottom:r}}},OE={class:"container"},RE={class:"conversation"},kE={class:"conversation__header"},PE=at("div",{class:"conversation__info"},[at("span",{class:"conversation__status"}),at("span",{class:"conversation__name"},"ChatBox")],-1),LE={class:"conversation__header-actions"},ME={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},FE=at("line",{x1:"18",y1:"6",x2:"6",y2:"18"},null,-1),UE=at("line",{x1:"6",y1:"6",x2:"18",y2:"18"},null,-1),VE=[FE,UE],jE={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-chevron-up",viewBox:"0 0 16 16"},BE=at("path",{"fill-rule":"evenodd",d:"M7.646 4.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 5.707l-5.646 5.647a.5.5 0 0 1-.708-.708l6-6z"},null,-1),qE=[BE],KE={key:0,class:"conversation__body"},$E={class:"form-inner"},zE=at("label",{for:""},[sd("Ask your Question "),at("span",{style:{color:"red"}},"*")],-1),HE=at("br",null,null,-1),GE=at("input",{type:"submit",value:"Login"},null,-1),WE={key:1,class:"conversation__body",ref:"hasScrolledToBottom"},QE={key:0,class:"conversation__bubble conversation__bubble--right"},YE={class:"conversation__text"},XE={key:1,class:"conversation__bubble conversation__bubble--left"},JE={class:"conversation__text"},ZE={key:0,style:{"border-left":"5px solid #54e1ff","background-color":"#54e1ff30",padding:"3px 10px","border-radius":"5px",display:"flex","justify-content":"space-between","align-items":"center"}},tI=at("p",{style:{"font-size":"10px","font-weight":"600"}},"Operator has ended the chat.",-1),eI=[tI],nI={key:2},rI=at("button",{type:"submit",class:"conversation__btn btn btn--send"},[at("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[at("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),at("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})])],-1);function iI(t,e,n,r,i,o){return he(),Ee("div",{class:_s(["mask",r.isBoxOpen])},[at("div",OE,[at("section",RE,[at("header",kE,[PE,at("div",LE,[r.state.data!=""?(he(),Ee("a",{key:0,href:"javascript:void(0)",style:{"font-size":"x-small",padding:"15px 10px"},onClick:e[0]||(e[0]=s=>r.endChat())},"End Chat")):_o("",!0),at("button",{class:"conversation__btn btn btn--close",title:"Close chat",onClick:e[1]||(e[1]=(...s)=>r.toggleBox&&r.toggleBox(...s))},[r.isBoxOpen==""?(he(),Ee("svg",ME,VE)):(he(),Ee("svg",jE,qE))])])]),r.state.data==""||r.state.data===null?(he(),Ee("div",KE,[at("form",{class:"login-form",onSubmit:e[3]||(e[3]=Ul((...s)=>r.StartChat&&r.StartChat(...s),["prevent"]))},[at("div",$E,[zE,wl(at("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=s=>r.inputQuestion=s),class:"form-control"},null,512),[[Fl,r.inputQuestion]]),HE,GE])],32)])):(he(),Ee("div",WE,[(he(!0),Ee(Ie,null,Dv(r.state.messages,s=>(he(),Ee(Ie,{key:s.key},[s.sender==r.state.data.visitor_id?(he(),Ee("div",QE,[at("p",YE,ul(s.message),1)])):s.sender==r.state.data.operator_id?(he(),Ee("div",XE,[at("p",JE,ul(s.message),1)])):_o("",!0)],64))),128)),r.state.data.type=="closedbyoperator"?(he(),Ee("div",ZE,eI)):_o("",!0)],512)),r.state.data!=""?(he(),Ee("footer",nI,[at("form",{class:"conversation__footer",onSubmit:e[5]||(e[5]=Ul((...s)=>r.SendMessage&&r.SendMessage(...s),["prevent"]))},[wl(at("input",{type:"text",class:"conversation__write",placeholder:"Write a message...","onUpdate:modelValue":e[4]||(e[4]=s=>r.inputMessage=s)},null,512),[[Fl,r.inputMessage]]),rI],32)])):_o("",!0)])])],2)}const oI=xE(DE,[["render",iI]]);Lm(oI).mount("#chat-widget");
